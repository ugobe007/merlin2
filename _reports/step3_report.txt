=== REPO ROOT ===
/Users/robertchristopher/merlin3

=== STEP 3 FILES (paths) ===
total 272
drwxr-xr-x@ 12 robertchristopher  staff    384 Jan 23 09:30 .
drwxr-xr-x@  9 robertchristopher  staff    288 Jan 23 11:13 ..
-rw-r--r--@  1 robertchristopher  staff   5187 Jan 22 11:49 Step0Welcome.tsx
-rw-r--r--@  1 robertchristopher  staff  12490 Jan 22 19:37 Step1Location_DEPRECATED.tsx
-rw-r--r--@  1 robertchristopher  staff  32956 Jan 23 09:21 Step1LocationV7.tsx
-rw-r--r--@  1 robertchristopher  staff   4493 Jan 22 11:49 Step1Opportunity.tsx
-rw-r--r--@  1 robertchristopher  staff  10618 Jan 23 05:45 Step2Goals.tsx
-rw-r--r--@  1 robertchristopher  staff   3029 Jan 22 11:49 Step2Questionnaire.tsx
-rw-r--r--@  1 robertchristopher  staff   4848 Jan 22 11:49 Step3Configuration.tsx
-rw-r--r--@  1 robertchristopher  staff  28242 Jan 23 16:38 Step3DetailsV7.tsx
-rw-r--r--@  1 robertchristopher  staff   7831 Jan 23 11:15 Step3Industry.tsx
-rw-r--r--@  1 robertchristopher  staff   4316 Jan 22 11:49 Step4Results.tsx
total 16
drwxr-xr-x@  9 robertchristopher  staff   288 Jan 23 11:13 .
drwxr-xr-x@ 19 robertchristopher  staff   608 Jan 22 11:17 ..
drwxr-xr-x@  4 robertchristopher  staff   128 Jan 22 11:17 advisor
drwxr-xr-x@  3 robertchristopher  staff    96 Jan 22 11:17 hooks
drwxr-xr-x@  5 robertchristopher  staff   160 Jan 22 11:18 live-preview
drwxr-xr-x@  3 robertchristopher  staff    96 Jan 23 11:13 services
drwxr-xr-x@  7 robertchristopher  staff   224 Jan 22 22:04 shared
drwxr-xr-x@ 12 robertchristopher  staff   384 Jan 23 09:30 steps
-rw-r--r--@  1 robertchristopher  staff  7836 Jan 23 14:41 WizardV7.tsx

=== WHERE Step3DetailsV7 IS ===
src/components/wizard/v7/WizardV7.tsx:16:import Step3DetailsV7 from './steps/Step3DetailsV7';
src/components/wizard/v7/WizardV7.tsx:161:                <Step3DetailsV7
src/components/wizard/v7/steps/Step3DetailsV7.tsx:45:interface Step3DetailsV7Props {
src/components/wizard/v7/steps/Step3DetailsV7.tsx:176:export default function Step3DetailsV7({
src/components/wizard/v7/steps/Step3DetailsV7.tsx:186:}: Step3DetailsV7Props) {

=== WHERE Step3Integration IS ===
src/services/calculators/carWashIntegration.ts:85: * This is called by Step3Integration.tsx or QuoteEngine
src/components/wizard/_archive-jan-2026/README.md:9:**Replacement:** `Step3Details.tsx` ‚Üí `Step3Integration.tsx` ‚Üí `CompleteStep3Component.tsx`
src/components/wizard/_archive-jan-2026/README.md:18:- `Step3Integration.tsx` - Enforces SSOT contract (no derived fields)
src/components/wizard/ROOT_COMPONENTS_README.md:11:- **Used by:** `Step3Integration.tsx`
src/components/wizard/ROOT_COMPONENTS_README.md:19:**Step3Integration.tsx** (235 lines)  
src/components/wizard/ROOT_COMPONENTS_README.md:75:Step3Integration.tsx (SSOT enforcement)
src/components/wizard/ROOT_COMPONENTS_README.md:92:- `Step3Integration.tsx` ‚Üí `v6/components/Step3Integration.tsx`
src/components/wizard/v6/steps/Step3Details.tsx:21:import { Step3Integration } from "../../Step3Integration";
src/components/wizard/v6/steps/Step3Details.tsx:126:          Note: Step3Integration has slightly different types due to legacy API
src/components/wizard/v6/steps/Step3Details.tsx:129:      <Step3Integration
src/components/wizard/Step3Integration.tsx:33:interface Step3IntegrationProps {
src/components/wizard/Step3Integration.tsx:43:export function Step3Integration({
src/components/wizard/Step3Integration.tsx:51:}: Step3IntegrationProps) {
src/components/wizard/Step3Integration.tsx:87:          console.warn("[Step3Integration] Compute skipped: pricing still loading/idle");
src/components/wizard/Step3Integration.tsx:97:          console.warn("[Step3Integration] Compute skipped: pricingConfig is null");
src/components/wizard/Step3Integration.tsx:299:export default Step3Integration;
src/components/wizard/v7/steps/Step3DetailsV7.tsx:7: * - Wraps Step3Integration.tsx (SSOT for data integrity)
src/components/wizard/v7/steps/Step3DetailsV7.tsx:26:import { Step3Integration } from "../../Step3Integration";
src/components/wizard/v7/steps/Step3DetailsV7.tsx:269:  // Handle updates from Step3Integration (live calculations)
src/components/wizard/v7/steps/Step3DetailsV7.tsx:608:            /* Step3Integration handles all question rendering and calculations */
src/components/wizard/v7/steps/Step3DetailsV7.tsx:609:            <Step3Integration
src/services/calculators/hotelIntegration.ts:67: * Main integration function - called by Step3Integration.tsx
src/components/wizard/WIZARD_ARCHITECTURE.md:49:    ‚îú‚îÄ‚îÄ Step3Integration.tsx            Step 3 SSOT enforcement
src/components/wizard/WIZARD_ARCHITECTURE.md:77:- Database via `Step3Details` ‚Üí `Step3Integration` ‚Üí `CompleteStep3Component`
src/components/wizard/WIZARD_ARCHITECTURE.md:81:WizardV6 ‚Üí Step3Details ‚Üí Step3Integration ‚Üí CompleteStep3Component
src/components/wizard/WIZARD_ARCHITECTURE.md:128:- `Step3Integration.tsx` - SSOT enforcement

=== STEP 3 IMPORT GRAPH (Step3DetailsV7) ===
Step3DetailsV7 file: src/components/wizard/v7/WizardV7.tsx
/**
 * WIZARDV7 - Next Generation Quote Wizard (Vineet's Vision)
 *
 * Canonical updates:
 * - Global TrueQuote modal manager (single modal, mode-based)
 * - Window event bus: any badge can open TrueQuote without prop threading
 * - Location Intelligence odometer in Step 1
 */

import React, { useEffect, useMemo, useState } from 'react';
import { useWizardV7 } from './hooks/useWizardV7';

// Steps (Vineet's 7-step flow)
import Step1LocationV7 from './steps/Step1LocationV7';
import Step2Goals from './steps/Step2Goals';
import Step3DetailsV7 from './steps/Step3DetailsV7';

// Shared
import BottomNavigation from './shared/BottomNavigation';

// Existing modal (we'll pass mode/payload as optional via `as any` to avoid TS friction)
import { TrueQuoteModal } from '@/components/shared/TrueQuoteModal';

type TrueQuoteModalMode = 'about' | 'proof';

type TrueQuoteProofPayload = {
  industry?: string | null;
  location?: {
    zipCode?: string;
    city?: string;
    state?: string;
    region?: string;
  };
  business?: {
    name?: string;
    address?: string;
    category?: string;
    website?: string | null;
    rating?: number;
    userRatingsTotal?: number;
  };
  locationIntel?: {
    peakSunHours?: number | null;
    utilityRate?: number | null;
    weatherRisk?: 'Low' | 'Med' | 'High' | string | null;
    solarGrade?: string | null;
    riskDrivers?: string[];
  };
  // room for quote calc proof later
  outputs?: Record<string, any>;
  assumptions?: Array<{ label: string; value: string }>;
  sources?: Array<{ label: string; url?: string; note?: string }>;
};

export default function WizardV7() {
  const {
    // Step control
    currentStep,
    goToStep,
    goBack,
    goNext,
    canProceed,
    
    // Core state
    location,
    setLocation,
    industry,
    setIndustry,
    selectedGoals,
    toggleGoal,
    answers,
    setAnswers,
    updateAnswer,
    
    // Calculations
    livePreview,
    assessment,
    locationIntel,

    // ‚úÖ Pricing freeze (session deterministic)
    pricingConfig,
    pricingStatus,
    
    // Actions
    generateQuote,
    exportQuote,

    // TrueQuote (hook helpers)
    getTrueQuoteProofPayload,
  } = useWizardV7();

  /**
   * Global TrueQuote modal (single modal; mode switches content)
   * Triggered by window events so we don't have to thread props through every step.
   *
   * Dispatch from anywhere:
   *   window.dispatchEvent(new CustomEvent('truequote:open', { detail: { mode:'about' } }))
   *   window.dispatchEvent(new CustomEvent('truequote:open', { detail: { mode:'proof', payload:{...} } }))
   */
  const [trueQuoteOpen, setTrueQuoteOpen] = useState(false);
  const [trueQuoteMode, setTrueQuoteMode] = useState<TrueQuoteModalMode>('about');
  const [trueQuotePayload, setTrueQuotePayload] = useState<TrueQuoteProofPayload | undefined>(undefined);

  const canonicalProofPayload = useMemo(() => {
    // Recompute when pricing transitions to ready/fallback so proof reflects frozen pricing
    return getTrueQuoteProofPayload();
  }, [getTrueQuoteProofPayload, pricingStatus, pricingConfig]);

  useEffect(() => {
    const onOpen = (e: Event) => {
      const detail = (e as CustomEvent).detail || {};
      const mode: TrueQuoteModalMode = detail.mode === 'proof' ? 'proof' : 'about';
      const payload: TrueQuoteProofPayload | undefined =
        detail.payload || (mode === 'proof' ? canonicalProofPayload : undefined);

      setTrueQuoteMode(mode);
      setTrueQuotePayload(payload);
      setTrueQuoteOpen(true);
    };

    const onClose = () => {
      setTrueQuoteOpen(false);
    };

    window.addEventListener('truequote:open', onOpen as EventListener);
    window.addEventListener('truequote:close', onClose as EventListener);

    return () => {
      window.removeEventListener('truequote:open', onOpen as EventListener);
      window.removeEventListener('truequote:close', onClose as EventListener);
    };
  }, [canonicalProofPayload]);

  return (
    <div 
      className="h-screen flex flex-col overflow-hidden"
      style={{
        background: 'linear-gradient(135deg, #070a11 0%, #0c1019 100%)',
        color: '#fff',
        fontFamily: "'Inter', system-ui, sans-serif",
      }}
    >
      {/* Dark Gradient Background with Centered Card */}
      <div className="flex-1 flex items-center justify-center p-8 relative overflow-hidden">
        {/* Animated background gradient */}
        <div className="absolute inset-0 bg-gradient-to-br from-purple-900/10 via-slate-900 to-blue-900/10" />
        <div className="absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(120,40,200,0.1),transparent_50%)]" />
        <div className="absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(40,80,200,0.08),transparent_50%)]" />

        {/* Centered Glowing Card */}
        <div className="relative w-full max-w-7xl h-[85vh] bg-gradient-to-br from-slate-900/95 to-slate-950/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-purple-500/20 overflow-hidden">
          {/* Card glow effect */}
          <div className="absolute -inset-1 bg-gradient-to-r from-purple-600/20 via-blue-600/20 to-purple-600/20 blur-2xl opacity-50" />

          {/* Card content */}
          <div className="relative h-full flex flex-col">
            {/* Scrollable step content */}
            <div className="flex-1 overflow-y-auto">
              {/* Step 3 needs full height without padding wrapper */}
              {currentStep === 3 ? (
                <Step3DetailsV7
                  industry={industry}
                  location={location}
                  locationIntel={locationIntel}
                  answers={answers}
                  setAnswers={setAnswers}
                  onComplete={goNext}
                  onBack={goBack}
                  // ‚úÖ Pricing freeze props
                  pricingConfig={pricingConfig}
                  pricingStatus={pricingStatus}
                />
              ) : (
                <div className="p-8">
                  {currentStep === 1 && (
                    <Step1LocationV7
                      location={location}
                      setLocation={setLocation}
                      industry={industry}
                      setIndustry={setIndustry}
                      locationIntel={locationIntel}
                    />
                  )}

                  {currentStep === 2 && (
                    <Step2Goals
                      location={location}
                      selectedGoals={selectedGoals}
                      toggleGoal={toggleGoal}
                      assessment={assessment}
                    />
                  )}

                  {currentStep > 3 && (
                    <div className="h-full flex items-center justify-center">
                      <div className="text-center">
                        <div className="text-6xl mb-4">üöß</div>
                        <div className="text-2xl font-bold mb-2">Step {currentStep} Coming Soon</div>
                        <p className="text-slate-400">Details ‚Üí Options ‚Üí System ‚Üí Quote</p>
                      </div>
                    </div>
                  )}
                </div>
              )}
            </div>

            {/* ‚úÖ Footer row (no wrapper ‚Äî BottomNavigation owns its border/bg) */}
            <BottomNavigation
              currentStep={currentStep}
              goBack={goBack}
              goNext={goNext}
              canProceed={canProceed}
            />
          </div>
        </div>
      </div>

      {/* ‚úÖ Global TrueQuote Modal (single instance) */}
      <TrueQuoteModal
        isOpen={trueQuoteOpen}

=== STEP 3 IMPORT GRAPH (Step3Integration) ===
Step3Integration file: src/services/calculators/hotelIntegration.ts
/**
 * HOTEL 16Q INTEGRATION LAYER
 * 
 * Connects wizard answers ‚Üí calculator service ‚Üí wizard display
 * Handles field name mapping and validation
 */

import { calculateHotel16Q, type Hotel16QInput, type Hotel16QResult } from './hotel16QCalculator';

/**
 * Map wizard answers to typed calculator input
 */
export function mapHotelAnswers(answers: Record<string, unknown>): Hotel16QInput {
  // Helper to get field with both naming conventions
  const get = (camelCase: string, snake_case: string): string => {
    return (answers[camelCase] || answers[snake_case] || '') as string;
  };
  
  // Helper to parse array values (handles JSON strings or arrays)
  const parseArray = (value: unknown): string[] => {
    if (Array.isArray(value)) return value;
    if (typeof value === 'string') {
      try {
        const parsed = JSON.parse(value);
        return Array.isArray(parsed) ? parsed : [];
      } catch {
        return [];
      }
    }
    return [];
  };
  
  return {
    // Topology
    hotelClass: get('hotelClass', 'hotel_class') as any || 'midscale',
    roomCount: get('roomCount', 'room_count') || '100-150',
    
    // Infrastructure
    electricalServiceSize: get('electricalServiceSize', 'electrical_service_size') as any || '800',
    voltageLevel: get('voltageLevel', 'voltage_level') as any || '277_480',
    
    // Equipment
    majorAmenities: parseArray(get('majorAmenities', 'major_amenities')) as string[],
    hvacSystem: get('hvacSystem', 'hvac_system') as any || 'central_ac',
    waterHeating: get('waterHeating', 'water_heating') as any || 'electric_tank',
    
    // Operations
    averageOccupancy: get('averageOccupancy', 'average_occupancy') as any || '70-85%',
    peakSeasonMonths: get('peakSeasonMonths', 'peak_season_months') || '5-6',
    operatingHours: get('operatingHours', 'operating_hours') as any || 'full_service_24hr',
    peakCheckInTime: get('peakCheckInTime', 'peak_check_in_time') as any || 'afternoon',
    
    // Financial
    monthlyElectricitySpend: get('monthlyElectricitySpend', 'monthly_electricity_spend') || '15000-30000',
    utilityRateStructure: get('utilityRateStructure', 'utility_rate_structure') as any || 'demand',
    
    // Resilience
    backupPowerNeeds: parseArray(get('backupPowerNeeds', 'backup_power_needs')) as string[],
    outageSensitivity: get('outageSensitivity', 'outage_sensitivity') as any || 'high',
    
    // Planning
    expansionPlans: parseArray(get('expansionPlans', 'expansion_plans')) as string[],
  };
}

/**
 * Main integration function - called by Step3Integration.tsx
 */
export function calculateHotelFromAnswers(answers: Record<string, unknown>): Hotel16QResult | null {
  try {
    const input = mapHotelAnswers(answers);
    const result = calculateHotel16Q(input);
    
    console.log('üè® Hotel 16Q Calculator Result:', {
      peakKW: result.peakKW,
      bessKWh: result.bessKWh,
      bessMW: result.bessMW,
      confidence: result.confidence,
      annualSavings: result.estimatedSavings.annualSavings,
    });
    
    return result;
  } catch (error) {
    console.error('‚ùå Error calculating hotel metrics:', error);
    return null;
  }
}

/**
 * Validate that required fields are present
 */
export function validateHotelAnswers(answers: Record<string, unknown>): {
  valid: boolean;
  missingFields: string[];
} {
  const requiredFields = [
    'hotelClass',
    'roomCount',
    'electricalServiceSize',
    'voltageLevel',
    'majorAmenities',
    'hvacSystem',
    'waterHeating',
    'averageOccupancy',
    'monthlyElectricitySpend',
    'utilityRateStructure',
    'backupPowerNeeds',
    'outageSensitivity',
  ];
  
  const missingFields: string[] = [];
  
  for (const field of requiredFields) {
    const snake_case = field.replace(/([A-Z])/g, '_$1').toLowerCase();
    if (!answers[field] && !answers[snake_case]) {
      missingFields.push(field);
    }
  }
  
  return {
    valid: missingFields.length === 0,
    missingFields,
  };
}

/**
 * Get completion percentage for progress UI
 */
export function getHotelCompletionPct(answers: Record<string, unknown>): number {
  const validation = validateHotelAnswers(answers);
  const totalFields = 12; // Required fields
  const completedFields = totalFields - validation.missingFields.length;
  return Math.round((completedFields / totalFields) * 100);
}

=== SUPABASE TOUCHPOINTS (Step 3 + calculators) ===
src/services/brandPresetService.ts:11:import { supabase } from "./supabaseClient";
src/services/brandPresetService.ts:27:    const { data, error } = await supabase
src/services/brandPresetService.ts:50:    const { data: useCase, error: useCaseError } = await supabase
src/services/brandPresetService.ts:61:    const { data: brands, error: brandsError } = await supabase
src/services/brandPresetService.ts:104:    const { data: useCase, error: useCaseError } = await supabase
src/services/brandPresetService.ts:115:    const { data: brand, error: brandError } = await supabase
src/services/priceAlertService.ts:18:import { supabase } from "./supabase";
src/services/priceAlertService.ts:515:    const { data, error } = await supabase
src/services/priceAlertService.ts:567:    let query = supabase
src/services/priceAlertService.ts:625:    const { data, error } = await supabase
src/services/depreciationService.ts:11:import { supabase } from "./supabaseClient";
src/services/depreciationService.ts:111:    const { data, error } = await supabase
src/services/depreciationService.ts:140:    const { data, error } = await supabase
src/services/templateMigrationService.ts:21:import { supabase } from "./supabaseClient";
src/services/templateMigrationService.ts:64:      const { data: existing } = await supabase
src/services/templateMigrationService.ts:79:      const { data: templateData, error: templateError } = await supabase
src/services/templateMigrationService.ts:143:        const { data: equipmentData, error: equipmentError } = await supabase
src/services/templateMigrationService.ts:196:    const { error: templateError } = await supabase
src/services/templateMigrationService.ts:202:    const { error: equipmentError } = await supabase
src/services/templateMigrationService.ts:273:    const { data: templates, error: templateError } = await supabase
src/services/templateMigrationService.ts:298:      const { data: equipment, error: eqError } = await supabase
src/services/templateMigrationService.ts:350:    const { data: templates, error: fetchError } = await supabase
src/services/templateMigrationService.ts:365:    const { error: deleteError } = await supabase
src/services/templateMigrationService.ts:421:    const { data: templates, error: templateError } = await supabase
src/services/templateMigrationService.ts:439:        const { data: equipment } = await supabase
src/services/rssToAIDatabase.ts:10:import { supabase } from "./supabase";
src/services/rssToAIDatabase.ts:334:  if (!supabase) {
src/services/rssToAIDatabase.ts:342:      const { error } = await supabase.from("ai_training_data").insert({
src/services/rssToAIDatabase.ts:386:  if (!supabase) {
src/services/rssToAIDatabase.ts:394:      const { error } = await supabase.from("ai_training_data").insert({
src/services/rssToAIDatabase.ts:431:  if (!supabase) {
src/services/rssToAIDatabase.ts:439:      const { error } = await supabase.from("ai_training_data").insert({
src/services/rssToAIDatabase.ts:577:  if (!supabase) {
src/services/rssToAIDatabase.ts:595:    const { data, error } = await supabase
src/services/specExtractionService.ts:22:import { supabase } from "./supabaseClient";
src/services/specExtractionService.ts:457:  const { data: config } = await supabase
src/services/vendorValidationService.ts:17:import { supabase, isSupabaseConfigured } from "./supabaseClient";
src/services/vendorValidationService.ts:454:    const { data: product, error } = await supabase
src/services/vendorPricingIntegrationService.ts:16:import { supabase, isSupabaseConfigured } from "./supabaseClient";
src/services/vendorPricingIntegrationService.ts:78:    const { data: vendorProducts, error: fetchError } = await supabase
src/services/vendorPricingIntegrationService.ts:123:        const { data: existing } = await supabase
src/services/vendorPricingIntegrationService.ts:134:          const { error: updateError } = await supabase
src/services/vendorPricingIntegrationService.ts:153:          const { error: insertError } = await supabase
src/services/vendorPricingIntegrationService.ts:263:    let query = supabase
src/services/vendorPricingIntegrationService.ts:348:    const { data: product, error: fetchError } = await supabase
src/services/supabaseClient.ts:1:import { createClient, SupabaseClient } from "@supabase/supabase-js";
src/services/supabaseClient.ts:5:const supabaseUrl = import.meta.env.VITE_SUPABASE_URL || "";
src/services/supabaseClient.ts:6:const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY || "";
src/services/supabaseClient.ts:8:if (!supabaseUrl || !supabaseAnonKey) {
src/services/supabaseClient.ts:14:let _supabaseInstance: SupabaseClient<Database> | null = null;
src/services/supabaseClient.ts:16:export const supabase = (() => {
src/services/supabaseClient.ts:17:  if (!_supabaseInstance) {
src/services/supabaseClient.ts:18:    _supabaseInstance = createClient<Database>(supabaseUrl, supabaseAnonKey, {
src/services/supabaseClient.ts:27:  return _supabaseInstance;
src/services/supabaseClient.ts:215:    const { data, error } = await supabase
src/services/supabaseClient.ts:236:    const { data, error } = await supabase
src/services/supabaseClient.ts:258:    const { data, error } = await supabase
src/services/supabaseClient.ts:284:    const { data, error } = await supabase
src/services/supabaseClient.ts:304:    let query = supabase
src/services/supabaseClient.ts:329:    const { data, error } = await supabase
src/services/supabaseClient.ts:345:    const { data, error } = await supabase
src/services/supabaseClient.ts:363:    const { data, error } = await supabase.from("pricing_alerts").insert(alert).select().single();
src/services/supabaseClient.ts:375:    const { data, error } = await supabase.rpc("calculate_bess_pricing", {
src/services/supabaseClient.ts:390:    const { data, error } = await supabase
src/services/supabaseClient.ts:406:    const { error } = await supabase.from("system_configuration").upsert({
src/services/supabaseClient.ts:544:  return Boolean(supabaseUrl && supabaseAnonKey);
src/services/supabaseClient.ts:547:export default supabase;
src/services/alertNotificationService.ts:19:import { supabase } from "@/services/supabaseClient";
src/services/alertNotificationService.ts:337:    const { error } = await supabase.from("ssot_alerts").insert({
src/services/vendorService.ts:1:import { supabase, isSupabaseConfigured } from "./supabaseClient";
src/services/vendorService.ts:2:import type { VendorProduct, RFQ, VendorNotification } from "./supabaseClient";
src/services/vendorService.ts:34:    const { data: authData, error: authError } = await supabase.auth.signUp({
src/services/vendorService.ts:50:    const { data: vendorData, error: vendorError } = await supabase
src/services/vendorService.ts:90:    const { data: authData, error: authError } = await supabase.auth.signInWithPassword({
src/services/vendorService.ts:99:    const { data: vendorData, error: vendorError } = await supabase
src/services/vendorService.ts:110:      await supabase.auth.signOut();
src/services/vendorService.ts:115:      await supabase.auth.signOut();
src/services/vendorService.ts:120:    await supabase
src/services/vendorService.ts:142:  const { error } = await supabase.auth.signOut();
src/services/vendorService.ts:153:  } = await supabase.auth.getSession();
src/services/vendorService.ts:156:  const { data: vendor, error } = await supabase
src/services/vendorService.ts:196:  const { data: product, error } = await supabase
src/services/vendorService.ts:218:  const { data, error } = await supabase
src/services/vendorService.ts:235:  const { data, error } = await supabase
src/services/vendorService.ts:283:    const { data: product, error: updateError } = await supabase
src/services/vendorService.ts:361:    const { data: product, error: updateError } = await supabase
src/services/vendorService.ts:458:    const { data: rfq, error: rfqError } = await supabase
src/services/vendorService.ts:522:    const { data: vendors, error } = await supabase
src/services/vendorService.ts:548:    await supabase.from("vendor_notifications").insert(notifications);
src/services/vendorService.ts:589:    await supabase.from("email_queue").insert(emailJobs);
src/services/vendorService.ts:602:  const { data, error } = await supabase
src/services/vendorService.ts:617:  const { data, error } = await supabase.from("rfqs").select("*").eq("id", rfqId).single();
src/services/vendorService.ts:646:  const { data: response, error } = await supabase
src/services/vendorService.ts:660:  await supabase.rpc("increment_rfq_responses", { rfq_id: data.rfq_id });
src/services/vendorService.ts:672:  const { data, error } = await supabase
src/services/vendorService.ts:704:  let query = supabase.from("vendor_notifications").select("*").eq("vendor_id", vendor.id);
src/services/vendorService.ts:720:  const { error } = await supabase
src/services/vendorService.ts:738:  const { error } = await supabase
src/services/vendorService.ts:762:  const { data: products } = await supabase
src/services/vendorService.ts:771:  const { data: responses } = await supabase
src/services/vendorService.ts:780:  const { count: openRFQsCount } = await supabase
src/services/vendorService.ts:787:  const { count: unreadNotifications } = await supabase
src/services/vendorService.ts:814:  const { data, error } = await supabase.storage.from("vendor-datasheets").upload(fileName, file, {
src/services/vendorService.ts:824:  } = supabase.storage.from("vendor-datasheets").getPublicUrl(fileName);
src/services/vendorService.ts:842:    const { data: vendor } = await supabase
src/services/vendorService.ts:856:    const { error } = await supabase.from("email_queue").insert({
src/services/vendorService.ts:897:    const { data: vendor } = await supabase
src/services/vendorService.ts:911:    const { error } = await supabase.from("email_queue").insert({
src/services/isoMarketService.ts:11:import { supabase } from "./supabaseClient";
src/services/isoMarketService.ts:89:    const { data, error } = await supabase
src/services/isoMarketService.ts:119:    const { data, error } = await supabase
src/services/isoMarketService.ts:150:    const { data, error } = await supabase
src/services/intelligenceEventsService.ts:45:import { supabase } from "@/services/supabaseClient";
src/services/intelligenceEventsService.ts:106:      const { error } = await supabase.from("intelligence_events").insert({
src/services/intelligenceEventsService.ts:313:      const { data: events, error } = await supabase
src/services/intelligenceEventsService.ts:327:      await supabase
src/services/intelligenceEventsService.ts:353:      let query = supabase
src/services/calculationValidator.ts:31:import { supabase } from "@/services/supabaseClient";
src/services/calculationValidator.ts:726:      const { error } = await supabase.from("calculation_audit_log").insert(entry);
src/services/systemControlsPricingService.ts:16:import { supabase } from "./supabaseClient";
src/services/systemControlsPricingService.ts:183:      const { data, error } = await supabase
src/services/systemControlsPricingService.ts:194:        const { data: legacyData, error: legacyError } = await supabase
src/services/systemControlsPricingService.ts:917:      const { error } = await supabase.from("pricing_configurations").upsert(
src/services/pricingConfigService.ts:11:import { supabase } from "./supabaseClient";
src/services/pricingConfigService.ts:381:      let { data, error } = await supabase
src/services/pricingConfigService.ts:391:        const legacyQuery = await supabase
src/services/pricingConfigService.ts:459:      await supabase
src/services/pricingConfigService.ts:465:      const { data: existing } = await supabase
src/services/pricingConfigService.ts:496:        const { error: updateError } = await supabase
src/services/pricingConfigService.ts:503:        const { error: insertError } = await supabase
src/pages/MetaCalculationsPage.tsx:19:import { supabase } from '@/services/supabaseClient';
src/pages/MetaCalculationsPage.tsx:168:      const { data, error } = await supabase.from('market_pricing').select('*').order('category');
src/pages/MetaCalculationsPage.tsx:190:      const { data, error } = await supabase.from('industry_configs').select('*').order('name');
src/pages/MetaCalculationsPage.tsx:285:      const { error } = await supabase
src/services/systemHealthCheck.ts:21:import { supabase } from "./supabaseClient";
src/services/systemHealthCheck.ts:160:    const { data: sources, error: sourcesError } = await supabase
src/services/systemHealthCheck.ts:190:    const { data: recentJobs, error: jobsError } = await supabase
src/services/systemHealthCheck.ts:268:    const { data: articles, error } = await supabase
src/services/systemHealthCheck.ts:384:      const { error } = await supabase.from(table).select("*").limit(1);
src/services/systemHealthCheck.ts:700:    const { data: useCases, error } = await supabase
src/services/systemHealthCheck.ts:781:    const { data: questions, error: questionsError } = await supabase
src/services/systemHealthCheck.ts:941:    const { data: calibration, error } = await supabase
src/services/systemHealthCheck.ts:962:    const { data: lastValidation } = await supabase
src/services/uiConfigService.ts:15:import { supabase } from "./supabaseClient";
src/services/uiConfigService.ts:178:    const { data, error } = await supabase
src/services/intelligence/valueTeaserService.ts:6:import { supabase } from "@/services/supabaseClient";
src/services/intelligence/valueTeaserService.ts:27:    const { data, error } = await supabase
src/services/supabase.ts:6:import { createClient } from "@supabase/supabase-js";
src/services/supabase.ts:9:const supabaseUrl = import.meta.env.VITE_SUPABASE_URL || "https://your-project.supabase.co";
src/services/supabase.ts:10:const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY || "your-anon-key";
src/services/supabase.ts:12:export const supabase = createClient(supabaseUrl, supabaseAnonKey);
src/services/intelligence/industryInference.ts:6:import { supabase } from "@/services/supabaseClient";
src/services/intelligence/industryInference.ts:36:    const { data, error } = await supabase
src/services/intelligence/industryInference.ts:117:    const { data: useCase } = await supabase
src/services/subIndustryService.ts:15:import { supabase } from './supabaseClient';
src/services/subIndustryService.ts:103:  const { data, error } = await supabase
src/services/subIndustryService.ts:141:  const { data, error } = await supabase
src/services/subIndustryService.ts:179:  const { data, error } = await supabase
src/services/intelligence/goalSuggestion.ts:6:import { supabase } from "@/services/supabaseClient";
src/services/intelligence/goalSuggestion.ts:27:    let query = supabase
src/services/vendorDataToMLService.ts:16:import { supabase, isSupabaseConfigured } from "./supabaseClient";
src/services/vendorDataToMLService.ts:56:    const { data: product, error: fetchError } = await supabase
src/services/vendorDataToMLService.ts:106:    const { data: existing } = await supabase
src/services/vendorDataToMLService.ts:145:      const { error: updateError } = await supabase
src/services/vendorDataToMLService.ts:162:      const { error: insertError } = await supabase.from("ai_training_data").insert(mlTrainingData);
src/services/vendorDataToMLService.ts:252:    const { data: products, error: fetchError } = await supabase
src/services/intelligence/weatherImpact.ts:6:import { supabase } from "@/services/supabaseClient";
src/services/intelligence/weatherImpact.ts:27:    const { data, error } = await supabase
src/services/calculationConstantsService.ts:26:import { supabase } from "./supabaseClient";
src/services/calculationConstantsService.ts:115:    const { data, error } = await supabase
src/services/calculationConstantsService.ts:380:    const { error } = await supabase
src/services/pricingTierService.ts:23:import { supabase } from "./supabaseClient";
src/services/pricingTierService.ts:83:      const { data: funcData, error: funcError } = await supabase.rpc("get_pricing_tier", {
src/services/pricingTierService.ts:107:      const { data: funcData, error: funcError } = await supabase.rpc("get_pricing_tier", {
src/services/pricingTierService.ts:133:    let query = supabase
src/services/pricingTierService.ts:212:    const { data, error } = await supabase
src/services/pricingTierService.ts:239:    const { data, error } = await supabase
src/services/bufferService.ts:333:    import { supabase } from '@/services/supabaseClient';
src/services/bufferService.ts:335:    const { error } = await supabase
src/services/bufferService.ts:364:    import { supabase } from '@/services/supabaseClient';
src/services/bufferService.ts:367:    const { error } = await supabase
src/services/stateSolarService.ts:8:import { supabase } from './supabaseClient';
src/services/stateSolarService.ts:32:    const { data, error } = await supabase
src/services/databaseHealthCheck.ts:7:import { supabase } from './supabaseClient';
src/services/databaseHealthCheck.ts:33:    const { data: constants, error: constError } = await supabase
src/services/databaseHealthCheck.ts:44:    const { data: industries, error: indError } = await supabase
src/services/databaseHealthCheck.ts:54:    const { data: pricing, error: priceError } = await supabase
src/services/databaseHealthCheck.ts:74:  const { data, error } = await supabase
src/services/industryPowerProfilesService.ts:13:import { supabase } from "./supabaseClient";
src/services/industryPowerProfilesService.ts:142:    const { data, error } = await supabase.from("industry_power_profiles").select("*");
src/services/unifiedPricingService.ts:30:import { supabase } from "./supabaseClient";
src/services/unifiedPricingService.ts:275:    const { data, error } = await supabase
src/services/unifiedPricingService.ts:390:    const { data, error } = await supabase
src/services/unifiedPricingService.ts:431:    const { data: configData, error: configError } = await supabase
src/services/unifiedPricingService.ts:474:    const { data, error } = await supabase
src/services/unifiedPricingService.ts:518:    const { data, error } = await supabase
src/services/unifiedPricingService.ts:549:    const { data, error } = await supabase
src/services/unifiedPricingService.ts:581:    const { data, error } = await supabase
src/services/equipmentPricingTiersService.ts:18:import { supabase } from '@/services/supabaseClient';
src/services/equipmentPricingTiersService.ts:145:    const { data: typeMarkup, error: typeError } = await supabase
src/services/equipmentPricingTiersService.ts:159:    const { data: globalMarkup } = await supabase
src/services/equipmentPricingTiersService.ts:193:    const { error } = await supabase
src/services/equipmentPricingTiersService.ts:227:    const { data, error } = await supabase
src/services/equipmentPricingTiersService.ts:383:    let query = supabase
src/services/equipmentPricingTiersService.ts:409:    let dbQuery = supabase
src/services/equipmentPricingTiersService.ts:535:    const { data, error } = await supabase
src/services/equipmentPricingTiersService.ts:569:    const { error } = await supabase
src/services/equipmentPricingTiersService.ts:589:    const { data, error } = await supabase
src/services/equipmentPricingTiersService.ts:608:    const { error } = await supabase
src/services/equipmentPricingTiersService.ts:660:    const { data: marketPrices, error: marketError } = await supabase
src/services/equipmentPricingTiersService.ts:767:    const { data: marketPrices, error: marketError } = await supabase
src/services/equipmentPricingTiersService.ts:789:    const { error: updateError } = await supabase
src/services/marketDataIntegrationService.ts:22:import { supabase } from "./supabaseClient";
src/services/marketDataIntegrationService.ts:102:    const { data, error } = await supabase
src/services/marketDataIntegrationService.ts:164:    const { data, error } = await supabase
src/services/marketDataIntegrationService.ts:282:    const { error } = await supabase.from("market_pricing_data").insert({
src/services/marketDataIntegrationService.ts:318:    await supabase
src/services/marketDataIntegrationService.ts:324:          status === "failed" ? supabase.rpc("increment_error_count", { source_id: sourceId }) : 0,
src/services/marketDataIntegrationService.ts:326:          ? supabase.rpc("add_data_points", { source_id: sourceId, count: dataPointCount })
src/services/marketDataIntegrationService.ts:416:    const { data, error } = await supabase
src/services/marketDataIntegrationService.ts:466:    const { error } = await supabase.from("market_data_sources").update(updateData).eq("id", id);
src/services/marketDataIntegrationService.ts:488:    const { error } = await supabase.from("market_data_sources").delete().eq("id", id);
src/services/marketDataIntegrationService.ts:545:    let query = supabase
src/services/marketDataIntegrationService.ts:617:    const { data, error } = await supabase.rpc("calculate_weighted_price", {
src/services/marketDataIntegrationService.ts:669:    const { error } = await supabase.from("collected_market_prices").insert({
src/services/marketDataIntegrationService.ts:729:    let query = supabase
src/services/marketDataIntegrationService.ts:782:    const { error } = await supabase
src/services/dataIntegrationService.ts:26:import { supabase } from "./supabaseClient";
src/services/dataIntegrationService.ts:127:    const { data: templateData, error: templateError } = await supabase
src/services/dataIntegrationService.ts:144:    const { data: equipmentData, error: equipmentError } = await supabase
src/services/dataIntegrationService.ts:310:    const { data, error } = await supabase
src/services/dataIntegrationService.ts:336:    await supabase.from("calculation_cache").upsert({
src/services/dataIntegrationService.ts:360:    const { data, error } = await supabase
src/services/dataIntegrationService.ts:387:    const { data, error } = await supabase
src/services/dataIntegrationService.ts:533:    await supabase.rpc("increment_template_usage", {
src/services/dataIntegrationService.ts:547:    const { data, error } = await supabase
src/services/marketDataScraper.ts:18:import { supabase } from "./supabaseClient";
src/services/marketDataScraper.ts:1013:    const { data: existing } = await supabase
src/services/marketDataScraper.ts:1025:    const { error } = await supabase.from("scraped_articles").insert({
src/services/marketDataScraper.ts:1051:        await supabase.from("collected_market_prices").insert({
src/services/marketDataScraper.ts:1080:  await supabase
src/services/marketDataScraper.ts:1089:      consecutive_failures: status === "failed" ? supabase.rpc("increment_failures") : 0,
src/services/marketDataScraper.ts:1094:  await supabase
src/services/marketDataScraper.ts:1107:  const { data, error } = await supabase
src/services/marketDataScraper.ts:1140:  const { data: sources, error } = await supabase
src/services/stateIncentivesService.ts:11:import { supabase } from "./supabaseClient";
src/services/stateIncentivesService.ts:1011:    const { data, error } = await supabase
src/services/mlProcessingService.ts:12:import { supabase } from "./supabaseClient";
src/services/mlProcessingService.ts:96:    const { data: pricingData, error } = await supabase
src/services/mlProcessingService.ts:219:    const { data: trendData, error } = await supabase
src/services/mlProcessingService.ts:324:      await supabase.from("ml_price_trends").upsert(
src/services/mlProcessingService.ts:343:      await supabase.from("ml_market_insights").insert({
src/services/mlProcessingService.ts:355:    await supabase
src/services/mlProcessingService.ts:382:    const { count } = await supabase
src/services/mlProcessingService.ts:422:    await supabase.from("ml_processing_log").insert({
src/services/mlProcessingService.ts:446:    await supabase.from("ml_processing_log").insert({
src/services/mlProcessingService.ts:471:      supabase.from("ml_price_trends").select("*").order("updated_at", { ascending: false }),
src/services/mlProcessingService.ts:472:      supabase
src/services/mlProcessingService.ts:477:      supabase
src/services/useCaseService.ts:7:import { supabase } from "./supabaseClient";
src/services/useCaseService.ts:81:      let query = supabase
src/services/useCaseService.ts:118:      const { data, error } = await supabase
src/services/useCaseService.ts:143:      const { data, error } = await supabase
src/services/useCaseService.ts:169:      const { data: useCase, error: useCaseError } = await supabase
src/services/useCaseService.ts:178:        const { data: inactiveCheck } = await supabase
src/services/useCaseService.ts:255:      const query = supabase.from("use_cases").select("*").order("name");
src/services/useCaseService.ts:294:      const { data, error } = await supabase
src/services/useCaseService.ts:314:      const { data: config, error: configError } = await supabase
src/services/useCaseService.ts:345:      const { data, error } = await supabase
src/services/useCaseService.ts:371:      const { data, error } = await supabase
src/services/useCaseService.ts:395:      const { data, error } = await supabase
src/services/useCaseService.ts:415:      const { data, error } = await supabase
src/services/useCaseService.ts:448:      const { data, error } = await supabase
src/services/useCaseService.ts:566:      const { data, error } = await supabase
src/services/useCaseService.ts:590:      let query = supabase
src/services/useCaseService.ts:621:      const { data, error } = await supabase
src/services/useCaseService.ts:785:      const { error } = await supabase.from("use_case_analytics").insert([
src/services/useCaseService.ts:816:      let query = supabase
src/services/useCaseService.ts:860:      const { data, error } = await supabase
src/services/useCaseService.ts:890:      const { data, error } = await supabase
src/services/useCaseService.ts:909:      const { data, error } = await supabase
src/services/useCaseService.ts:931:      const { data, error } = await supabase
src/services/useCaseService.ts:964:        supabase.from("use_cases").select("id, usage_count, average_roi, name", { count: "exact" }),
src/services/useCaseService.ts:965:        supabase.from("use_case_configurations").select("id", { count: "exact" }),
src/services/useCaseService.ts:966:        supabase.from("equipment_templates").select("id", { count: "exact" }),
src/services/useCaseService.ts:1008:      const { data, error } = await supabase
src/services/useCaseService.ts:1032:      const { data, error } = await supabase
src/services/useCaseService.ts:1052:      const { data, error } = await supabase
src/services/useCaseService.ts:1076:      let query = supabase.from("calculation_formulas").select("*").eq("is_active", true);
src/services/useCaseService.ts:1097:      const { data, error } = await supabase
src/services/useCaseService.ts:1123:      const { error } = await supabase
src/services/useCaseService.ts:1156:      const { error } = await supabase
src/services/useCaseService.ts:1190:      const { data: config, error: fetchError } = await supabase
src/services/useCaseService.ts:1199:      const { data: useCase, error: useCaseError } = await supabase
src/services/useCaseService.ts:1208:      const { error } = await supabase
src/services/marketInferenceEngine.ts:17:import { supabase } from "./supabaseClient";
src/services/marketInferenceEngine.ts:131:    const { data, error } = await supabase
src/services/marketInferenceEngine.ts:152:      const { data, error } = await supabase
src/services/marketInferenceEngine.ts:174:      const { data, error } = await supabase
src/services/marketInferenceEngine.ts:194:    const { data, error } = await supabase
src/services/marketInferenceEngine.ts:930:  const { error } = await supabase.from("market_inferences").upsert(
src/services/marketInferenceEngine.ts:966:  const { error } = await supabase.from("ml_training_data").insert({
src/services/aiDataCollectionService.ts:14:import { supabase } from "./supabase";
src/services/aiDataCollectionService.ts:139:    const { error } = await supabase
src/services/aiDataCollectionService.ts:206:    const { error } = await supabase
src/services/aiDataCollectionService.ts:267:    const { error } = await supabase
src/services/aiDataCollectionService.ts:333:    const { error } = await supabase
src/services/aiDataCollectionService.ts:403:    const { error } = await supabase
src/services/aiDataCollectionService.ts:458:    await supabase.from("data_collection_log").insert({
src/services/aiDataCollectionService.ts:468:    await supabase.from("data_collection_log").insert({
src/services/aiDataCollectionService.ts:510:    supabase.from("battery_pricing").select("*").order("date", { ascending: false }).limit(10),
src/services/aiDataCollectionService.ts:511:    supabase.from("product_catalog").select("*").eq("availability", "in-stock"),
src/services/aiDataCollectionService.ts:512:    supabase.from("financing_options").select("*").order("lastUpdated", { ascending: false }),
src/services/aiDataCollectionService.ts:513:    supabase.from("industry_news").select("*").order("publishDate", { ascending: false }).limit(20),
src/services/aiDataCollectionService.ts:514:    supabase.from("incentive_programs").select("*").eq("status", "active"),
src/services/centralizedCalculations.ts:30:import { supabase } from "./supabaseClient";
src/services/centralizedCalculations.ts:234:    const { data: formulas, error } = await supabase
src/services/smbPlatformService.ts:25:import { supabase } from "./supabaseClient";
src/services/smbPlatformService.ts:186:    const { data, error } = await supabase
src/services/smbPlatformService.ts:274:    const { data, error } = await supabase
src/services/smbPlatformService.ts:336:    const { data, error } = await supabase
src/services/smbPlatformService.ts:488:    const { data, error } = await supabase
src/services/smbPlatformService.ts:532:    const { data: existing } = await supabase
src/services/smbPlatformService.ts:547:    const { data: created, error } = await supabase
src/services/smbPlatformService.ts:576:    const { error } = await supabase
src/types/database.types.ts:10:  // Allows to automatically instantiate createClient with right options
src/types/database.types.ts:11:  // instead of createClient<Database, { PostgrestVersion: 'XX' }>(URL, KEY)
src/utils/testDatabaseConnection.ts:1:import { supabase } from "../services/supabaseClient";
src/utils/testDatabaseConnection.ts:7:  const { data: formulas, error: formulaError } = await supabase
src/utils/testDatabaseConnection.ts:22:  const { data: useCases, error: useCaseError } = await supabase
src/tests/wizardDataFlowVerification.ts:9:import { createClient } from "@supabase/supabase-js";
src/tests/wizardDataFlowVerification.ts:11:const supabase = createClient(
src/tests/wizardDataFlowVerification.ts:12:  "https://fvmpmozybmtzjvikrctq.supabase.co",
src/tests/wizardDataFlowVerification.ts:75:    const { data: useCase, error: ucError } = await supabase
src/tests/wizardDataFlowVerification.ts:87:    const { data: questions, error: qError } = await supabase
src/components/ProjectInfoForm.tsx:3:import { supabase } from "../services/supabaseClient";
src/components/ProjectInfoForm.tsx:44:      } = await supabase.auth.getUser();
src/components/ProjectInfoForm.tsx:47:        const { data: profile } = await supabase
src/components/ProjectInfoForm.tsx:104:      } = await supabase.auth.getUser();
src/components/ProjectInfoForm.tsx:113:        await supabase
src/components/ProjectInfoForm.tsx:124:        const { data: authData, error: signUpError } = await supabase.auth.signUp({
src/components/ProjectInfoForm.tsx:142:            const { data: existingUser } = await supabase
src/components/ProjectInfoForm.tsx:160:          await supabase.from("users").upsert(
src/components/verticals/CarWashEnergy.tsx:24:import { supabase } from '@/services/supabaseClient';
src/components/verticals/CarWashEnergy.tsx:383:      const { error } = await supabase
src/tests/quote-flow-e2e.test.ts:13:vi.mock("@/lib/supabaseClient", () => ({
src/tests/quote-flow-e2e.test.ts:14:  supabase: {
src/components/smb/SMBWizard.tsx:28:import { supabase } from '@/services/supabaseClient';
src/components/smb/SMBWizard.tsx:142:        const { data: siteData } = await supabase
src/infrastructure/repositories/pricingRepository.ts:13:import { supabase } from '@/services/supabaseClient';
src/infrastructure/repositories/pricingRepository.ts:40:    let query = supabase
src/infrastructure/repositories/pricingRepository.ts:68:    let query = supabase
src/infrastructure/repositories/pricingRepository.ts:92:    let query = supabase
src/infrastructure/repositories/pricingRepository.ts:116:    let query = supabase
src/infrastructure/repositories/pricingRepository.ts:140:    let query = supabase
src/infrastructure/repositories/pricingRepository.ts:165:    let query = supabase
src/infrastructure/repositories/pricingRepository.ts:187:    const { data, error } = await supabase
src/infrastructure/repositories/pricingRepository.ts:201:    const { data, error } = await supabase
src/infrastructure/repositories/equipmentRepository.ts:12:import { supabase } from '@/services/supabaseClient';
src/infrastructure/repositories/equipmentRepository.ts:28:    const { data, error } = await supabase
src/infrastructure/repositories/equipmentRepository.ts:47:    const { data, error } = await supabase
src/infrastructure/repositories/equipmentRepository.ts:67:    const { data, error } = await supabase
src/infrastructure/repositories/equipmentRepository.ts:88:    const { data, error } = await supabase
src/infrastructure/repositories/equipmentRepository.ts:107:    let query = supabase
src/infrastructure/repositories/equipmentRepository.ts:130:    const { data, error } = await supabase
src/infrastructure/repositories/equipmentRepository.ts:154:    const { data, error } = await supabase
src/components/verticals/EVChargingEnergy.tsx:24:import { supabase } from '@/services/supabaseClient';
src/components/verticals/EVChargingEnergy.tsx:344:      await supabase.from('leads').insert([{
src/infrastructure/repositories/useCaseRepository.ts:13:import { supabase } from '@/services/supabaseClient';
src/infrastructure/repositories/useCaseRepository.ts:35:    let query = supabase
src/infrastructure/repositories/useCaseRepository.ts:66:    const { data, error } = await supabase
src/infrastructure/repositories/useCaseRepository.ts:85:    const { data, error } = await supabase
src/infrastructure/repositories/useCaseRepository.ts:129:    const { data, error } = await supabase
src/infrastructure/repositories/useCaseRepository.ts:153:    const { data, error } = await supabase
src/infrastructure/repositories/useCaseRepository.ts:171:    const { data, error } = await supabase
src/infrastructure/repositories/useCaseRepository.ts:191:    const { data, error } = await supabase
src/infrastructure/repositories/useCaseRepository.ts:209:    const { data, error } = await supabase
src/infrastructure/repositories/useCaseRepository.ts:226:    const { error } = await supabase.rpc('increment_use_case_usage', {
src/infrastructure/repositories/useCaseRepository.ts:243:    const { error } = await supabase
src/infrastructure/repositories/useCaseRepository.ts:269:      supabase.from('use_cases').select('id, usage_count, name', { count: 'exact' }),
src/infrastructure/repositories/useCaseRepository.ts:270:      supabase.from('use_case_configurations').select('id', { count: 'exact' }),
src/infrastructure/repositories/useCaseRepository.ts:271:      supabase.from('equipment_templates').select('id', { count: 'exact' })
src/components/verticals/HotelEnergy.tsx:24:import { supabase } from '@/services/supabaseClient';
src/components/verticals/HotelEnergy.tsx:791:      await supabase.from('leads').insert([{
src/components/modals/ConsultationModal.tsx:3:import { supabase } from '../../services/supabaseClient';
src/components/modals/ConsultationModal.tsx:32:      const { data, error } = await supabase
src/components/PricingAdminDashboard.tsx:14:import { supabase } from "../services/supabase";
src/components/PricingAdminDashboard.tsx:103:      const { data, error } = await supabase.from("data_collection_log").select("id").limit(1);
src/components/PricingAdminDashboard.tsx:108:        const { error: altError } = await supabase.from("use_case_templates").select("id").limit(1);
src/components/modals/DownloadGateModal.tsx:11:import { supabase } from '../../services/supabaseClient';
src/components/modals/DownloadGateModal.tsx:67:      const { data: { user: supabaseUser } } = await supabase.auth.getUser();
src/components/modals/DownloadGateModal.tsx:69:      if (localUser || supabaseUser) {
src/components/modals/DownloadGateModal.tsx:130:      const { data: authData, error: signUpError } = await supabase.auth.signUp({
src/components/modals/DownloadGateModal.tsx:164:        await supabase.from('download_leads').insert({
src/components/EnergyNewsTicker.tsx:3:import { supabase } from "../services/supabase";
src/components/EnergyNewsTicker.tsx:66:        const { data: newsData, error: newsError } = await supabase
src/components/EnergyNewsTicker.tsx:99:        const { data: pricingData, error: pricingError } = await supabase
src/services/equipmentVendorService.ts:11:import { supabase } from "./supabaseClient";
src/services/equipmentVendorService.ts:133:    let query = supabase
src/services/equipmentVendorService.ts:212:    const { data, error } = await supabase
src/services/equipmentVendorService.ts:267:    const { data, error } = await supabase
src/services/equipmentVendorService.ts:300:    const { data, error } = await supabase
src/services/equipmentVendorService.ts:324:    const { data, error } = await supabase
src/services/equipmentVendorService.ts:349:    const { data, error } = await supabase
src/components/modals/RequestQuoteModal.tsx:9:import { supabase } from '../../services/supabaseClient';
src/components/modals/RequestQuoteModal.tsx:96:      const { error: insertError } = await supabase
src/components/modals/EmailCaptureModal.tsx:8:import { supabase } from '../../services/supabaseClient';
src/components/modals/EmailCaptureModal.tsx:77:      const { data: authData, error: signUpError } = await supabase.auth.signUp({
src/components/modals/EmailCaptureModal.tsx:92:          const { data: signInData, error: signInError } = await supabase.auth.signInWithPassword({
src/components/modals/EmailCaptureModal.tsx:101:            const { data: userData, error: userError } = await supabase
src/components/modals/EmailCaptureModal.tsx:112:            await supabase
src/components/modals/EmailCaptureModal.tsx:136:      const { error: profileError } = await supabase
src/components/modals/EmailCaptureModal.tsx:154:        await supabase.from('saved_quotes').insert({
src/components/admin/PricingSystemHealthDashboard.tsx:13:import { supabase } from '@/services/supabaseClient';
src/components/admin/PricingSystemHealthDashboard.tsx:103:      const { data, error } = await supabase
src/components/admin/PricingSystemHealthDashboard.tsx:223:      const { data: logData } = await supabase
src/components/admin/PricingSystemHealthDashboard.tsx:231:      const { count: unprocessedCount } = await supabase
src/components/admin/PricingSystemHealthDashboard.tsx:238:      const { count: trendsCount } = await supabase
src/components/admin/PricingSystemHealthDashboard.tsx:243:      const { count: insightsCount } = await supabase
src/components/admin/PricingSystemHealthDashboard.tsx:275:      const { data: marketData, error } = await supabase
src/components/admin/PricingSystemHealthDashboard.tsx:283:      const { count: dataPoints } = await supabase
src/components/admin/PricingSystemHealthDashboard.tsx:366:      const { error } = await supabase
src/components/admin/PricingSystemHealthDashboard.tsx:383:      const { data, error } = await supabase
src/api/use-cases.ts:9:import { supabase } from '@/services/supabaseClient';
src/api/use-cases.ts:13:    const { data, error } = await supabase
src/components/admin/AIDataCollectionAdmin.tsx:2:import { supabase } from '../../services/supabase';
src/components/admin/AIDataCollectionAdmin.tsx:171:      const { data: logs, error: logsError } = await supabase
src/components/admin/AIDataCollectionAdmin.tsx:186:        supabase.from('battery_pricing').select('*', { count: 'exact', head: true }),
src/components/admin/AIDataCollectionAdmin.tsx:187:        supabase.from('product_catalog').select('*', { count: 'exact', head: true }),
src/components/admin/AIDataCollectionAdmin.tsx:188:        supabase.from('financing_options').select('*', { count: 'exact', head: true }),
src/components/admin/AIDataCollectionAdmin.tsx:189:        supabase.from('industry_news').select('*', { count: 'exact', head: true }),
src/components/admin/AIDataCollectionAdmin.tsx:190:        supabase.from('incentive_programs').select('*', { count: 'exact', head: true }),
src/components/admin/AIDataCollectionAdmin.tsx:191:        supabase.from('ai_training_data').select('*', { count: 'exact', head: true })
src/components/admin/CalculationAuditDashboard.tsx:17:import { supabase } from '@/services/supabaseClient';
src/components/admin/CalculationAuditDashboard.tsx:62:      const { data: summaryData, error: summaryError } = await supabase
src/components/admin/CalculationAuditDashboard.tsx:71:      const { data: anomalyData, error: anomalyError } = await supabase
src/components/admin/MarketIntelligenceDashboard.tsx:18:import { supabase } from '@/services/supabaseClient';
src/components/admin/MarketIntelligenceDashboard.tsx:40:      const { data, error: fetchError } = await supabase
src/components/admin/MarketIntelligenceDashboard.tsx:100:      const { data } = await supabase
src/components/admin/MarketIntelligenceDashboard.tsx:178:      const { error } = await supabase
src/components/admin/MarketIntelligenceDashboard.tsx:230:      const { error } = await supabase
src/components/admin/MarketIntelligenceDashboard.tsx:746:    const { error } = await supabase
src/components/admin/MarketIntelligenceDashboard.tsx:757:    const { error } = await supabase
src/components/VendorPortal.tsx:15:import type { Vendor, VendorProduct, RFQ } from "@/services/supabaseClient";
src/components/admin/PricingAdminDashboard.tsx:51:import { supabase } from '@/services/supabaseClient';
src/components/admin/PricingAdminDashboard.tsx:146:      const { data: configData, error: configError } = await supabase
src/components/admin/PricingAdminDashboard.tsx:229:      const { error: updateError } = await supabase
src/components/admin/PricingAdminDashboard.tsx:242:        await supabase.from('pricing_audit_log').insert({
src/components/AdvancedQuoteBuilder.tsx:65:import { supabase } from "../services/supabaseClient";
src/components/AdvancedQuoteBuilder.tsx:649:    } = await supabase.auth.getUser();
src/components/wizard/_archive-jan-2026/Step3HotelEnergy.tsx:7:import { supabase } from '@/services/supabaseClient';
src/components/wizard/_archive-jan-2026/Step3HotelEnergy.tsx:205:      const { data, error } = await supabase
src/components/wizard/v6/step3/Step3Container.tsx:8:import { supabase } from '@/services/supabaseClient';
src/components/wizard/v6/step3/Step3Container.tsx:95:        const { data, error: fetchError } = await supabase

=== INDUSTRY TEMPLATE / QUESTIONNAIRE REFERENCES ===
src/services/templateMigrationService.ts:131:          use_case_template_id: templateData.id,
src/services/templateMigrationService.ts:301:        .eq("use_case_template_id", dbTemplate.id);
src/services/templateMigrationService.ts:442:          .eq("use_case_template_id", dbTemplate.id);
src/services/contracts.ts:85:    useCaseData: Record<string, any>;  // All questionnaire answers
src/services/contracts.ts:140:    loadProfile: 'flat' | 'peaky' | 'seasonal';
src/services/TrueQuoteEngineV2.ts:179:      loadProfile: loadResult.loadProfile,
src/services/evChargingCalculations.ts:280:    diversityFactor: 0.55, // 55% simultaneous usage (more diverse load profile)
src/services/googlePlacesService.ts:21:  industrySlug?: string;
src/services/googlePlacesService.ts:190:              let industrySlug: string | undefined;
src/services/googlePlacesService.ts:194:                    industrySlug = PLACE_TYPE_TO_INDUSTRY[type];
src/services/googlePlacesService.ts:265:                        industrySlug: nearbyIndustrySlug || industrySlug,
src/services/googlePlacesService.ts:281:                    industrySlug,
src/services/googlePlacesService.ts:295:                  industrySlug,
src/services/googlePlacesService.ts:301:            let industrySlug: string | undefined;
src/services/googlePlacesService.ts:305:                  industrySlug = PLACE_TYPE_TO_INDUSTRY[type];
src/services/googlePlacesService.ts:325:              industrySlug,
src/ui/hooks/useQuoteBuilder.example.tsx.disabled:168:  // Render questionnaire
src/services/systemHealthCheck.ts:783:      .select("id, question_text, display_order, industry_slug")
src/services/truequote/loadCurve.ts:46: * Normalized 24-hour load profiles by industry
src/services/truequote/loadCurve.ts:168: * Get load profile for industry
src/services/intelligence/valueTeaserService.ts:30:      .eq("industry_slug", input.industrySlug)
src/services/intelligence/valueTeaserService.ts:49:        `[valueTeaserService] No benchmarks found for ${input.industrySlug} in ${input.state}`
src/services/intelligence/valueTeaserService.ts:52:      const fallback = getDefaultValueTeaser(input.industrySlug);
src/services/intelligence/valueTeaserService.ts:102:function getDefaultValueTeaser(industrySlug: string): ValueTeaserMetric[] {
src/services/intelligence/valueTeaserService.ts:168:  const defaultMetrics = defaultsByIndustry[industrySlug] || [
src/services/intelligence/valueTeaserService.ts:196:export function estimateValueTeaser(industrySlug: string): ValueTeaserMetric[] {
src/services/intelligence/valueTeaserService.ts:197:  return getDefaultValueTeaser(industrySlug);
src/services/intelligence/industryInference.ts:78:        const existing = industryScores.get(mapping.industry_slug) || { score: 0, keywords: [] };
src/services/intelligence/industryInference.ts:79:        industryScores.set(mapping.industry_slug, {
src/services/intelligence/industryInference.ts:100:    for (const [industrySlug, { score, keywords }] of industryScores.entries()) {
src/services/intelligence/industryInference.ts:103:        bestIndustry = industrySlug;
src/services/intelligence/industryInference.ts:129:        industrySlug: bestIndustry,
src/services/intelligence/industryInference.ts:150:function formatIndustryName(industrySlug: string): string {
src/services/intelligence/industryInference.ts:151:  return industrySlug
src/services/intelligence/industryInference.ts:178:        industrySlug: slug,
src/services/intelligence/goalSuggestion.ts:30:      .eq("industry_slug", input.industrySlug)
src/services/intelligence/goalSuggestion.ts:54:        `[goalSuggestion] No rules found for ${input.industrySlug} + ${input.climateRisk}`
src/services/intelligence/goalSuggestion.ts:56:      const fallback = getDefaultGoals(input.industrySlug);
src/services/intelligence/goalSuggestion.ts:108:function getDefaultGoals(industrySlug: string): GoalSuggestion[] {
src/services/intelligence/goalSuggestion.ts:122:  const defaultGoals = defaultsByIndustry[industrySlug] || [
src/services/intelligence/goalSuggestion.ts:151:export function estimateGoals(industrySlug: string): GoalSuggestion[] {
src/services/intelligence/goalSuggestion.ts:152:  return getDefaultGoals(industrySlug);
src/services/intelligence/weatherImpact.ts:32:      .or(`industry_slug.eq.${input.industrySlug},industry_slug.is.null`)
src/services/intelligence/weatherImpact.ts:33:      .order("industry_slug", { ascending: false }); // Industry-specific first (non-null)
src/services/openAIExtractionService.ts:85:  loadProfile?: {
src/services/openAIExtractionService.ts:155:  "loadProfile": {
src/services/openAIExtractionService.ts:422:    suggestions.push("Upload a utility bill or load profile for power data");
src/services/advancedBessAnalytics.ts:68:   * Group load profiles into typical day clusters
src/services/advancedBessAnalytics.ts:79:    // Simplified K-means implementation for load profiles
src/services/advancedBessAnalytics.ts:408:    loadProfile: LoadProfile[],
src/services/advancedBessAnalytics.ts:423:    const sortedProfile = [...loadProfile].sort(
src/types/intelligence.types.ts:20:  industrySlug: string;
src/types/intelligence.types.ts:30:  industrySlug: string; // Matches use_cases.slug
src/types/intelligence.types.ts:59:  industrySlug: string;
src/types/intelligence.types.ts:82:  industrySlug: string;
src/types/intelligence.types.ts:92:  industry_slug: string;
src/types/intelligence.types.ts:106:  industry_slug: string;
src/types/intelligence.types.ts:124:  industry_slug: string | null;
src/types/intelligence.types.ts:140:  industry_slug: string;
src/services/industryTeaserService.ts:23:export function getIndustryTeaserProfile(industrySlug: string | null | undefined): IndustryTeaserProfile {
src/services/industryTeaserService.ts:24:  const normalized = (industrySlug || "default").replace(/_/g, "-").toLowerCase();
src/data/useCaseTemplates.ts:2604:        helpText: "Station type affects overall load profile",
src/data/useCaseTemplates.ts:2911:        helpText: "Operation type affects load profile",
src/services/dataIntegrationService.ts:147:      .eq("use_case_template_id", templateData.id)
src/services/dataIntegrationService.ts:534:      template_id: templateId,
src/types/industryInputTypes.ts:5: * Type-safe definitions for each industry's questionnaire inputs.
src/services/documentParserService.ts:10: * - Excel (.xlsx, .xls) - load profiles, equipment schedules
src/services/documentParserService.ts:292:  const loadProfileKeywords = [
src/services/documentParserService.ts:293:    "load profile",
src/services/documentParserService.ts:309:  const loadProfileScore = loadProfileKeywords.filter((kw) => lowerText.includes(kw)).length;
src/services/documentParserService.ts:311:  const maxScore = Math.max(utilityScore, equipmentScore, loadProfileScore);
src/services/documentParserService.ts:316:    if (loadProfileScore === maxScore) return "load-profile";
src/data/industryQuestionnaires.ts:5: * - title: Display title for the questionnaire
src/data/industryQuestionnaires.ts:840:        "Truck stops with multiple services benefit from battery storage to manage complex load profiles",
src/data/industryQuestionnaires.ts:1302: * Get questionnaire configuration for a specific industry
src/services/calculators/hotel16QCalculator.ts:74:  loadProfile: {
src/services/calculators/hotel16QCalculator.ts:309:    loadProfile: {
src/services/calculators/office16QCalculator.ts:35:  loadProfile: { baseLoadKW: number; peakHour: number; dailyKWh: number; occupancyFactor: number };
src/services/calculators/office16QCalculator.ts:76:    loadProfile: { baseLoadKW, peakHour: 14, dailyKWh, occupancyFactor: effectiveOccupancy },
src/services/calculators/evCharging16QCalculator.ts:44:  loadProfile: { baseLoadKW: number; peakHour: number; dailyKWh: number; concurrency: number };
src/services/calculators/evCharging16QCalculator.ts:117:    loadProfile: { baseLoadKW, peakHour: 18, dailyKWh, concurrency: loadMgmtFactor },
src/services/calculators/dataCenterIntegration.ts:15:    workloadProfile: get('workloadProfile', 'workload_profile') || 'steady',
src/services/calculators/loadCalculator.ts:22:  loadProfile: "flat" | "peaky" | "seasonal";
src/services/calculators/loadCalculator.ts:364:      // Check ALL field name variations from questionnaires (23 industries)
src/services/calculators/loadCalculator.ts:501:    loadProfile: config.profile,
src/services/calculators/carWashIntegration.ts:142: * Get completion percentage for car wash questionnaire
src/services/calculators/hospital16QCalculator.ts:35:  loadProfile: { baseLoadKW: number; peakHour: number; dailyKWh: number; criticalLoadPct: number };
src/services/calculators/hospital16QCalculator.ts:72:    loadProfile: { baseLoadKW, peakHour: 14, dailyKWh, criticalLoadPct: 85 },
src/services/calculators/siteScoreCalculator.ts:82:      loadProfileFit: number;     // 0-7
src/services/calculators/siteScoreCalculator.ts:252:  loadProfile: "peaky" | "variable" | "flat";
src/services/calculators/siteScoreCalculator.ts:259:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:266:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:273:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:280:    loadProfile: "flat",
src/services/calculators/siteScoreCalculator.ts:287:    loadProfile: "flat",
src/services/calculators/siteScoreCalculator.ts:294:    loadProfile: "variable",
src/services/calculators/siteScoreCalculator.ts:301:    loadProfile: "flat",
src/services/calculators/siteScoreCalculator.ts:308:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:315:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:322:    loadProfile: "variable",
src/services/calculators/siteScoreCalculator.ts:329:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:336:    loadProfile: "variable",
src/services/calculators/siteScoreCalculator.ts:343:    loadProfile: "flat",
src/services/calculators/siteScoreCalculator.ts:350:    loadProfile: "flat",
src/services/calculators/siteScoreCalculator.ts:357:    loadProfile: "flat",
src/services/calculators/siteScoreCalculator.ts:364:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:371:    loadProfile: "flat",
src/services/calculators/siteScoreCalculator.ts:378:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:385:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:392:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:399:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:406:    loadProfile: "variable",
src/services/calculators/siteScoreCalculator.ts:413:    loadProfile: "peaky",
src/services/calculators/siteScoreCalculator.ts:569:  let loadProfileFit = 5;  // Default
src/services/calculators/siteScoreCalculator.ts:570:  if (industryConfig.loadProfile === "peaky") loadProfileFit = 7;  // BESS shines
src/services/calculators/siteScoreCalculator.ts:571:  else if (industryConfig.loadProfile === "variable") loadProfileFit = 5;
src/services/calculators/siteScoreCalculator.ts:572:  else if (industryConfig.loadProfile === "flat") loadProfileFit = 3;  // Less arbitrage
src/services/calculators/siteScoreCalculator.ts:574:  const siteFitScore = powerDensityMatch + solarPotential + loadProfileFit;
src/services/calculators/siteScoreCalculator.ts:580:  if (loadProfileFit >= 6) siteFitInsights.push("Peaky load profile maximizes BESS value for peak shaving");
src/services/calculators/siteScoreCalculator.ts:669:    { powerDensityMatch, solarPotential, loadProfileFit },
src/services/calculators/siteScoreCalculator.ts:696:      breakdown: { powerDensityMatch, solarPotential, loadProfileFit },
src/services/calculators/siteScoreCalculator.ts:752:  siteFit: { powerDensityMatch: number; solarPotential: number; loadProfileFit: number },
src/services/calculators/siteScoreCalculator.ts:763:    { factor: "Load profile fit", score: siteFit.loadProfileFit },
src/services/calculators/siteScoreCalculator.ts:886:  if (industryConfig?.loadProfile === "peaky") baseScore += 5;
src/components/smb/SMBWizard.tsx:12: * <SMBWizard industrySlug="ev-charging-hub" />
src/components/smb/SMBWizard.tsx:13: * <SMBWizard industrySlug="hotel" />
src/components/smb/SMBWizard.tsx:89:  industrySlug: string;
src/components/smb/SMBWizard.tsx:110:export const SMBWizard: React.FC<SMBWizardProps> = ({ industrySlug, onComplete }) => {
src/components/smb/SMBWizard.tsx:138:        const profile = await getIndustryProfile(industrySlug);
src/components/smb/SMBWizard.tsx:145:          .eq('slug', industrySlug)
src/components/smb/SMBWizard.tsx:160:            slug: industrySlug,
src/components/smb/SMBWizard.tsx:161:            name: `${industrySlug.replace('-', ' ')} Energy Solutions`,
src/components/smb/SMBWizard.tsx:173:            unitCount: industrySlug === 'hotel' ? 100 : industrySlug === 'ev-charging-hub' ? 8 : 5,
src/components/smb/SMBWizard.tsx:184:  }, [industrySlug]);
src/components/smb/SMBWizard.tsx:218:        useCase: industrySlug,
src/components/smb/SMBWizard.tsx:261:    return INDUSTRY_ICONS[industrySlug] || INDUSTRY_ICONS['default'];
src/components/smb/SMBWizard.tsx:262:  }, [industrySlug]);
src/components/smb/SMBWizard.tsx:348:                  Typical {industrySlug.replace('-', ' ')}: {industryProfile.typical_peak_demand_kw} kW peak demand
src/services/calculators/carWash16QCalculator.ts:66:  loadProfile: {
src/services/calculators/carWash16QCalculator.ts:289:    loadProfile: {
src/services/calculators/carWash16QCalculator.ts:321:    confidence: 0.60, // Lower confidence without full questionnaire
src/services/calculators/dataCenter16QCalculator.ts:14:  workloadProfile: string;
src/services/calculators/dataCenter16QCalculator.ts:34:  loadProfile: { baseLoadKW: number; peakHour: number; dailyKWh: number; pue: number };
src/services/calculators/dataCenter16QCalculator.ts:70:    loadProfile: { baseLoadKW, peakHour: 0, dailyKWh, pue },
src/services/calculators/truckStop16QCalculator.ts:74:  loadProfile: {
src/services/calculators/truckStop16QCalculator.ts:212:  // Truck stops have relatively flat load profile (24/7 operation)
src/services/calculators/truckStop16QCalculator.ts:307:    loadProfile: {
src/services/TrueQuoteEngine-Solar.ts:57:  industryTemplate: string;
src/services/TrueQuoteEngine-Solar.ts:100:  // Get industry template (SSOT for calculation factors)
src/services/TrueQuoteEngine-Solar.ts:230:    industryTemplate: template.industry,
src/services/smbPlatformService.ts:86:  industrySlug: string;
src/services/smbPlatformService.ts:90:  loadProfileType: string;
src/services/smbPlatformService.ts:267:  industrySlug: string
src/services/smbPlatformService.ts:277:      .eq("industry_slug", industrySlug)
src/services/smbPlatformService.ts:286:      industrySlug: data.industry_slug,
src/services/smbPlatformService.ts:290:      loadProfileType: data.load_profile_type,
src/services/smbPlatformService.ts:596:export function quickEstimate(input: { unitCount: number; state: string; industrySlug?: string }): {
src/services/smbPlatformService.ts:602:  const kwPerUnit = input.industrySlug === "car-wash" ? 30 : 20;
src/services/subIndustryService.ts:10: * 3. Get questionnaire depth for dynamic question filtering
src/services/subIndustryService.ts:20:  industry_slug: string;
src/services/subIndustryService.ts:21:  sub_industry_slug: string;
src/services/subIndustryService.ts:38:  industry_slug: string;
src/services/subIndustryService.ts:44:  questionnaire_depth: 'minimal' | 'standard' | 'detailed';
src/services/subIndustryService.ts:57:  industrySlug: string;
src/services/subIndustryService.ts:75:  industrySlug: string;
src/services/subIndustryService.ts:81:  questionnaireDepth: 'minimal' | 'standard' | 'detailed';
src/services/subIndustryService.ts:91:  questionnaireDepth: 'minimal' | 'standard' | 'detailed';
src/services/subIndustryService.ts:102:export async function getSubIndustries(industrySlug: string): Promise<SubIndustry[]> {
src/services/subIndustryService.ts:106:    .eq('industry_slug', industrySlug)
src/services/subIndustryService.ts:117:    industrySlug: row.industry_slug,
src/services/subIndustryService.ts:118:    subIndustrySlug: row.sub_industry_slug,
src/services/subIndustryService.ts:138:  industrySlug: string, 
src/services/subIndustryService.ts:144:    .eq('industry_slug', industrySlug)
src/services/subIndustryService.ts:145:    .eq('sub_industry_slug', subIndustrySlug)
src/services/subIndustryService.ts:154:    industrySlug: data.industry_slug,
src/services/subIndustryService.ts:155:    subIndustrySlug: data.sub_industry_slug,
src/services/subIndustryService.ts:178:export async function getBusinessSizeTiers(industrySlug: string): Promise<BusinessSizeTier[]> {
src/services/subIndustryService.ts:182:    .eq('industry_slug', industrySlug)
src/services/subIndustryService.ts:193:    industrySlug: row.industry_slug,
src/services/subIndustryService.ts:199:    questionnaireDepth: row.questionnaire_depth,
src/services/subIndustryService.ts:209: * Returns the matching tier with questionnaire depth info
src/services/subIndustryService.ts:212:  industrySlug: string,
src/services/subIndustryService.ts:215:  const tiers = await getBusinessSizeTiers(industrySlug);
src/services/subIndustryService.ts:229:      questionnaireDepth: 'standard',
src/services/subIndustryService.ts:237:    questionnaireDepth: matchingTier.questionnaireDepth,
src/services/subIndustryService.ts:245:export async function getSizeFieldForIndustry(industrySlug: string): Promise<string | null> {
src/services/subIndustryService.ts:246:  const tiers = await getBusinessSizeTiers(industrySlug);
src/services/subIndustryService.ts:277: * Check if a question should be shown based on questionnaire depth
src/services/subIndustryService.ts:281:  questionnaireDepth: 'minimal' | 'standard' | 'detailed'
src/services/subIndustryService.ts:283:  const includedTiers = getQuestionTiersToInclude(questionnaireDepth);
src/services/subIndustryService.ts:292:  industrySlug: string;
src/services/subIndustryService.ts:308:  industrySlug: string,
src/services/subIndustryService.ts:316:    subIndustry = await getSubIndustry(industrySlug, subIndustrySlug);
src/services/subIndustryService.ts:322:    sizeTier = await determineBusinessSizeTier(industrySlug, sizeValue);
src/services/subIndustryService.ts:326:    industrySlug,
src/services/subIndustryService.ts:344:    { id: '1', industrySlug: 'hotel', subIndustrySlug: 'economy', name: 'Economy / Budget', description: null, icon: 'üè®', loadMultiplier: 0.7, backupMultiplier: 0.5, solarAffinity: 0.8, evAffinity: 0.6, typicalSizeMin: 30, typicalSizeMax: 100, sizeUnit: 'rooms', displayOrder: 1, isActive: true },
src/services/subIndustryService.ts:345:    { id: '2', industrySlug: 'hotel', subIndustrySlug: 'midscale', name: 'Midscale', description: null, icon: 'üè®', loadMultiplier: 0.85, backupMultiplier: 0.7, solarAffinity: 1.0, evAffinity: 0.8, typicalSizeMin: 50, typicalSizeMax: 150, sizeUnit: 'rooms', displayOrder: 2, isActive: true },
src/services/subIndustryService.ts:346:    { id: '3', industrySlug: 'hotel', subIndustrySlug: 'upscale', name: 'Upscale / Full-Service', description: null, icon: 'üè®', loadMultiplier: 1.0, backupMultiplier: 0.85, solarAffinity: 1.1, evAffinity: 1.0, typicalSizeMin: 100, typicalSizeMax: 300, sizeUnit: 'rooms', displayOrder: 3, isActive: true },
src/services/subIndustryService.ts:347:    { id: '4', industrySlug: 'hotel', subIndustrySlug: 'luxury', name: 'Luxury Resort', description: null, icon: 'üè®', loadMultiplier: 1.4, backupMultiplier: 1.0, solarAffinity: 1.2, evAffinity: 1.2, typicalSizeMin: 150, typicalSizeMax: 500, sizeUnit: 'rooms', displayOrder: 4, isActive: true },
src/services/subIndustryService.ts:350:    { id: '5', industrySlug: 'car_wash', subIndustrySlug: 'self_service', name: 'Self-Service', description: null, icon: 'üöø', loadMultiplier: 0.6, backupMultiplier: 0.4, solarAffinity: 1.2, evAffinity: 0.5, typicalSizeMin: 4, typicalSizeMax: 12, sizeUnit: 'bays', displayOrder: 1, isActive: true },
src/services/subIndustryService.ts:351:    { id: '6', industrySlug: 'car_wash', subIndustrySlug: 'express_tunnel', name: 'Express Tunnel', description: null, icon: 'üöó', loadMultiplier: 1.0, backupMultiplier: 0.8, solarAffinity: 1.0, evAffinity: 0.9, typicalSizeMin: 1, typicalSizeMax: 2, sizeUnit: 'tunnels', displayOrder: 3, isActive: true },
src/services/subIndustryService.ts:352:    { id: '7', industrySlug: 'car_wash', subIndustrySlug: 'full_service', name: 'Full-Service', description: null, icon: '‚ú®', loadMultiplier: 1.2, backupMultiplier: 0.9, solarAffinity: 1.0, evAffinity: 1.1, typicalSizeMin: 1, typicalSizeMax: 2, sizeUnit: 'tunnels', displayOrder: 4, isActive: true },
src/services/subIndustryService.ts:355:    { id: '8', industrySlug: 'ev_charging', subIndustrySlug: 'destination', name: 'Destination Charging', description: null, icon: 'üÖøÔ∏è', loadMultiplier: 0.6, backupMultiplier: 0.4, solarAffinity: 1.3, evAffinity: 1.5, typicalSizeMin: 4, typicalSizeMax: 20, sizeUnit: 'chargers', displayOrder: 1, isActive: true },
src/services/subIndustryService.ts:356:    { id: '9', industrySlug: 'ev_charging', subIndustrySlug: 'public_station', name: 'Public Charging Station', description: null, icon: '‚ö°', loadMultiplier: 1.0, backupMultiplier: 0.7, solarAffinity: 1.2, evAffinity: 1.8, typicalSizeMin: 4, typicalSizeMax: 24, sizeUnit: 'chargers', displayOrder: 2, isActive: true },
src/services/subIndustryService.ts:357:    { id: '10', industrySlug: 'ev_charging', subIndustrySlug: 'fleet_depot', name: 'Fleet Depot', description: null, icon: 'üöê', loadMultiplier: 1.4, backupMultiplier: 1.0, solarAffinity: 1.0, evAffinity: 2.0, typicalSizeMin: 10, typicalSizeMax: 100, sizeUnit: 'chargers', displayOrder: 3, isActive: true },
src/services/subIndustryService.ts:364:export async function getSubIndustriesWithFallback(industrySlug: string): Promise<SubIndustry[]> {
src/services/subIndustryService.ts:366:    const subIndustries = await getSubIndustries(industrySlug);
src/services/subIndustryService.ts:374:  return FALLBACK_SUB_INDUSTRIES[industrySlug] || [];
src/services/useCasePowerCalculations.ts:3376:  // Dec 2025: Now uses industry-specific load profile (hotels = 0.55 evening peak)
src/services/useCasePowerCalculations.ts:3382:  // Source: CBECS 2018 hospitality load profiles, ASHRAE
src/services/carWash16QCalculator.ts:6: * Implements the Merlin Car Wash questionnaire specification (Jan 21, 2026)
src/services/carWash16QCalculator.ts:31: * Implements the Merlin Car Wash questionnaire specification (Jan 21, 2026)
src/services/carWash16QCalculator.ts:329:    'ICA 2024 Industry Study - Car wash equipment load profiles',
src/services/industryPowerProfilesService.ts:20:  industry_slug: string;
src/services/industryPowerProfilesService.ts:42:    industry_slug: "car-wash",
src/services/industryPowerProfilesService.ts:58:    industry_slug: "ev-charging-hub",
src/services/industryPowerProfilesService.ts:74:    industry_slug: "hotel",
src/services/industryPowerProfilesService.ts:90:    industry_slug: "laundromat",
src/services/industryPowerProfilesService.ts:106:    industry_slug: "restaurant",
src/services/industryPowerProfilesService.ts:140:async function loadProfilesFromDB(): Promise<boolean> {
src/services/industryPowerProfilesService.ts:154:        profilesCache.set(row.industry_slug, row);
src/services/industryPowerProfilesService.ts:178: * @param industrySlug - Industry identifier (e.g., 'car-wash', 'laundromat')
src/services/industryPowerProfilesService.ts:182:  industrySlug: string
src/services/industryPowerProfilesService.ts:185:    await loadProfilesFromDB();
src/services/industryPowerProfilesService.ts:189:  const dbProfile = profilesCache.get(industrySlug);
src/services/industryPowerProfilesService.ts:195:  return FALLBACK_PROFILES[industrySlug] || null;
src/services/industryPowerProfilesService.ts:203:    await loadProfilesFromDB();
src/services/industryPowerProfilesService.ts:211:    allProfiles.set(profile.industry_slug, profile);
src/services/industryPowerProfilesService.ts:225: * @param industrySlug - Industry identifier
src/services/industryPowerProfilesService.ts:230:  industrySlug: string,
src/services/industryPowerProfilesService.ts:233:  const profile = await getIndustryProfile(industrySlug);
src/services/industryPowerProfilesService.ts:243: * @param industrySlug - Industry identifier
src/services/industryPowerProfilesService.ts:248:  industrySlug: string,
src/services/industryPowerProfilesService.ts:251:  const profile = await getIndustryProfile(industrySlug);
src/services/industryPowerProfilesService.ts:261: * @param industrySlug - Industry identifier
src/services/industryPowerProfilesService.ts:265:  industrySlug: string
src/services/industryPowerProfilesService.ts:267:  const profile = await getIndustryProfile(industrySlug);
src/services/businessDetectionService.ts:32:  industrySlug: string; // hotel, car-wash, hospital, etc.
src/services/businessDetectionService.ts:220:  industrySlug: string,
src/services/businessDetectionService.ts:233:  switch (industrySlug) {
src/services/businessDetectionService.ts:328:  let industrySlug = "office"; // Default fallback
src/services/businessDetectionService.ts:333:      industrySlug = GOOGLE_TO_INDUSTRY_MAP[type];
src/services/businessDetectionService.ts:365:  const prefilledAnswers = generatePrefilledAnswers(industrySlug, amenities, operatingHours);
src/services/businessDetectionService.ts:377:    industrySlug,
src/services/businessDetectionService.ts:415:  const range = industryRanges[detection.industrySlug] || { low: 100000, high: 500000 };
src/types/database.types.ts:341:          industry_slug: string | null
src/types/database.types.ts:369:          industry_slug?: string | null
src/types/database.types.ts:397:          industry_slug?: string | null
src/types/database.types.ts:420:          industry_slug: string
src/types/database.types.ts:424:          questionnaire_depth: string | null
src/types/database.types.ts:436:          industry_slug: string
src/types/database.types.ts:440:          questionnaire_depth?: string | null
src/types/database.types.ts:452:          industry_slug?: string
src/types/database.types.ts:456:          questionnaire_depth?: string | null
src/types/database.types.ts:806:          equipment_template_id: string | null
src/types/database.types.ts:817:          equipment_template_id?: string | null
src/types/database.types.ts:828:          equipment_template_id?: string | null
src/types/database.types.ts:843:            foreignKeyName: "configuration_equipment_equipment_template_id_fkey"
src/types/database.types.ts:844:            columns: ["equipment_template_id"]
src/types/database.types.ts:1486:          use_case_template_id: string
src/types/database.types.ts:1505:          use_case_template_id: string
src/types/database.types.ts:1524:          use_case_template_id?: string
src/types/database.types.ts:1529:            foreignKeyName: "equipment_database_use_case_template_id_fkey"
src/types/database.types.ts:1530:            columns: ["use_case_template_id"]
src/types/database.types.ts:1536:            foreignKeyName: "equipment_database_use_case_template_id_fkey"
src/types/database.types.ts:1537:            columns: ["use_case_template_id"]
src/types/database.types.ts:2127:          industry_slug: string
src/types/database.types.ts:2140:          industry_slug: string
src/types/database.types.ts:2153:          industry_slug?: string
src/types/database.types.ts:2161:            foreignKeyName: "goal_suggestion_rules_industry_slug_fkey"
src/types/database.types.ts:2162:            columns: ["industry_slug"]
src/types/database.types.ts:2272:          industry_slug: string
src/types/database.types.ts:2282:          industry_slug: string
src/types/database.types.ts:2292:          industry_slug?: string
src/types/database.types.ts:2298:            foreignKeyName: "industry_keyword_mappings_industry_slug_fkey"
src/types/database.types.ts:2299:            columns: ["industry_slug"]
src/types/database.types.ts:2348:          industry_slug: string
src/types/database.types.ts:2366:          industry_slug: string
src/types/database.types.ts:2384:          industry_slug?: string
src/types/database.types.ts:3286:          industry_slug: string
src/types/database.types.ts:3302:          industry_slug: string
src/types/database.types.ts:3318:          industry_slug?: string
src/types/database.types.ts:3330:            foreignKeyName: "peer_benchmarks_industry_slug_fkey"
src/types/database.types.ts:3331:            columns: ["industry_slug"]
src/types/database.types.ts:4259:          use_case_template_id: string | null
src/types/database.types.ts:4283:          use_case_template_id?: string | null
src/types/database.types.ts:4307:          use_case_template_id?: string | null
src/types/database.types.ts:4312:            foreignKeyName: "saved_projects_use_case_template_id_fkey"
src/types/database.types.ts:4313:            columns: ["use_case_template_id"]
src/types/database.types.ts:4319:            foreignKeyName: "saved_projects_use_case_template_id_fkey"
src/types/database.types.ts:4320:            columns: ["use_case_template_id"]
src/types/database.types.ts:5440:          industry_slug: string
src/types/database.types.ts:5446:          sub_industry_slug: string
src/types/database.types.ts:5459:          industry_slug: string
src/types/database.types.ts:5465:          sub_industry_slug: string
src/types/database.types.ts:5478:          industry_slug?: string
src/types/database.types.ts:5484:          sub_industry_slug?: string
src/types/database.types.ts:6277:          industry_slug: string | null
src/types/database.types.ts:6292:          industry_slug?: string | null
src/types/database.types.ts:6307:          industry_slug?: string | null
src/types/database.types.ts:6316:            foreignKeyName: "weather_impact_coefficients_industry_slug_fkey"
src/types/database.types.ts:6317:            columns: ["industry_slug"]
src/types/database.types.ts:7351:        Args: { p_industry_slug: string; p_size_value: number }
src/types/database.types.ts:7353:          questionnaire_depth: string
src/types/database.types.ts:7408:          template_id: string
src/types/database.types.ts:7443:          industry_slug: string
src/types/database.types.ts:7473:          p_industry_slug?: string
src/services/unifiedQuoteCalculator.ts:103:  loadProfileType?: 'commercial-office' | 'commercial-retail' | 'industrial' | 'hotel' | 
src/services/unifiedQuoteCalculator.ts:682:      // Map use case to load profile type
src/services/unifiedQuoteCalculator.ts:683:      const loadProfileMap: Record<string, typeof input.loadProfileType> = {
src/services/unifiedQuoteCalculator.ts:693:      const loadProfileType = input.loadProfileType || loadProfileMap[useCase || ''] || 'commercial-office';
src/services/unifiedQuoteCalculator.ts:703:        loadProfileType,
src/services/unifiedQuoteCalculator.ts:727:          source: '8760 hourly simulation (DOE load profiles + TOU rates)',
src/components/UseCaseTemplates.tsx:102:      "Smooths production load profiles",
src/components/sections/HeroSection.tsx:1288:                        Merlin calculates your optimal BESS size based on your actual load profile:
src/components/AdvancedQuoteBuilder.tsx:1166:                      Have utility bills, equipment schedules, or load profiles? Upload them and let
src/components/modals/VerticalRedirectModal.tsx:63:      'Car wash-specific load profiles',
src/types/database.types.old.ts:274:          equipment_template_id: string;
src/types/database.types.old.ts:287:          equipment_template_id: string;
src/types/database.types.old.ts:300:          equipment_template_id?: string;
src/utils/discoveryClues.tsx:357:        "Different industries have unique load profiles - hotels need 24/7 power, offices peak 9-5, retail surges on weekends.",
src/services/questionnaireMapper.ts:5: * Converts rich questionnaire answers ‚Üí SSOT calculation inputs.
src/services/questionnaireMapper.ts:21:/** Raw questionnaire answers from wizardState.useCaseData */
src/services/questionnaireMapper.ts:97: * Maps questionnaire classification values to SSOT hotel classes.
src/services/questionnaireMapper.ts:123:// Maps questionnaire amenity values ‚Üí SSOT amenity booleans
src/services/questionnaireMapper.ts:127: * Maps questionnaire amenity values to SSOT amenity keys.
src/services/questionnaireMapper.ts:180: * Maps hotel questionnaire answers to SSOT-compatible input.
src/services/questionnaireMapper.ts:261: * Extracts additional data from questionnaire for quote generation.
src/services/questionnaireMapper.ts:423: * Full hotel questionnaire mapper - combines SSOT input + extracted data.
src/services/questionnaireMapper.ts:451: * Generic questionnaire mapper that routes to use-case-specific mappers.
src/services/questionnaireMapper.ts:452: * Expand this as we add questionnaires for other use cases.
src/services/questionnaireMapper.ts:470:    // TODO: Add mappers for other use cases as we build their questionnaires
src/utils/calculationFormulas.ts:443:          config.loadProfile === "3-shift" ? 80000 : config.loadProfile === "2-shift" ? 50000 : 0;
src/utils/calculationFormulas.ts:451:            { name: "Load Profile", value: config.loadProfile, unit: "" },
src/services/teaserPreviewService.ts:50:  industrySlug?: string; // 'hotel', 'car-wash', 'ev-charging', etc.
src/services/teaserPreviewService.ts:216:    input.industrySlug || 'unknown',
src/services/teaserPreviewService.ts:246:  const annualUsageKWh = input.industrySlug 
src/services/teaserPreviewService.ts:247:    ? estimateUsageFromIndustry(input.industrySlug, input.businessSizeTier)
src/services/teaserPreviewService.ts:336:  if (input.industrySlug) {
src/services/teaserPreviewService.ts:352:  if (input.industrySlug) {
src/services/teaserPreviewService.ts:353:    assumptions.push(`Industry: ${INDUSTRY_BASELINE_USAGE[input.industrySlug] ? input.industrySlug : 'generic commercial'}`);
src/config/iconMapping.ts:228:export function getIndustryIcon(industrySlug: string): LucideIcon {
src/config/iconMapping.ts:229:  return INDUSTRY_ICONS[industrySlug] || Building2;
src/config/iconMapping.ts:242:export function hasIndustryIcon(industrySlug: string): boolean {
src/config/iconMapping.ts:243:  return industrySlug in INDUSTRY_ICONS;
src/services/industries/truckStopIndustry.ts:69:      loadProfile: 'extreme_spike',
src/services/industries/truckStopIndustry.ts:81:      loadProfile: 'severe_spike',
src/services/industries/truckStopIndustry.ts:92:      loadProfile: 'gradual',
src/services/industries/truckStopIndustry.ts:115:      loadProfile: 'heavy_inductive',
src/services/industries/truckStopIndustry.ts:425:  loadProfile: 'travel_center_curve';
src/services/industries/truckStopIndustry.ts:469:  // Annual consumption based on load profile
src/services/industries/truckStopIndustry.ts:476:    loadProfile: 'travel_center_curve',
src/services/intelligenceEventsService.ts:221:        industrySlug: params.inferredIndustry,
src/services/hourly8760AnalysisService.ts:11: * - Now: 8760-hour simulation with TOU rates, load profiles, solar production
src/services/hourly8760AnalysisService.ts:51:  loadProfileType: LoadProfileType;
src/services/hourly8760AnalysisService.ts:142:    loadProfile: string;
src/services/hourly8760AnalysisService.ts:156: * Typical load profile shapes by sector
src/services/hourly8760AnalysisService.ts:275:    loadProfileType,
src/services/hourly8760AnalysisService.ts:288:  // Get load profile
src/services/hourly8760AnalysisService.ts:289:  const loadProfile = LOAD_PROFILES[loadProfileType] || LOAD_PROFILES['commercial-office'];
src/services/hourly8760AnalysisService.ts:293:  const loadProfileSum = loadProfile.reduce((a, b) => a + b, 0);
src/services/hourly8760AnalysisService.ts:294:  const loadScaleFactor = dailyLoadKWh / (loadProfileSum * peakDemandKW / Math.max(...loadProfile));
src/services/hourly8760AnalysisService.ts:323:    const load = loadProfile[hourOfDay] * peakDemandKW * loadScaleFactor;
src/services/hourly8760AnalysisService.ts:474:      loadProfile: loadProfileType,
src/services/hourly8760AnalysisService.ts:558:  loadProfileType: LoadProfileType,
src/services/scenarioGenerator.ts:130:  const loadProfile = getIndustryLoadProfile(input.industryType);
src/services/scenarioGenerator.ts:148:    loadProfile: loadProfile.peakLoadFactor,
src/components/wizard/experimental/SmartFormWizard.tsx.skip:18:  industrySlug: string;  // 'hotel', 'car-wash', etc.
src/components/wizard/experimental/SmartFormWizard.tsx.skip:21:export function SmartFormWizard({ industrySlug }: SmartFormWizardProps) {
src/components/wizard/experimental/SmartFormWizard.tsx.skip:31:        const qs = await useCaseService.getQuestionsByIndustry(industrySlug);
src/components/wizard/experimental/SmartFormWizard.tsx.skip:51:  }, [industrySlug]);
src/components/wizard/experimental/SmartFormWizard.tsx.skip:66:      message: `Quote generated for ${industrySlug} with ${Object.keys(answers).length} answers`,
src/components/wizard/experimental/SmartFormWizard.tsx.skip:121:          {industrySlug.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())} Energy Assessment
src/components/wizard/ROOT_COMPONENTS_README.md:10:- **Purpose:** Database-driven questionnaire renderer for ALL industries
src/components/wizard/ROOT_COMPONENTS_README.md:77:CompleteStep3Component.tsx (DB-driven questionnaire)
src/components/wizard/Step3Integration.tsx:24:  questionnaireDepth?: "minimal" | "standard" | "detailed";
src/components/wizard/_archive-jan-2026/README.md:8:**Reason:** All industries now use unified `Step3Details.tsx` with scrolling questionnaire  
src/components/wizard/_archive-jan-2026/README.md:19:- `CompleteStep3Component.tsx` - Database-driven questionnaire for all industries
src/components/wizard/CompleteStep3Component.tsx:4: * Main orchestrator for the questionnaire
src/components/wizard/CompleteStep3Component.tsx:476:    questionnaireDepth?: "minimal" | "standard" | "detailed";
src/components/wizard/CompleteStep3Component.tsx:708:  // VALIDITY TRACKING - Notify parent when questionnaire becomes valid
src/components/wizard/CompleteStep3Component.tsx:745:  }, [answers, questions, onValidityChange, state.questionnaireDepth]);
src/components/wizard/CompleteStep3Component.tsx:754:  // Helper: Check if a question should be shown based on questionnaire depth
src/components/wizard/CompleteStep3Component.tsx:766:    const depth = state.questionnaireDepth || "standard"; // Default to standard if not set
src/components/wizard/CompleteStep3Component.tsx:773:    // This ensures users always see meaningful questionnaires
src/components/wizard/CompleteStep3Component.tsx:786:    // First filter by questionnaire depth
src/components/wizard/CompleteStep3Component.tsx:803:      questionnaireDepth: state.questionnaireDepth || "not set (defaulting to standard)",
src/components/wizard/CompleteStep3Component.tsx:823:  // Section progress (also filtered by questionnaire depth)
src/components/wizard/CompleteStep3Component.tsx:827:        // Filter by questionnaire depth
src/components/wizard/CompleteStep3Component.tsx:967:            We're still building the questionnaire for {industryTitle}. In the meantime, you can
src/components/wizard/v6/WizardV6.tsx:75:// Removed: Step3HotelEnergy - all industries now use Step3Details (scrolling questionnaire)
src/components/wizard/v6/WizardV6.tsx:267:  // Uses ALL DB custom_questions fields - audit: scripts/audit-questionnaire-data-flow.mjs
src/components/wizard/v6/WizardV6.tsx:345:    // Checks both Step 3 questionnaire input AND progressive model micro-prompt
src/components/wizard/v6/WizardV6.tsx:357:      // Fall back to Step 3 questionnaire input
src/components/wizard/v6/WizardV6.tsx:1970:    const industrySlug = state.industry || state.detectedIndustry;
src/components/wizard/v6/WizardV6.tsx:1974:    if (!zipCode || !stateCode || !industrySlug || zipCode.length !== 5) {
src/components/wizard/v6/WizardV6.tsx:1981:      industrySlug,
src/components/wizard/v6/WizardV6.tsx:1996:            industrySlug,
src/components/wizard/v6/WizardV6.tsx:2003:      weatherRisk ? getPrimaryWeatherImpact({ weatherRisk, industrySlug }) : Promise.resolve(null),
src/components/wizard/v6/WizardV6.tsx:2009:        industrySlug,
src/components/wizard/v6/WizardV6.tsx:2049:    const industrySlug = state.industry || state.detectedIndustry;
src/components/wizard/v6/WizardV6.tsx:2060:    if (!industrySlug) {
src/components/wizard/v6/WizardV6.tsx:2082:          breakdown: { powerDensityMatch: 0, solarPotential: 0, loadProfileFit: 0 },
src/components/wizard/v6/WizardV6.tsx:2107:        industry: industrySlug as Parameters<typeof calculateSiteScore>[0]["industry"],
src/components/wizard/v6/WizardV6.tsx:2619:                    Next: industry + load profile ‚Üí savings estimate
src/components/wizard/carWashIntegration.ts:18: * @param answers - Raw answers from Step 3 questionnaire
src/components/wizard/carWashIntegration.ts:83: * @param answers - Raw answers from Step 3 questionnaire
src/components/wizard/v6/MerlinBar.tsx:960:                    text="Industry selection helps me apply the right load profiles"
src/components/wizard/v7/hooks/useWizardV7.ts:56:      industrySlug?: string; // IMPORTANT: allow Step1 to save an inferred industry here
src/components/wizard/v7/hooks/useWizardV7.ts:76:  // 1) If Step1 already saved an industrySlug ‚Äî trust it.
src/components/wizard/v7/hooks/useWizardV7.ts:77:  if ((business as any).industrySlug) return (business as any).industrySlug;
src/components/wizard/WIZARD_ARCHITECTURE.md:20:‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Step3Details.tsx     ‚úÖ Database-driven questionnaire
src/components/wizard/v6/micro-prompts/HVACTypePrompt.tsx:80:              HVAC type affects your electrical load profile. Chillers use more power, heat pumps
src/components/wizard/v7/steps/Step1LocationV7.tsx:63:      industrySlug?: string;
src/components/wizard/v7/steps/Step1LocationV7.tsx:87:  industrySlug?: string; // car-wash, hotel, office, etc.
src/components/wizard/v7/steps/Step1LocationV7.tsx:115:    if (!locationIntel?.utilityRate || !location?.business?.industrySlug) {
src/components/wizard/v7/steps/Step1LocationV7.tsx:121:    const industrySlug = location.business.industrySlug;
src/components/wizard/v7/steps/Step1LocationV7.tsx:145:    const profile = industryProfiles[industrySlug] || { bessKW: 200, solarKW: 150, usageFactor: 1.0 };
src/components/wizard/v7/steps/Step1LocationV7.tsx:299:        industrySlug: guessIndustrySlug(data.types),
src/components/wizard/v7/steps/Step1LocationV7.tsx:427:                            if (location.business?.industrySlug && INDUSTRY_IMAGE_MAP[location.business.industrySlug]) {
src/components/wizard/v7/steps/Step1LocationV7.tsx:428:                              (e.currentTarget as HTMLImageElement).src = INDUSTRY_IMAGE_MAP[location.business.industrySlug];
src/components/wizard/v7/steps/Step1LocationV7.tsx:439:                            if (location.business?.industrySlug && INDUSTRY_IMAGE_MAP[location.business.industrySlug]) {
src/components/wizard/v7/steps/Step1LocationV7.tsx:440:                              (e.currentTarget as HTMLImageElement).src = INDUSTRY_IMAGE_MAP[location.business.industrySlug];
src/components/wizard/v7/steps/Step1LocationV7.tsx:444:                      ) : location.business.industrySlug && INDUSTRY_IMAGE_MAP[location.business.industrySlug] ? (
src/components/wizard/v7/steps/Step1LocationV7.tsx:446:                          src={INDUSTRY_IMAGE_MAP[location.business.industrySlug]}
src/components/wizard/v7/steps/Step1LocationV7.tsx:513:                            Based on ${locationIntel?.utilityRate?.toFixed(2)}/kWh rate, {locationIntel?.solarGrade} solar grade, and typical {location.business.industrySlug} energy usage. Final quote calculated in next steps.
src/components/wizard/v6/steps/Step2Industry.tsx:103:      questionnaireDepth: depth
src/components/wizard/v6/steps/Step2Industry.tsx:215:              Questionnaire: <strong className="capitalize">{state.questionnaireDepth}</strong>
src/components/wizard/v6/steps/Step2Industry.tsx:229:            // Default to 'standard' questionnaire if skipped
src/components/wizard/v7/steps/Step3DetailsV7.tsx:8: * - Wraps CompleteStep3Component.tsx (database-driven questionnaire)
src/components/wizard/v7/steps/Step3DetailsV7.tsx:54:      industrySlug?: string;
src/components/wizard/v7/steps/Step3DetailsV7.tsx:223:  // HARD GATE: Step 3+ does not render questionnaire or metrics until pricing is frozen
src/components/wizard/v7/steps/Step3DetailsV7.tsx:234:  const industrySlug = industry || location?.business?.industrySlug || 'office';
src/components/wizard/v7/steps/Step3DetailsV7.tsx:235:  const industryIcon = INDUSTRY_ICONS[industrySlug] || 'üè¢';
src/components/wizard/v7/steps/Step3DetailsV7.tsx:256:  const industryName = industryNames[industrySlug] || 'Commercial Facility';
src/components/wizard/v7/steps/Step3DetailsV7.tsx:290:      setDbError(error instanceof Error ? error.message : 'Failed to update questionnaire');
src/components/wizard/v7/steps/Step3DetailsV7.tsx:311:              {INDUSTRY_IMAGE_MAP[industrySlug] ? (
src/components/wizard/v7/steps/Step3DetailsV7.tsx:313:                  src={INDUSTRY_IMAGE_MAP[industrySlug]}
src/components/wizard/v7/steps/Step3DetailsV7.tsx:378:                      Complete the questionnaire to get your personalized BESS recommendation.
src/components/wizard/v7/steps/Step3DetailsV7.tsx:611:                industry: industrySlug,
src/components/wizard/v6/steps/Step1Location.tsx:219:          detectedIndustry: result.industrySlug,
src/components/wizard/v6/steps/Step1Location.tsx:223:          industry: result.industrySlug || "",
src/components/wizard/v6/steps/Step1Location.tsx:224:          industryName: result.industrySlug
src/components/wizard/v6/steps/Step1Location.tsx:225:            ? INDUSTRY_NAMES[result.industrySlug] || result.businessType || ""
src/components/wizard/v6/steps/Step1Location.tsx:230:        if (result.industrySlug && locationData) {
src/components/wizard/v6/steps/Step1Location.tsx:236:              industrySlug: result.industrySlug,
src/components/wizard/v6/steps/Step1Location.tsx:410:    businessLookup?.found && businessLookup.industrySlug && locationData
src/components/wizard/v6/steps/Step1Location.tsx:413:          const normalized = businessLookup.industrySlug.replace(/-/g, "_");
src/components/wizard/v6/steps/Step1Location.tsx:580:                    {businessLookup.industrySlug && (
src/components/wizard/v6/steps/Step1Location.tsx:582:                        {INDUSTRY_NAMES[businessLookup.industrySlug] || businessLookup.businessType}{" "}
src/components/wizard/v6/steps/Step1Location.tsx:681:                  {INDUSTRY_NAMES[businessLookup.industrySlug || ""] || "industry"} profiles.
src/components/wizard/v6/steps/EnhancedStep2Industry.tsx:306:      questionnaireDepth: depth,
src/components/wizard/v6/steps/EnhancedStep2Industry.tsx:438:              Questionnaire: <strong className="capitalize">{state.questionnaireDepth}</strong>
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:260:          detectedIndustry: result.industrySlug,
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:263:          industry: result.industrySlug || "",
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:264:          industryName: result.industrySlug
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:265:            ? INDUSTRY_NAMES[result.industrySlug] || result.businessType || ""
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:451:                    {businessLookup.industrySlug && (
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:455:                          {INDUSTRY_NAMES[businessLookup.industrySlug] ||
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:498:                      {businessLookup.industrySlug ? "Auto-detected" : "Manual entry"}
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:132:function getIndustryTeaserProfile(industrySlug: string | null): IndustryTeaserProfile & { fromDatabase: boolean } {
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:134:  const normalized = industrySlug?.replace(/-/g, "_").toLowerCase() || "default";
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:135:  const dashFormat = industrySlug?.replace(/_/g, "-").toLowerCase() || "default";
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:220:    if (!businessLookup?.found || !businessLookup.industrySlug || !locationData) return null;
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:223:    const est = getIndustryTeaserProfile(businessLookup.industrySlug);
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:354:          detectedIndustry: result.industrySlug,
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:357:          industry: result.industrySlug || "",
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:358:          industryName: result.industrySlug ? INDUSTRY_NAMES[result.industrySlug] || result.businessType || "" : "",
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:1036:                {businessLookup.industrySlug && (
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:1038:                    {INDUSTRY_NAMES[businessLookup.industrySlug] || businessLookup.businessType}
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:1090:                    *Based on typical {INDUSTRY_NAMES[businessLookup.industrySlug || ""] || "industry"} profiles. 
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:181:  industrySlug: string,
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:191:  const normalized = industrySlug.replace(/-/g, "_");
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:231:    disclaimer: `Preliminary estimate based on typical ${industrySlug.replace(/_/g, " ")} energy profiles. Your personalized TrueQuote‚Ñ¢ with verified savings will be calculated in Step 5.`,
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:242:  industrySlug: string;
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:254:  industrySlug,
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:264:  const preview = calculateSavingsPreview(industrySlug, electricityRate, demandCharge, sunHours);
src/components/wizard/v6/steps/Step3Details.tsx:7: * This replaces the old questionnaire engine with the new
src/components/wizard/v6/step3/buildStep3Snapshot.ts:70:  const loadProfile = {
src/components/wizard/v6/step3/buildStep3Snapshot.ts:98:    loadProfile,
src/components/wizard/v6/steps/Step5MagicFit.tsx:233:          { name: "Load Profile", value: base.load.loadProfile, source: "Industry benchmark" },
src/components/wizard/v6/step3/step3Contract.ts:77:  // Derived load profile (minimum needed for Step 4 & Step 5)
src/components/wizard/v6/step3/step3Contract.ts:78:  loadProfile: LoadProfile;
src/components/wizard/v6/components/BusinessSizePanel.tsx:22:    { tier: 'small', label: 'Boutique', description: 'Under 50 rooms', icon: 'üè†', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:23:    { tier: 'medium', label: 'Mid-Size', description: '50-150 rooms', icon: 'üè®', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:24:    { tier: 'large', label: 'Full-Service', description: '150-400 rooms', icon: 'üè¨', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:25:    { tier: 'enterprise', label: 'Resort/Casino', description: '400+ rooms', icon: 'üè∞', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:28:    { tier: 'small', label: 'Single Bay', description: '1-2 bays', icon: 'üöó', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:29:    { tier: 'medium', label: 'Express', description: '3-6 bays', icon: 'üöô', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:30:    { tier: 'large', label: 'Full-Service', description: '6-12 bays + detail', icon: 'üöê', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:31:    { tier: 'enterprise', label: 'Multi-Location', description: '12+ bays or chain', icon: 'üè≠', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:34:    { tier: 'small', label: 'Starter', description: '2-8 chargers', icon: '‚ö°', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:35:    { tier: 'medium', label: 'Hub', description: '8-20 chargers', icon: 'üîã', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:36:    { tier: 'large', label: 'Super Hub', description: '20-50 chargers', icon: '‚ö°', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:37:    { tier: 'enterprise', label: 'Fleet Depot', description: '50+ chargers', icon: 'üöõ', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:40:    { tier: 'small', label: 'Workshop', description: 'Under 25,000 sq ft', icon: 'üîß', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:41:    { tier: 'medium', label: 'Mid-Size Plant', description: '25K-100K sq ft', icon: 'üè≠', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:42:    { tier: 'large', label: 'Large Factory', description: '100K-500K sq ft', icon: 'üèóÔ∏è', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:43:    { tier: 'enterprise', label: 'Industrial Complex', description: '500K+ sq ft', icon: '‚öôÔ∏è', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:46:    { tier: 'small', label: 'Edge/Colocation', description: 'Under 1 MW', icon: 'üíæ', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:47:    { tier: 'medium', label: 'Enterprise DC', description: '1-10 MW', icon: 'üñ•Ô∏è', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:48:    { tier: 'large', label: 'Hyperscale', description: '10-50 MW', icon: 'üìä', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:49:    { tier: 'enterprise', label: 'Campus', description: '50+ MW', icon: 'üè¢', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:52:    { tier: 'small', label: 'Clinic', description: 'Under 50 beds', icon: 'üè•', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:53:    { tier: 'medium', label: 'Community Hospital', description: '50-200 beds', icon: 'üè®', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:54:    { tier: 'large', label: 'Regional Medical', description: '200-500 beds', icon: 'üè¨', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:55:    { tier: 'enterprise', label: 'Medical Campus', description: '500+ beds', icon: 'üè∞', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:58:    { tier: 'small', label: 'Single Store', description: 'Under 10,000 sq ft', icon: 'üè™', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:59:    { tier: 'medium', label: 'Big Box', description: '10K-50K sq ft', icon: 'üè¨', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:60:    { tier: 'large', label: 'Strip Mall', description: '50K-200K sq ft', icon: 'üõí', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:61:    { tier: 'enterprise', label: 'Shopping Center', description: '200K+ sq ft', icon: 'üè¢', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:64:    { tier: 'small', label: 'Small Office', description: 'Under 25,000 sq ft', icon: 'üè†', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:65:    { tier: 'medium', label: 'Mid-Rise', description: '25K-100K sq ft', icon: 'üè¢', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:66:    { tier: 'large', label: 'High-Rise', description: '100K-500K sq ft', icon: 'üèôÔ∏è', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:67:    { tier: 'enterprise', label: 'Campus', description: '500K+ sq ft', icon: 'üåÜ', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:70:    { tier: 'small', label: 'Single Building', description: 'Under 5,000 students', icon: 'üéì', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:71:    { tier: 'medium', label: 'Small Campus', description: '5K-15K students', icon: 'üè´', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:72:    { tier: 'large', label: 'University', description: '15K-40K students', icon: 'üéí', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:73:    { tier: 'enterprise', label: 'Major University', description: '40K+ students', icon: 'üèõÔ∏è', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:76:    { tier: 'small', label: 'Small Warehouse', description: 'Under 50,000 sq ft', icon: 'üì¶', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:77:    { tier: 'medium', label: 'Distribution Center', description: '50K-250K sq ft', icon: 'üè≠', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:78:    { tier: 'large', label: 'Fulfillment Center', description: '250K-1M sq ft', icon: 'üöö', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:79:    { tier: 'enterprise', label: 'Mega DC', description: '1M+ sq ft', icon: 'üè¢', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:82:    { tier: 'small', label: 'Caf√©/Quick Service', description: 'Under 2,500 sq ft', icon: '‚òï', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:83:    { tier: 'medium', label: 'Full-Service', description: '2,500-5,000 sq ft', icon: 'üçΩÔ∏è', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:84:    { tier: 'large', label: 'Large Restaurant', description: '5K-10K sq ft', icon: 'üç¥', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:85:    { tier: 'enterprise', label: 'Multi-Location', description: '10K+ or chain', icon: 'üè™', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:88:    { tier: 'small', label: 'Small Farm', description: 'Under 100 acres', icon: 'üå±', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:89:    { tier: 'medium', label: 'Mid-Size Farm', description: '100-500 acres', icon: 'üåæ', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:90:    { tier: 'large', label: 'Large Operation', description: '500-2,000 acres', icon: 'üöú', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:91:    { tier: 'enterprise', label: 'Industrial Farm', description: '2,000+ acres', icon: 'üè≠', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:94:    { tier: 'small', label: 'Local Stop', description: '10-30 spaces', icon: 'üöö', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:95:    { tier: 'medium', label: 'Travel Center', description: '30-100 spaces', icon: '‚õΩ', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:96:    { tier: 'large', label: 'Major Hub', description: '100-250 spaces', icon: 'üõ£Ô∏è', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:97:    { tier: 'enterprise', label: 'Interstate Plaza', description: '250+ spaces', icon: 'üè≠', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:103:  { tier: 'small', label: 'Small', description: 'Starter operation', icon: 'üè†', questionnaireDepth: 'minimal' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:104:  { tier: 'medium', label: 'Medium', description: 'Growing business', icon: 'üè¢', questionnaireDepth: 'standard' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:105:  { tier: 'large', label: 'Large', description: 'Established operation', icon: 'üè¨', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:106:  { tier: 'enterprise', label: 'Enterprise', description: 'Major facility', icon: 'üè∞', questionnaireDepth: 'detailed' },
src/components/wizard/v6/components/BusinessSizePanel.tsx:193:                onClick={() => onSelectSize(option.tier, option.questionnaireDepth)}
src/components/wizard/v6/components/BusinessSizePanel.tsx:223:                    option.questionnaireDepth === 'minimal' 
src/components/wizard/v6/components/BusinessSizePanel.tsx:225:                      : option.questionnaireDepth === 'standard'
src/components/wizard/v6/components/BusinessSizePanel.tsx:229:                    {option.questionnaireDepth === 'minimal' && '~8 questions'}
src/components/wizard/v6/components/BusinessSizePanel.tsx:230:                    {option.questionnaireDepth === 'standard' && '~14 questions'}
src/components/wizard/v6/components/BusinessSizePanel.tsx:231:                    {option.questionnaireDepth === 'detailed' && '~20 questions'}
src/components/wizard/v6/components/BusinessSizePanel.tsx:245:            Skip ‚Äî use standard questionnaire
src/components/wizard/v6/components/BusinessSizePanel.tsx:251:          Click a size above to continue. This determines how detailed your questionnaire will be.
src/components/wizard/v6/components/BusinessSizePanel.tsx:262:export function getSizeOptionsForIndustry(industrySlug: string): BusinessSizeOption[] {
src/components/wizard/v6/components/BusinessSizePanel.tsx:263:  const normalized = industrySlug.replace(/-/g, '_');
src/components/wizard/v6/types.ts:167:// Collected through micro-prompts with inference, not audit questionnaires.
src/components/wizard/v6/types.ts:377:  // Step 2: Business Size (determines questionnaire depth)
src/components/wizard/v6/types.ts:379:  questionnaireDepth?: QuestionnaireDepth;
src/components/wizard/v6/types.ts:562:  questionnaireDepth: QuestionnaireDepth;
src/utils/wizardHelpers.ts:92: * @param useCaseData - User answers from use case questionnaire
src/utils/wizardHelpers.ts:286: * @param useCaseData - User answers from questionnaire
src/components/modals/DataCenterQuestionnaire.tsx:4: * Specialized questionnaire for data center BESS sizing.
src/components/wizard/v7/steps/Step2Questionnaire.tsx:4: * Dynamic questionnaire with live calculation preview
src/utils/quoteExport.ts:71:  industryTemplate?: string;
src/utils/quoteExport.ts:529:  industryTemplate: string | string[];
src/utils/quoteExport.ts:611:    industryTemplate: quoteData?.industryTemplate || "bess",
src/utils/quoteExport.ts:654:  const industryName = getIndustryName(q.industryTemplate);
src/utils/quoteExport.ts:980:                  <div style="font-weight: bold; color: #059669; margin-bottom: 8px;">üè≠ Industry-Specific Benefits for ${getIndustryName(q.industryTemplate)}:</div>
src/utils/quoteExport.ts:983:                      q.industryTemplate.includes("ev-charging")
src/utils/quoteExport.ts:985:                        : q.industryTemplate.includes("manufacturing")
src/utils/quoteExport.ts:987:                          : q.industryTemplate.includes("data-center")
src/utils/quoteExport.ts:989:                            : q.industryTemplate.includes("hospital")
src/utils/quoteExport.ts:991:                              : q.industryTemplate.includes("cold-storage")
src/utils/quoteExport.ts:1348:                <strong>Note:</strong> Actual savings will vary based on utility rates, usage patterns, and operational strategy. This estimate assumes typical ${industryName.toLowerCase()} load profiles and current utility rates in ${q.location || "your area"}.
src/utils/quoteExport.ts:1491:            <li>Use Case: <strong>${getIndustryName(q.industryTemplate)}</strong></li>
src/utils/quoteExport.ts:1603:    industryTemplate: quoteData?.industryTemplate || "bess",
src/utils/quoteExport.ts:1636:  const industryName = getIndustryName(q.industryTemplate);
src/utils/quoteExport.ts:1751:üè≠ INDUSTRY-SPECIFIC BENEFITS FOR ${getIndustryName(q.industryTemplate).toUpperCase()}:
src/utils/quoteExport.ts:1753:  q.industryTemplate.includes("ev-charging")
src/utils/quoteExport.ts:1755:    : q.industryTemplate.includes("manufacturing")
src/utils/quoteExport.ts:1757:      : q.industryTemplate.includes("data-center")
src/utils/quoteExport.ts:1759:        : q.industryTemplate.includes("hospital")
src/utils/quoteExport.ts:1761:          : q.industryTemplate.includes("cold-storage")
src/utils/quoteExport.ts:1926:    industryTemplate: quoteData?.industryTemplate || "bess",
src/utils/quoteExport.ts:1943:  const industryName = getIndustryName(safeData.industryTemplate);
src/utils/quoteExport.ts:2173:      <div style="font-weight: bold; margin-bottom: 8px; font-size: 16px;">üéØ Designed for ${getIndustryName(q.industryTemplate)} Operations:</div>
src/utils/quoteExport.ts:2176:          q.industryTemplate.includes("ev-charging")
src/utils/quoteExport.ts:2178:            : q.industryTemplate.includes("manufacturing")
src/utils/quoteExport.ts:2180:              : q.industryTemplate.includes("data-center")
src/utils/quoteExport.ts:2182:                : q.industryTemplate.includes("hospital")
src/utils/quoteExport.ts:2184:                  : q.industryTemplate.includes("cold-storage")
src/utils/quoteExport.ts:2479:  <h4>üè≠ Industry-Specific Benefits for ${getIndustryName(q.industryTemplate)}:</h4>
src/utils/quoteExport.ts:2482:      q.industryTemplate.includes("ev-charging")
src/utils/quoteExport.ts:2484:        : q.industryTemplate.includes("manufacturing")
src/utils/quoteExport.ts:2486:          : q.industryTemplate.includes("data-center")
src/utils/quoteExport.ts:2488:            : q.industryTemplate.includes("hospital")
src/utils/quoteExport.ts:2490:              : q.industryTemplate.includes("cold-storage")
src/utils/quoteExport.ts:2728:      <li>Savings estimates assume typical ${industryName.toLowerCase()} load profiles and may vary based on actual usage patterns and operational strategy.</li>

=== CENTRAL CALC ENTRYPOINTS ===
src/services/bessDataService.ts:7: *   ‚Üí useCasePowerCalculations.ts - calculateUseCasePower(slug, data)
src/services/bessDataService.ts:8: *   ‚Üí evChargingCalculations.ts - calculateEVHubPower(config)
src/services/bessDataService.ts:11: *   ‚Üí centralizedCalculations.ts - calculateFinancialMetrics(params)
src/services/bessDataService.ts:16: *   ‚Üí equipmentCalculations.ts - calculateEquipmentBreakdown()
src/services/bessDataService.ts:19: *   ‚Üí unifiedQuoteCalculator.ts - calculateQuote(params) ‚Üê USE THIS!
src/services/bessDataService.ts:540:export function calculateBESSSize(params: {
src/services/bessDataService.ts:605: * Use `calculateFinancialMetrics()` from `centralizedCalculations.ts` instead!
src/services/bessDataService.ts:614: * import { calculateBESSFinancials } from './bessDataService';
src/services/bessDataService.ts:615: * const result = calculateBESSFinancials(inputs);
src/services/bessDataService.ts:618: * import { calculateFinancialMetrics } from './centralizedCalculations';
src/services/bessDataService.ts:619: * const result = await calculateFinancialMetrics({
src/services/bessDataService.ts:627:export function calculateBESSFinancials(inputs: BESSFinancialInputs): {
src/services/bessDataService.ts:638:    "‚ö†Ô∏è DEPRECATED: calculateBESSFinancials() is deprecated and will be removed in v2.0.\n" +
src/services/bessDataService.ts:640:      "‚úÖ Use: calculateFinancialMetrics() from src/services/centralizedCalculations.ts\n" +
src/services/bessDataService.ts:729:  financials: ReturnType<typeof calculateBESSFinancials>;
src/services/bessDataService.ts:744:  const sizing = calculateBESSSize({
src/services/bessDataService.ts:761:  const financials = calculateBESSFinancials(financialInputs);
src/services/DEPRECATION_STATUS.md:10:‚îú‚îÄ‚îÄ TrueQuoteEngineV2.ts         # Prime sub (SSOT for quotes)
src/services/DEPRECATION_STATUS.md:13:‚îú‚îÄ‚îÄ calculators/
src/services/DEPRECATION_STATUS.md:31:| TrueQuoteEngine.ts | DEPRECATED | useTrueQuote.ts, loadCalculator.ts | Q1 2026 |
src/services/DEPRECATION_STATUS.md:48:- Quote generation flow ‚Üí `MerlinOrchestrator.ts` ‚Üí `TrueQuoteEngineV2.ts`
src/services/DEPRECATION_STATUS.md:59:3. Update useTrueQuote.ts to use TrueQuoteEngineV2
src/services/DEPRECATION_STATUS.md:60:4. Delete old TrueQuoteEngine.ts
src/services/featureGatingService.ts:486:    financingCalculator: "Financing calculator",
src/services/generatorPricingService.ts:227:  calculateGeneratorCost(
src/services/generatorPricingService.ts:313:  calculateAnnualOperatingCost(
src/services/weatherService.ts:88:function calculateDegreeDays(avgTemp: number): { heating: number; cooling: number } {
src/services/weatherService.ts:122:    const { heating, cooling } = calculateDegreeDays(avgTemp);
src/services/weatherService.ts:168:    const { heating, cooling } = calculateDegreeDays(avgTemp);
src/services/gridSynkBESSCalculator.ts:6: * BESS is auto-calculated based on peak demand and duration - NOT user-adjustable.
src/services/gridSynkBESSCalculator.ts:9: * - BESS power is calculated from peak demand √ó application ratio
src/services/gridSynkBESSCalculator.ts:10: * - BESS capacity is calculated from power √ó duration √∑ efficiency factors
src/services/gridSynkBESSCalculator.ts:118: * const result = calculateBESS({
src/services/gridSynkBESSCalculator.ts:126:export function calculateBESS(inputs: BESSCalculationInputs): BESSCalculationResult {
src/services/gridSynkBESSCalculator.ts:169: * Recalculate BESS when duration changes.
src/services/gridSynkBESSCalculator.ts:172:export function recalculateBESSForDuration(
src/services/gridSynkBESSCalculator.ts:177:  return calculateBESS({
src/services/gridSynkBESSCalculator.ts:196:  const result = calculateBESS(inputs);
src/services/gridSynkBESSCalculator.ts:213:export default calculateBESS;
src/services/_deprecated/TrueQuoteEngine.ts:6: * - TrueQuoteEngineV2.ts - Prime sub contractor (SSOT)
src/services/_deprecated/TrueQuoteEngine.ts:7: * - calculators/*.ts - Modular calculation functions
src/services/_deprecated/TrueQuoteEngine.ts:12: * - useTrueQuote.ts hook (powers TrueQuoteVerifyBadge)
src/services/_deprecated/TrueQuoteEngine.ts:124:export interface TrueQuoteInput {
src/services/_deprecated/TrueQuoteEngine.ts:137:export interface TrueQuoteResult {
src/services/_deprecated/TrueQuoteEngine.ts:144:    options: TrueQuoteInput["options"];
src/services/_deprecated/TrueQuoteEngine.ts:503:export class TrueQuoteEngine {
src/services/_deprecated/TrueQuoteEngine.ts:504:  private static instance: TrueQuoteEngine;
src/services/_deprecated/TrueQuoteEngine.ts:507:  public static getInstance(): TrueQuoteEngine {
src/services/_deprecated/TrueQuoteEngine.ts:508:    if (!TrueQuoteEngine.instance) {
src/services/_deprecated/TrueQuoteEngine.ts:509:      TrueQuoteEngine.instance = new TrueQuoteEngine();
src/services/_deprecated/TrueQuoteEngine.ts:511:    return TrueQuoteEngine.instance;
src/services/_deprecated/TrueQuoteEngine.ts:514:  public calculate(input: TrueQuoteInput): TrueQuoteResult {
src/services/_deprecated/TrueQuoteEngine.ts:520:    console.log("üîç TrueQuote Engine - INPUT DATA");
src/services/_deprecated/TrueQuoteEngine.ts:547:    const { peakDemandKW, powerSteps } = this.calculatePeakDemand(industryConfig, input.industry.facilityData, stepNum);
src/services/_deprecated/TrueQuoteEngine.ts:551:    console.log("üìä TrueQuote Engine - PEAK DEMAND RESULTS");
src/services/_deprecated/TrueQuoteEngine.ts:593:    let generator: TrueQuoteResult["results"]["generator"] | undefined;
src/services/_deprecated/TrueQuoteEngine.ts:619:    let solar: TrueQuoteResult["results"]["solar"] | undefined;
src/services/_deprecated/TrueQuoteEngine.ts:641:    let evCharging: TrueQuoteResult["results"]["evCharging"] | undefined;
src/services/_deprecated/TrueQuoteEngine.ts:768:  private calculatePeakDemand(config: IndustryConfig, facilityData: Record<string, any>, startStep: number): { peakDemandKW: number; powerSteps: CalculationStep[] } {
src/services/_deprecated/TrueQuoteEngine.ts:948:export const trueQuoteEngine = TrueQuoteEngine.getInstance();
src/services/_deprecated/TrueQuoteEngine.ts:950:export function calculateTrueQuote(input: TrueQuoteInput): TrueQuoteResult {
src/services/_deprecated/TrueQuoteEngine.ts:951:  return trueQuoteEngine.calculate(input);
src/services/_deprecated/TrueQuoteEngine.ts:954:export default TrueQuoteEngine;
src/services/_deprecated/README.md:5:## TrueQuoteEngine.ts (v1)
src/services/_deprecated/README.md:11:- `TrueQuoteEngineV2.ts` - Prime sub contractor (SSOT)
src/services/_deprecated/README.md:12:- `calculators/*.ts` - Modular calculation functions
src/services/_deprecated/README.md:21:If you're updating old code that imported from TrueQuoteEngine.ts:
src/services/_deprecated/README.md:25:import { calculateTrueQuote } from '@/services/TrueQuoteEngine';
src/services/monteCarloService.ts:33: * SOURCES (TrueQuote‚Ñ¢):
src/services/monteCarloService.ts:110:  /** TrueQuote‚Ñ¢ audit trail */
src/services/monteCarloService.ts:117:    calculatedAt: string;
src/services/monteCarloService.ts:223:    const irr = calculateIRR(
src/services/monteCarloService.ts:328:      calculatedAt: new Date().toISOString(),
src/services/monteCarloService.ts:383:      lowNPV = calculateAdjustedNPV(
src/services/monteCarloService.ts:390:      highNPV = calculateAdjustedNPV(
src/services/monteCarloService.ts:398:      lowNPV = calculateAdjustedNPV(
src/services/monteCarloService.ts:405:      highNPV = calculateAdjustedNPV(
src/services/monteCarloService.ts:414:      lowNPV = calculateAdjustedNPV(
src/services/monteCarloService.ts:422:      highNPV = calculateAdjustedNPV(
src/services/monteCarloService.ts:444:    const npvWithFullITC = calculateAdjustedNPV(
src/services/monteCarloService.ts:451:    const npvWithMinITC = calculateAdjustedNPV(
src/services/monteCarloService.ts:525:function calculateAdjustedNPV(
src/services/monteCarloService.ts:544:function calculateIRR(
src/services/powerGapAnalysis.ts:4: * The intelligence behind Merlin - calculates the gap between what a customer NEEDS
src/services/powerGapAnalysis.ts:55:export async function calculatePowerGap(
src/services/powerGapAnalysis.ts:72:  const needed = calculateNeededCapacity(useCaseSlug, answers, baseline);
src/services/powerGapAnalysis.ts:142:function calculateNeededCapacity(
src/services/powerGapAnalysis.ts:149:      return calculateOfficeNeeds(answers, baseline);
src/services/powerGapAnalysis.ts:152:      return calculateEVChargingNeeds(answers, baseline);
src/services/powerGapAnalysis.ts:155:      return calculateHotelNeeds(answers, baseline);
src/services/powerGapAnalysis.ts:158:      return calculateDatacenterNeeds(answers, baseline);
src/services/powerGapAnalysis.ts:161:      return calculateApartmentNeeds(answers, baseline);
src/services/powerGapAnalysis.ts:164:      return calculateRetailNeeds(answers, baseline);
src/services/powerGapAnalysis.ts:179:function calculateOfficeNeeds(
src/services/powerGapAnalysis.ts:225:function calculateEVChargingNeeds(
src/services/powerGapAnalysis.ts:249:function calculateHotelNeeds(
src/services/powerGapAnalysis.ts:278:function calculateDatacenterNeeds(
src/services/powerGapAnalysis.ts:303:function calculateApartmentNeeds(
src/services/powerGapAnalysis.ts:331:function calculateRetailNeeds(
src/services/recommendationFinancialMetrics.ts:11:import { calculateFinancialMetrics, type FinancialCalculationInput } from "./centralizedCalculations";
src/services/recommendationFinancialMetrics.ts:12:import { calculateDatabaseBaseline } from "./baselineService";
src/services/recommendationFinancialMetrics.ts:44:export async function calculateRecommendationFinancials(
src/services/recommendationFinancialMetrics.ts:51:  const baseline = await calculateDatabaseBaseline(
src/services/recommendationFinancialMetrics.ts:63:    results.bess = await calculateBESSFinancials(input, baseline);
src/services/recommendationFinancialMetrics.ts:68:    results.solar = await calculateSolarFinancials(
src/services/recommendationFinancialMetrics.ts:77:    results.generator = await calculateGeneratorFinancials(
src/services/recommendationFinancialMetrics.ts:86:    results.evCharging = await calculateEVChargingFinancials(
src/services/recommendationFinancialMetrics.ts:99:async function calculateBESSFinancials(
src/services/recommendationFinancialMetrics.ts:125:    calculateFinancialMetrics(conservativeInput),
src/services/recommendationFinancialMetrics.ts:126:    calculateFinancialMetrics(aggressiveInput),
src/services/recommendationFinancialMetrics.ts:152:async function calculateSolarFinancials(
src/services/recommendationFinancialMetrics.ts:184:    calculateFinancialMetrics(conservativeInput),
src/services/recommendationFinancialMetrics.ts:185:    calculateFinancialMetrics(aggressiveInput),
src/services/recommendationFinancialMetrics.ts:211:async function calculateGeneratorFinancials(
src/services/recommendationFinancialMetrics.ts:241:    calculateFinancialMetrics(conservativeInput),
src/services/recommendationFinancialMetrics.ts:242:    calculateFinancialMetrics(aggressiveInput),
src/services/recommendationFinancialMetrics.ts:268:async function calculateEVChargingFinancials(
src/services/recommendationFinancialMetrics.ts:298:    calculateFinancialMetrics(conservativeInput),
src/services/recommendationFinancialMetrics.ts:299:    calculateFinancialMetrics(aggressiveInput),
src/services/priceAlertService.ts:124:      relevanceScore: calculateRelevanceScore(article, "battery_kwh"),
src/services/priceAlertService.ts:160:      relevanceScore: calculateRelevanceScore(article, "battery_mwh"),
src/services/priceAlertService.ts:203:      relevanceScore: calculateRelevanceScore(article, "battery_kwh"),
src/services/priceAlertService.ts:264:function calculateRelevanceScore(article: NewsArticle, alertType: string): number {
src/services/depreciationService.ts:215:export async function calculateDepreciation(params: {
src/services/depreciationService.ts:318:export async function calculateFirstYearBenefit(params: {
src/services/depreciationService.ts:409:      const result = await calculateFirstYearBenefit({
src/services/depreciationService.ts:437:  calculateDepreciation,
src/services/depreciationService.ts:438:  calculateFirstYearBenefit,
src/services/unifiedPricingService.ts:422: * ‚ö†Ô∏è UPDATED Dec 2025: Now uses scale-based pricing to match calculateEquipmentBreakdown()
src/services/unifiedPricingService.ts:430:    // PRIORITY 1: Try pricing_configurations for scale-based pricing (matches calculateEquipmentBreakdown)
src/services/supabaseClient.ts:374:  async calculateBESSPricing(energyCapacityMWh: number, configId?: string): Promise<number | null> {
src/services/supabaseClient.ts:375:    const { data, error } = await supabase.rpc("calculate_bess_pricing", {
src/services/evChargingHubIndustryProfile.ts:619:export function calculateEVHubProfile(inputs: EVHubInputs): EVHubCalculations {
src/services/evChargingHubIndustryProfile.ts:811:  calculateEVHubProfile,
src/services/merlin/index.ts:34:  TrueQuoteAuthenticatedResult,
src/services/merlin/index.ts:35:  TrueQuoteRejection,
src/services/merlin/index.ts:43:export { getEngineInfo } from '../TrueQuoteEngineV2';
src/services/agricultureIndustryProfile.ts:1243:export function calculateAgricultureProfile(inputs: AgricultureInputs): AgricultureProfileResult {
src/services/agricultureIndustryProfile.ts:1432:      ? calculateSeasonMonths(inputs.irrigationSeasonStart, inputs.irrigationSeasonEnd)
src/services/agricultureIndustryProfile.ts:1440:  // If annual kWh wasn't calculated from profile, estimate from peak
src/services/agricultureIndustryProfile.ts:1548:// Helper function to calculate season months
src/services/agricultureIndustryProfile.ts:1549:function calculateSeasonMonths(start: string, end: string): number {
src/services/data/constants.ts:11: * Migrated from: TrueQuoteEngine.ts TRUEQUOTE_CONSTANTS
src/services/data/constants.ts:17:// TRUEQUOTE CONSTANTS (migrated from TrueQuoteEngine.ts)
src/services/data/constants.ts:81:// DEFAULTS (structured format for calculators)
src/services/alertNotificationService.ts:78: * Call this from the validation service when score is calculated
src/services/magicFitScenarios.ts:18:import { calculateBESS } from "./gridSynkBESSCalculator";
src/services/magicFitScenarios.ts:19:import { calculateFinancialsSync } from "./compareConfigFinancials";
src/services/magicFitScenarios.ts:47:  const essentialsBESS = calculateBESS({
src/services/magicFitScenarios.ts:53:  const essentialsFinancials = calculateFinancialsSync({
src/services/magicFitScenarios.ts:94:  const balancedBESS = calculateBESS({
src/services/magicFitScenarios.ts:103:  const balancedFinancials = calculateFinancialsSync({
src/services/magicFitScenarios.ts:145:  const maxBESS = calculateBESS({
src/services/magicFitScenarios.ts:155:  const maxFinancials = calculateFinancialsSync({
src/services/officeIndustryProfile.ts:955:export function calculateOfficeProfile(inputs: OfficeInputs): OfficeCalculations {
src/services/officeIndustryProfile.ts:1129:  calculateOfficeProfile,
src/scripts/audit-critical-files.sh:19:  "src/core/calculations/QuoteEngine.ts"
src/services/marketDataIntegrationService.ts:600: * This calls the database function calculate_weighted_price()
src/services/marketDataIntegrationService.ts:602:export async function calculateWeightedPrice(
src/services/marketDataIntegrationService.ts:617:    const { data, error } = await supabase.rpc("calculate_weighted_price", {
src/services/marketDataIntegrationService.ts:625:      console.error("Failed to calculate weighted price:", error);
src/services/pricingConfigService.ts:324:        const savedConfig = localStorage.getItem("pricingConfiguration");
src/services/pricingConfigService.ts:349:        const savedConfig = localStorage.getItem("pricingConfiguration");
src/services/pricingConfigService.ts:490:        notes: notes || `Updated via pricingConfigService`,
src/services/pricingConfigService.ts:534:      const savedConfig = localStorage.getItem("pricingConfiguration");
src/services/pricingConfigService.ts:551:        localStorage.removeItem("pricingConfiguration");
src/services/pricingConfigService.ts:575:      localStorage.setItem("pricingConfiguration", JSON.stringify(this.config));
src/services/pricingConfigService.ts:578:      localStorage.removeItem("pricingConfiguration");
src/services/pricingConfigService.ts:582:    window.dispatchEvent(new CustomEvent("pricingConfigUpdated", { detail: this.config }));
src/services/pricingConfigService.ts:598:      localStorage.setItem("pricingConfiguration", JSON.stringify(this.config));
src/services/pricingConfigService.ts:600:      localStorage.removeItem("pricingConfiguration");
src/services/pricingConfigService.ts:603:    window.dispatchEvent(new CustomEvent("pricingConfigUpdated", { detail: this.config }));
src/services/pricingConfigService.ts:617:    localStorage.removeItem("pricingConfiguration");
src/services/pricingConfigService.ts:619:    window.dispatchEvent(new CustomEvent("pricingConfigUpdated", { detail: this.config }));
src/services/pricingConfigService.ts:642:          localStorage.setItem("pricingConfiguration", JSON.stringify(this.config));
src/services/pricingConfigService.ts:644:          localStorage.removeItem("pricingConfiguration");
src/services/pricingConfigService.ts:647:        window.dispatchEvent(new CustomEvent("pricingConfigUpdated", { detail: this.config }));
src/services/pricingConfigService.ts:751:export const pricingConfigService = new PricingConfigService();
src/services/pricingConfigService.ts:758:  return pricingConfigService.ready();
src/services/solarSizingService.ts:76:export function calculateSolarBESSSystem(inputs: SolarBESSSystemInputs): SolarBESSSystemResults {
src/services/solarSizingService.ts:333:export function calculateWireSize(
src/services/solarSizingService.ts:359:export function calculatePanelArea(totalWattage: number): {
src/services/solarSizingService.ts:377:export function calculateSolarPayback(
src/services/solarSizingService.ts:414:  calculateSolarBESSSystem,
src/services/solarSizingService.ts:418:  calculateWireSize,
src/services/solarSizingService.ts:419:  calculatePanelArea,
src/services/solarSizingService.ts:420:  calculateSolarPayback,
src/services/ravsService.ts:191:export function calculateRAVS(input: RAVSInput): RAVSScore {
src/services/ravsService.ts:193:  const financialResult = calculateFinancialScore(input);
src/services/ravsService.ts:194:  const executionResult = calculateExecutionScore(input);
src/services/ravsService.ts:195:  const marketResult = calculateMarketScore(input);
src/services/ravsService.ts:196:  const operationalResult = calculateOperationalScore(input);
src/services/ravsService.ts:213:  const confidenceInterval = calculateConfidenceInterval(
src/services/ravsService.ts:275:function calculateFinancialScore(input: RAVSInput): ComponentResult {
src/services/ravsService.ts:407:function calculateExecutionScore(input: RAVSInput): ComponentResult {
src/services/ravsService.ts:466:function calculateMarketScore(input: RAVSInput): ComponentResult {
src/services/ravsService.ts:551:function calculateOperationalScore(input: RAVSInput): ComponentResult {
src/services/ravsService.ts:653:function calculateConfidenceInterval(
src/services/ravsService.ts:772:  return calculateRAVS({
src/services/ravsService.ts:837:export default calculateRAVS;
src/services/stateIncentivesService.ts:4: * Fetches state-level incentives from Supabase and calculates total incentives
src/services/stateIncentivesService.ts:1046:export async function calculateIncentives(
src/services/stateIncentivesService.ts:1058:  // For more accurate calculation, pass itcEligibleCost directly from TrueQuoteEngine
src/tests/runCalculationTests.ts:15:import { calculateUseCasePower, POWER_DENSITY_STANDARDS, type PowerCalculationResult } from "../services/useCasePowerCalculations";
src/tests/runCalculationTests.ts:270:    const result = calculateUseCasePower(test.slug, test.inputs);
src/services/pvWattsService.ts:18: * DATA SOURCES (TrueQuote‚Ñ¢ compliant):
src/services/pvWattsService.ts:92:  /** TrueQuote‚Ñ¢ attribution */
src/services/pvWattsService.ts:97:    calculatedAt: string;
src/services/pvWattsService.ts:321:        calculatedAt: new Date().toISOString(),
src/services/pvWattsService.ts:390:      calculatedAt: new Date().toISOString(),
src/services/pvWattsService.ts:451:export function calculateSolarBESSIntegration(
src/services/pvWattsService.ts:493:  calculateSolarBESSIntegration,
src/services/hospitalIndustryProfile.ts:987:export function calculateHospitalProfile(inputs: HospitalInputs): HospitalCalculations {
src/services/hospitalIndustryProfile.ts:1167:  calculateHospitalProfile,
src/services/TrueQuoteEngineV2.ts:7: * 2. Run all calculators (load, BESS, solar, generator, EV, financials)
src/services/TrueQuoteEngineV2.ts:10: * 5. Return TrueQuoteAuthenticatedResult
src/services/TrueQuoteEngineV2.ts:14: * - All calculations delegated to dedicated calculator modules
src/services/TrueQuoteEngineV2.ts:18: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/TrueQuoteEngineV2.ts:24:  TrueQuoteBaseCalculation,
src/services/TrueQuoteEngineV2.ts:25:  TrueQuoteAuthenticatedResult,
src/services/TrueQuoteEngineV2.ts:26:  TrueQuoteRejection,
src/services/TrueQuoteEngineV2.ts:31:import { calculateLoad } from "./calculators/loadCalculator";
src/services/TrueQuoteEngineV2.ts:32:import { calculateBESS } from "./calculators/bessCalculator";
src/services/TrueQuoteEngineV2.ts:33:import { calculateSolar, getSolarRating } from "./calculators/solarCalculator";
src/services/TrueQuoteEngineV2.ts:34:import { calculateGenerator, isHighRiskWeatherState } from "./calculators/generatorCalculator";
src/services/TrueQuoteEngineV2.ts:35:import { calculateEV } from "./calculators/evCalculator";
src/services/TrueQuoteEngineV2.ts:36:import { calculateFinancials } from "./calculators/financialCalculator";
src/services/TrueQuoteEngineV2.ts:57:): Promise<TrueQuoteAuthenticatedResult | TrueQuoteRejection> {
src/services/TrueQuoteEngineV2.ts:59:  console.log("üî∑ TrueQuote v2: Processing quote request");
src/services/TrueQuoteEngineV2.ts:68:  const loadResult = calculateLoad({
src/services/TrueQuoteEngineV2.ts:77:  const bessResult = calculateBESS({
src/services/TrueQuoteEngineV2.ts:90:  const solarResult = calculateSolar({
src/services/TrueQuoteEngineV2.ts:117:  const generatorResult = calculateGenerator({
src/services/TrueQuoteEngineV2.ts:137:  const evResult = calculateEV({
src/services/TrueQuoteEngineV2.ts:150:  const financialResult = calculateFinancials({
src/services/TrueQuoteEngineV2.ts:174:  const baseCalculation: TrueQuoteBaseCalculation = {
src/services/TrueQuoteEngineV2.ts:299:    console.error("‚ùå TrueQuote: Proposal REJECTED");
src/services/TrueQuoteEngineV2.ts:300:    return authResult as TrueQuoteRejection;
src/services/TrueQuoteEngineV2.ts:316:  const result: TrueQuoteAuthenticatedResult = {
src/services/TrueQuoteEngineV2.ts:353:      `Quote generated by TrueQuote Engine v${ENGINE_VERSION}`,
src/services/TrueQuoteEngineV2.ts:360:  console.log("‚úÖ TrueQuote v2: Quote authenticated!");
src/services/savingsScoutCalculations.ts:61:export function calculateSavingsOpportunities(
src/services/savingsScoutCalculations.ts:321:  const opportunities = calculateSavingsOpportunities(
src/services/unifiedQuoteCalculator.ts:31:import { calculateEquipmentBreakdown, type EquipmentBreakdown } from "@/utils/equipmentCalculations";
src/services/unifiedQuoteCalculator.ts:32:import { calculateFinancialMetrics } from "./centralizedCalculations";
src/services/unifiedQuoteCalculator.ts:134:    calculatedAt: Date;
src/services/unifiedQuoteCalculator.ts:262:export async function calculateQuote(input: QuoteInput): Promise<QuoteResult> {
src/services/unifiedQuoteCalculator.ts:382:  const equipment = await calculateEquipmentBreakdown(
src/services/unifiedQuoteCalculator.ts:562:  const financials = await calculateFinancialMetrics({
src/services/unifiedQuoteCalculator.ts:574:  // Step 4: Recalculate payback using ACTUAL costs from equipment breakdown
src/services/unifiedQuoteCalculator.ts:775:      calculatedAt: new Date(),
src/services/unifiedQuoteCalculator.ts:804:        itcRate: itcResult.totalRate, // DYNAMIC: ITC rate from IRA 2022 calculator
src/hooks/_deprecated/useTrueQuote.ts:7: * This hook generates TrueQuote worksheet data from wizard state
src/hooks/_deprecated/useTrueQuote.ts:8: * for the TrueQuote Verify Badge component.
src/hooks/_deprecated/useTrueQuote.ts:10: * CRITICAL: ALL calculations come from TrueQuoteEngine.ts
src/hooks/_deprecated/useTrueQuote.ts:16:  TrueQuoteWorksheetData,
src/hooks/_deprecated/useTrueQuote.ts:20:} from "@/components/wizard/v6/components/TrueQuoteVerifyBadge";
src/hooks/_deprecated/useTrueQuote.ts:23:// SSOT IMPORTS - Use TrueQuoteEngine for ALL calculations
src/hooks/_deprecated/useTrueQuote.ts:25:import { calculateTrueQuote } from "@/services/_deprecated/TrueQuoteEngine";
src/hooks/_deprecated/useTrueQuote.ts:27:import { mapWizardStateToTrueQuoteInput } from "@/components/wizard/v6/utils/trueQuoteMapper";
src/hooks/_deprecated/useTrueQuote.ts:31:// All industry configs now come from TrueQuoteEngine.INDUSTRY_CONFIGS
src/hooks/_deprecated/useTrueQuote.ts:91: * Hook to generate TrueQuote worksheet data from wizard state
src/hooks/_deprecated/useTrueQuote.ts:93: * SSOT: Uses TrueQuoteEngine.calculate() for ALL calculations
src/hooks/_deprecated/useTrueQuote.ts:97:export function useTrueQuote(wizardState: any): TrueQuoteWorksheetData {
src/hooks/_deprecated/useTrueQuote.ts:102:    // STEP 1: Call TrueQuoteEngine (SSOT)
src/hooks/_deprecated/useTrueQuote.ts:108:      trueQuoteInput = mapWizardStateToTrueQuoteInput(wizardState);
src/hooks/_deprecated/useTrueQuote.ts:109:      trueQuoteResult = calculateTrueQuote(trueQuoteInput);
src/hooks/_deprecated/useTrueQuote.ts:111:      console.log('‚úÖ useTrueQuote: TrueQuoteEngine result:', {
src/hooks/_deprecated/useTrueQuote.ts:117:      console.error('‚ùå useTrueQuote: TrueQuoteEngine failed:', error);
src/hooks/_deprecated/useTrueQuote.ts:158:          calculated: 0,
src/hooks/_deprecated/useTrueQuote.ts:161:          explanation: `TrueQuote Engine calculation failed: ${error instanceof Error ? error.message : 'Unknown error'}`,
src/hooks/_deprecated/useTrueQuote.ts:169:    // STEP 2: Extract calculation steps from TrueQuoteEngine result
src/hooks/_deprecated/useTrueQuote.ts:193:    // STEP 3: Check for deviations between displayed and calculated
src/hooks/_deprecated/useTrueQuote.ts:194:    // Compare what the user sees vs what TrueQuote calculated
src/hooks/_deprecated/useTrueQuote.ts:210:            calculated: trueQuoteResult.results.bess.powerKW,
src/hooks/_deprecated/useTrueQuote.ts:213:            explanation: "Displayed BESS power differs from calculated value",
src/hooks/_deprecated/useTrueQuote.ts:227:          calculated: trueQuoteResult.results.generator?.capacityKW || 0,
src/hooks/_deprecated/useTrueQuote.ts:293:export default useTrueQuote;
src/services/pricingTierService.ts:12: * - Source tracking and confidence levels for TrueQuote compliance
src/services/__tests__/carWash16QCalculator.test.ts:10:import { calculateCarWash16Q, type CarWash16QInput } from '../carWash16QCalculator';
src/services/__tests__/carWash16QCalculator.test.ts:37:    it('should calculate correct peak demand for minimal equipment', () => {
src/services/__tests__/carWash16QCalculator.test.ts:38:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:46:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:57:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:66:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:103:    it('should calculate correct peak demand for standard equipment', () => {
src/services/__tests__/carWash16QCalculator.test.ts:104:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:113:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:123:    it('should calculate demand charge savings', () => {
src/services/__tests__/carWash16QCalculator.test.ts:124:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:132:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:173:    it('should calculate high peak demand for full equipment', () => {
src/services/__tests__/carWash16QCalculator.test.ts:174:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:182:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:193:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:201:    it('should calculate substantial annual savings with TOU rates', () => {
src/services/__tests__/carWash16QCalculator.test.ts:202:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:210:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:251:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:260:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:292:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:318:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:326:  // TEST SCENARIO 6: TrueQuote‚Ñ¢ Source Attribution
src/services/__tests__/carWash16QCalculator.test.ts:328:  describe('TrueQuote‚Ñ¢ Source Attribution', () => {
src/services/__tests__/carWash16QCalculator.test.ts:349:      const result = calculateCarWash16Q(input);
src/services/__tests__/carWash16QCalculator.test.ts:362:      const result = calculateCarWash16Q(input);
src/hooks/_deprecated/README.md:5:## useTrueQuote.ts
src/hooks/_deprecated/README.md:11:This hook was intended to power TrueQuoteVerifyBadge but was never integrated.
src/services/scenarioGenerator.ts:15:import { calculateQuote, type QuoteResult } from "./unifiedQuoteCalculator";
src/services/scenarioGenerator.ts:16:// ‚ö†Ô∏è NOTE: calculateArbitrageSavings was removed from constants.ts (SSOT violation)
src/services/scenarioGenerator.ts:17:// This file is legacy/experimental and may need refactoring to use TrueQuote results
src/services/scenarioGenerator.ts:136:  // For WizardV6, use TrueQuote results instead.
src/services/scenarioGenerator.ts:208:    quoteResult = await calculateQuote({
src/services/scenarioGenerator.ts:235:  const confidenceScore = calculateConfidenceScore(input, quoteResult);
src/services/scenarioGenerator.ts:347:function calculateConfidenceScore(
src/tests/calculation-smoke-tests.test.ts:15:  calculateUseCasePower,
src/tests/calculation-smoke-tests.test.ts:20:import { calculateDatabaseBaseline } from "@/services/baselineService";
src/tests/calculation-smoke-tests.test.ts:21:import { calculateFinancialMetrics } from "@/services/centralizedCalculations";
src/tests/calculation-smoke-tests.test.ts:22:import { calculateQuote } from "@/services/unifiedQuoteCalculator";
src/tests/calculation-smoke-tests.test.ts:23:import { calculateEquipmentBreakdown } from "@/utils/equipmentCalculations";
src/tests/calculation-smoke-tests.test.ts:124:      const result = calculateUseCasePower(slug, input);
src/tests/calculation-smoke-tests.test.ts:146:    const result = calculateUseCasePower("unknown-use-case", {});
src/tests/calculation-smoke-tests.test.ts:153:    const result = calculateUseCasePower("office", {});
src/tests/calculation-smoke-tests.test.ts:165:    const small = calculateUseCasePower("hotel", { rooms: 50 });
src/tests/calculation-smoke-tests.test.ts:166:    const medium = calculateUseCasePower("hotel", { rooms: 100 });
src/tests/calculation-smoke-tests.test.ts:167:    const large = calculateUseCasePower("hotel", { rooms: 200 });
src/tests/calculation-smoke-tests.test.ts:179:    const small = calculateUseCasePower("office", { squareFeet: 25000 });
src/tests/calculation-smoke-tests.test.ts:180:    const large = calculateUseCasePower("office", { squareFeet: 100000 });
src/tests/calculation-smoke-tests.test.ts:187:    const small = calculateUseCasePower("warehouse", { squareFeet: 100000 });
src/tests/calculation-smoke-tests.test.ts:188:    const large = calculateUseCasePower("warehouse", { squareFeet: 400000 });
src/tests/calculation-smoke-tests.test.ts:199:    const r1 = calculateUseCasePower("hotel", { rooms: 100 });
src/tests/calculation-smoke-tests.test.ts:200:    const r2 = calculateUseCasePower("hotel", { numberOfRooms: 100 });
src/tests/calculation-smoke-tests.test.ts:201:    const r3 = calculateUseCasePower("hotel", { roomCount: 100 });
src/tests/calculation-smoke-tests.test.ts:209:    const r1 = calculateUseCasePower("warehouse", { squareFeet: 100000 });
src/tests/calculation-smoke-tests.test.ts:210:    const r2 = calculateUseCasePower("warehouse", { sqFt: 100000 });
src/tests/calculation-smoke-tests.test.ts:211:    const r3 = calculateUseCasePower("warehouse", { warehouseSqFt: 100000 });
src/tests/calculation-smoke-tests.test.ts:222:  test("calculateFinancialMetrics returns valid structure", async () => {
src/tests/calculation-smoke-tests.test.ts:223:    const result = await calculateFinancialMetrics({
src/tests/calculation-smoke-tests.test.ts:242:    const lowRate = await calculateFinancialMetrics({
src/tests/calculation-smoke-tests.test.ts:249:    const highRate = await calculateFinancialMetrics({
src/tests/calculation-smoke-tests.test.ts:264:  test("calculateEquipmentBreakdown returns valid structure", async () => {
src/tests/calculation-smoke-tests.test.ts:265:    const result = await calculateEquipmentBreakdown(
src/tests/calculation-smoke-tests.test.ts:286:    const small = await calculateEquipmentBreakdown(
src/tests/calculation-smoke-tests.test.ts:297:    const large = await calculateEquipmentBreakdown(
src/tests/calculation-smoke-tests.test.ts:316:  test("calculateQuote produces complete quote for hotel", async () => {
src/tests/calculation-smoke-tests.test.ts:317:    const result = await calculateQuote({
src/tests/calculation-smoke-tests.test.ts:341:  test("calculateQuote produces complete quote for car wash", async () => {
src/tests/calculation-smoke-tests.test.ts:342:    const result = await calculateQuote({
src/tests/calculation-smoke-tests.test.ts:362:  test("calculateQuote produces complete quote for EV charging", async () => {
src/tests/calculation-smoke-tests.test.ts:363:    const result = await calculateQuote({
src/tests/calculation-smoke-tests.test.ts:436:  test("calculateDatabaseBaseline returns valid structure", async () => {
src/tests/calculation-smoke-tests.test.ts:437:    const result = await calculateDatabaseBaseline("hotel", 1, { rooms: 150 });
src/tests/calculation-smoke-tests.test.ts:448:    const result = await calculateDatabaseBaseline("ev-charging", 1, {
src/tests/calculation-smoke-tests.test.ts:458:    const userSpecified = await calculateDatabaseBaseline("office", 1, {
src/tests/calculation-smoke-tests.test.ts:463:    // Should use user's 5 MW, not calculate from sqft
src/services/smbPlatformService.ts:31:import { calculateQuote } from "./unifiedQuoteCalculator";
src/services/smbPlatformService.ts:32:import { calculateFinancialMetrics } from "./centralizedCalculations";
src/services/smbPlatformService.ts:365: * Uses the unified quote calculator with industry-specific defaults
src/services/smbPlatformService.ts:406:  // Use unified quote calculator
src/services/smbPlatformService.ts:407:  const quote = await calculateQuote({
src/services/smbPlatformService.ts:416:  const financials = await calculateFinancialMetrics({
src/services/smbPlatformService.ts:445:    // Quote from unified calculator
src/services/dataIntegrationService.ts:27:import { calculateBESSSize } from "./baselineService"; // Migrated from deprecated bessDataService
src/services/dataIntegrationService.ts:28:import { calculateFinancialMetrics } from "./centralizedCalculations";
src/services/dataIntegrationService.ts:29:import { calculateSolarBESSSystem } from "./solarSizingService";
src/services/dataIntegrationService.ts:188:    // ‚úÖ SINGLE SOURCE OF TRUTH: Use centralizedCalculations.calculateFinancialMetrics()
src/services/dataIntegrationService.ts:192:    // Use centralized financial metrics calculator (database-driven)
src/services/dataIntegrationService.ts:193:    const financialMetrics = await calculateFinancialMetrics({
src/services/dataIntegrationService.ts:202:    const sizing = calculateBESSSize({
src/services/dataIntegrationService.ts:219:      solarCalculations = calculateSolarBESSSystem({
src/services/dataIntegrationService.ts:459:  // ‚úÖ SINGLE SOURCE OF TRUTH: Use centralizedCalculations.calculateFinancialMetrics()
src/services/dataIntegrationService.ts:460:  const financialMetrics = await calculateFinancialMetrics({
src/services/dataIntegrationService.ts:469:  const sizing = calculateBESSSize({
src/services/dataIntegrationService.ts:480:    solarCalculations = calculateSolarBESSSystem({
src/services/pricingIntelligence.ts:244:      irr: calculateIRR(totalCapex, netAnnualRevenue, 15), // 15-year project life
src/services/pricingIntelligence.ts:245:      npv: calculateNPV(totalCapex, netAnnualRevenue, 15, 0.08), // 8% discount rate
src/services/pricingIntelligence.ts:246:      profitabilityIndex: calculateNPV(totalCapex, netAnnualRevenue, 15, 0.08) / totalCapex,
src/services/pricingIntelligence.ts:262:function calculateIRR(initialInvestment: number, annualCashFlow: number, years: number): number {
src/services/pricingIntelligence.ts:267:function calculateNPV(
src/tests/ssot-validation.test.ts:17:import { calculateUseCasePower } from "@/services/useCasePowerCalculations";
src/tests/ssot-validation.test.ts:139:    it(`${name}: ${testData.description} should calculate ${testData.expectedPowerMW.min}-${testData.expectedPowerMW.max} MW`, () => {
src/tests/ssot-validation.test.ts:140:      const result = calculateUseCasePower(testData.slug, testData.input);
src/tests/ssot-validation.test.ts:168:    const result = calculateUseCasePower("airport", {});
src/tests/ssot-validation.test.ts:177:    const result = calculateUseCasePower("warehouse", {});
src/tests/ssot-validation.test.ts:186:    const result = calculateUseCasePower("hotel", {});
src/tests/ssot-validation.test.ts:195:    const result = calculateUseCasePower("datacenter", {});
src/tests/ssot-validation.test.ts:210:    const result = calculateUseCasePower("datacenter", { rackCount: 5000, rackDensityKW: 8 });
src/tests/ssot-validation.test.ts:223:    const result = calculateUseCasePower("cold-storage", {
src/tests/ssot-validation.test.ts:235:    const result = calculateUseCasePower("cold-storage", {
src/tests/ssot-validation.test.ts:246:    const result = calculateUseCasePower("cold-storage", {
src/tests/ssot-validation.test.ts:283:    const calculatedRecommendation = 11800; // Merlin's recommendation
src/tests/ssot-validation.test.ts:286:    expect(userSelectedBatteryKW).not.toBe(calculatedRecommendation);
src/tests/ssot-validation.test.ts:297:  it("Same inputs to calculateUseCasePower should always produce same output", () => {
src/tests/ssot-validation.test.ts:300:    const result1 = calculateUseCasePower("warehouse", input);
src/tests/ssot-validation.test.ts:301:    const result2 = calculateUseCasePower("warehouse", input);
src/tests/ssot-validation.test.ts:302:    const result3 = calculateUseCasePower("warehouse", input);
src/tests/ssot-validation.test.ts:310:    const result1 = calculateUseCasePower("hotel", { roomCount: 100 });
src/tests/ssot-validation.test.ts:311:    const result2 = calculateUseCasePower("hotel", { numberOfRooms: 100 });
src/tests/ssot-validation.test.ts:312:    const result3 = calculateUseCasePower("hotel", { rooms: 100 });
src/tests/ssot-validation.test.ts:342:  it("Mixed EV charger configuration should calculate correctly", () => {
src/tests/ssot-validation.test.ts:343:    const result = calculateUseCasePower("ev-charging", {
src/tests/ssot-validation.test.ts:369:    const userSelectionResult = calculateUseCasePower("warehouse", userInput);
src/tests/ssot-validation.test.ts:371:    // STEP 2: Merlin Recommendation path (useWizardState.recalculate)
src/tests/ssot-validation.test.ts:373:    const merlinRecommendationResult = calculateUseCasePower("warehouse", userInput);
src/tests/ssot-validation.test.ts:382:    const small = calculateUseCasePower("warehouse", { squareFeet: 50000 });
src/tests/ssot-validation.test.ts:383:    const large = calculateUseCasePower("warehouse", { squareFeet: 200000 });
src/hooks/useBessQuoteBuilder.ts:543:        // Store calculated values for display in portfolio
src/hooks/useBessQuoteBuilder.ts:545:        bessCapEx: 0, // Will be recalculated when loaded
src/services/retailIndustryProfile.ts:831:export function calculateRetailProfile(inputs: RetailInputs): RetailCalculations {
src/services/retailIndustryProfile.ts:996:  calculateRetailProfile,
src/tests/trueQuoteDataFlowTest.ts:5: * @deprecated This test uses the legacy TrueQuoteEngine (v1).
src/tests/trueQuoteDataFlowTest.ts:6: * For new tests, use TrueQuoteEngineV2 via the Porsche 911 architecture.
src/tests/trueQuoteDataFlowTest.ts:9: * 1. Wizard State ‚Üí TrueQuoteMapper ‚Üí TrueQuoteEngine
src/tests/trueQuoteDataFlowTest.ts:10: * 2. TrueQuoteEngine calculations are correct
src/tests/trueQuoteDataFlowTest.ts:20:// @deprecated - Using legacy TrueQuoteEngine for backward compatibility
src/tests/trueQuoteDataFlowTest.ts:21:import { calculateTrueQuote, TRUEQUOTE_CONSTANTS } from '../services/_deprecated/TrueQuoteEngine';
src/tests/trueQuoteDataFlowTest.ts:22:import type { TrueQuoteInput, TrueQuoteResult } from '../services/_deprecated/TrueQuoteEngine';
src/tests/trueQuoteDataFlowTest.ts:77:const TEST_SCENARIOS: { name: string; input: TrueQuoteInput; expectations: any }[] = [
src/tests/trueQuoteDataFlowTest.ts:296:      // Should return 0 or throw error (no data to calculate from)
src/tests/trueQuoteDataFlowTest.ts:326:test('TrueQuoteEngine accepts valid hotel input', () => {
src/tests/trueQuoteDataFlowTest.ts:327:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:332:  const result = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:341:test('TrueQuoteEngine rejects unknown industry type', () => {
src/tests/trueQuoteDataFlowTest.ts:342:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:349:    calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:361:test('TrueQuoteEngine accepts all 18 industry types', () => {
src/tests/trueQuoteDataFlowTest.ts:372:      const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:377:      calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:404:        calculateTrueQuote(scenario.input);
src/tests/trueQuoteDataFlowTest.ts:418:  let result: TrueQuoteResult;
src/tests/trueQuoteDataFlowTest.ts:420:    result = calculateTrueQuote(scenario.input);
src/tests/trueQuoteDataFlowTest.ts:511:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:516:  const result = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:529:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:534:  const result = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:550:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:555:  const result = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:569:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:574:  const result = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:596:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:602:  const result1 = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:603:  const result2 = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:637:  // Build TrueQuoteInput (what trueQuoteMapper does)
src/tests/trueQuoteDataFlowTest.ts:638:  const trueQuoteInput: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:649:  const result = calculateTrueQuote(trueQuoteInput);
src/tests/trueQuoteDataFlowTest.ts:662:    message: 'Step 3 data should persist through to TrueQuote result',
src/tests/trueQuoteDataFlowTest.ts:667:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:674:  const baseResult = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:708:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:713:  const result = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:724:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:729:  const result = calculateTrueQuote(input);
src/tests/trueQuoteDataFlowTest.ts:749:  const input: TrueQuoteInput = {
src/tests/trueQuoteDataFlowTest.ts:754:  const result = calculateTrueQuote(input);
src/services/step4PreviewService.ts:6: * Uses the same constants as TrueQuoteEngineV2 for consistency.
src/services/step4PreviewService.ts:9: * Final values come from Step 5 MagicFit via TrueQuote.
src/services/step4PreviewService.ts:41:export function calculateSolarPreview(
src/services/step4PreviewService.ts:54:  // Size calculation (same formula used in TrueQuote)
src/services/step4PreviewService.ts:112:export function calculateEvPreview(
src/services/step4PreviewService.ts:178:export function calculateGeneratorPreview(
src/services/step4PreviewService.ts:233:export function calculateCombinedPreview(
src/services/marketIntelligence.ts:97:export function calculateMarketAlignedBESSPricing(
src/services/marketIntelligence.ts:239:  const analysis = calculateMarketAlignedBESSPricing(systemSizeMW, 4, location);
src/services/systemControlsPricingService.ts:672:  calculateControllerSystemCost(
src/services/systemControlsPricingService.ts:752:  calculateScadaSystemCost(
src/services/systemControlsPricingService.ts:829:  calculateEMSCost(
src/services/hotelIndustryProfile.ts:564:export function calculateHotelProfile(inputs: HotelInputs): HotelCalculations {
src/services/hotelIndustryProfile.ts:610:  // Energy spend estimate (use provided or calculate)
src/services/hotelIndustryProfile.ts:627:  // Use provided generatorKw if available, otherwise calculate
src/services/hotelIndustryProfile.ts:690:  calculateHotelProfile,
src/services/carWash16QCalculator.ts:19: * TrueQuote‚Ñ¢ Sources:
src/services/carWash16QCalculator.ts:44: * TrueQuote‚Ñ¢ Sources:
src/services/carWash16QCalculator.ts:128:  // TrueQuote‚Ñ¢ sources
src/services/carWash16QCalculator.ts:138:export function calculateCarWash16Q(input: CarWash16QInput): CarWash16QResult {
src/services/carWash16QCalculator.ts:383:    // TrueQuote‚Ñ¢ sources
src/services/premiumConfigurationService.ts:620:export function calculatePremiumComparison(
src/hooks/useWizardState.ts:25:import { calculateUseCasePower } from "@/services/useCasePowerCalculations";
src/hooks/useWizardState.ts:26:import { QuoteEngine } from "@/core/calculations/QuoteEngine";
src/hooks/useWizardState.ts:126:  const calculateBuildingLoad = useCallback((state: WizardState): number => {
src/hooks/useWizardState.ts:130:    console.log("üîß [calculateBuildingLoad] INPUT:", {
src/hooks/useWizardState.ts:139:      console.log("üîß [calculateBuildingLoad] No industry - returning 0");
src/hooks/useWizardState.ts:224:    console.log("üîß [calculateBuildingLoad] useCaseData being sent to SSOT:", useCaseData);
src/hooks/useWizardState.ts:228:      const powerResult = calculateUseCasePower(industryType, useCaseData);
src/hooks/useWizardState.ts:233:      console.log("üîß [calculateBuildingLoad] SSOT result:", {
src/hooks/useWizardState.ts:254:  const calculateEVLoad = useCallback(
src/hooks/useWizardState.ts:277:  const calculateNewEVLoad = useCallback((goals: WizardState["goals"]): number => {
src/hooks/useWizardState.ts:374:   * Recalculate ALL derived values
src/hooks/useWizardState.ts:376:  const recalculate = useCallback(
src/hooks/useWizardState.ts:377:    (state: WizardState): WizardState["calculated"] => {
src/hooks/useWizardState.ts:378:      const baseBuildingLoadKW = calculateBuildingLoad(state);
src/hooks/useWizardState.ts:379:      const existingEVLoadKW = calculateEVLoad(state.existingInfrastructure.evChargers);
src/hooks/useWizardState.ts:380:      const newEVLoadKW = calculateNewEVLoad(state.goals);
src/hooks/useWizardState.ts:383:      console.log("üîãüîãüîã [recalculate] CRITICAL DATA CENTER DEBUG:", {
src/hooks/useWizardState.ts:474:      console.log("üîã [recalculate] BESS sizing v2.0:", {
src/hooks/useWizardState.ts:516:        console.log("üîã [recalculate] Solar storage adjustment:", {
src/hooks/useWizardState.ts:553:      console.log("üîã [recalculate] Final values:", {
src/hooks/useWizardState.ts:567:    [calculateBuildingLoad, calculateEVLoad, calculateNewEVLoad, getRecommendedBackupHours]
src/hooks/useWizardState.ts:574:    const newCalculated = recalculate(wizardState);
src/hooks/useWizardState.ts:592:        wizardState.calculated[key as keyof typeof newCalculated]
src/hooks/useWizardState.ts:598:        calculated: newCalculated,
src/hooks/useWizardState.ts:608:    recalculate,
src/hooks/useWizardState.ts:613:  // Uses QuoteEngine.quickEstimate for accurate preview numbers
src/hooks/useWizardState.ts:616:    const { recommendedBatteryKW, recommendedBackupHours } = wizardState.calculated;
src/hooks/useWizardState.ts:633:        const estimate = await QuoteEngine.quickEstimate(
src/hooks/useWizardState.ts:643:          calculated: {
src/hooks/useWizardState.ts:644:            ...prev.calculated,
src/hooks/useWizardState.ts:658:    wizardState.calculated.recommendedBatteryKW,
src/hooks/useWizardState.ts:659:    wizardState.calculated.recommendedBackupHours,
src/hooks/useWizardState.ts:715:    recalculate,
src/services/recommendationEngine.ts:331:  estimatedCapacityKW = 100; // Will be calculated based on facility needs
src/services/recommendationEngine.ts:435:  estimatedLoadKW = 50; // Will be calculated based on charger configuration
src/services/systemHealthCheck.ts:11: * - TrueQuote compliance
src/services/systemHealthCheck.ts:23:import { QuoteEngine } from "@/core/calculations/QuoteEngine";
src/services/systemHealthCheck.ts:79:    checkTrueQuoteCompliance(),
src/services/systemHealthCheck.ts:83:    checkQuoteEngine(),
src/services/systemHealthCheck.ts:94:    processResult(trueQuoteHealth, "TrueQuote Compliance"),
src/services/systemHealthCheck.ts:443:    const testQuote = await QuoteEngine.generateQuote({
src/services/systemHealthCheck.ts:547: * 6. TrueQuote Compliance
src/services/systemHealthCheck.ts:549:async function checkTrueQuoteCompliance(): Promise<HealthCheckResult> {
src/services/systemHealthCheck.ts:553:    // Generate a test quote and check for TrueQuote data
src/services/systemHealthCheck.ts:554:    const testQuote = await QuoteEngine.generateQuote({
src/services/systemHealthCheck.ts:576:    let message = `TrueQuote compliance: ${complianceScore}%`;
src/services/systemHealthCheck.ts:580:      message = "Missing TrueQuote audit data";
src/services/systemHealthCheck.ts:583:      message = "Incomplete TrueQuote audit data";
src/services/systemHealthCheck.ts:587:      category: "TrueQuote Compliance",
src/services/systemHealthCheck.ts:602:      category: "TrueQuote Compliance",
src/services/systemHealthCheck.ts:629:        const quote = await QuoteEngine.generateQuote({
src/services/systemHealthCheck.ts:849:async function checkQuoteEngine(): Promise<HealthCheckResult> {
src/services/systemHealthCheck.ts:862:        const quote = await QuoteEngine.generateQuote({
src/services/systemHealthCheck.ts:1029:  checkTrueQuoteCompliance,
src/services/systemHealthCheck.ts:1033:  checkQuoteEngine,
src/services/specExtractionService.ts:676: * Convert extracted specs to QuoteEngine input format
src/services/marketInferenceEngine.ts:427:      trend: "stable", // Could be calculated from historical data
src/services/marketInferenceEngine.ts:524:      trend: "stable", // Could be calculated from historical data
src/services/marketInferenceEngine.ts:741:    // This would need to be fetched from pricingConfigService
src/services/isoMarketService.ts:274:export async function calculateServiceRevenue(params: {
src/services/isoMarketService.ts:325:export async function calculateTotalAncillaryRevenue(params: {
src/services/isoMarketService.ts:344:      calculateServiceRevenue({ iso, serviceType, systemSizeKW, durationHours })
src/services/isoMarketService.ts:479:  calculateServiceRevenue,
src/services/isoMarketService.ts:480:  calculateTotalAncillaryRevenue,
src/services/universityIndustryProfile.ts:1101:export function calculateUniversityProfile(inputs: UniversityInputs): UniversityCalculations {
src/services/universityIndustryProfile.ts:1295:  calculateUniversityProfile,
src/tests/quote-flow-e2e.test.ts:30:import { calculateQuote, QuoteInput } from "@/services/unifiedQuoteCalculator";
src/tests/quote-flow-e2e.test.ts:31:import { calculateUseCasePower } from "@/services/useCasePowerCalculations";
src/tests/quote-flow-e2e.test.ts:46:      const result = await calculateQuote(input);
src/tests/quote-flow-e2e.test.ts:74:      const result = await calculateQuote(input);
src/tests/quote-flow-e2e.test.ts:80:    it("should calculate hotel power with database defaults", () => {
src/tests/quote-flow-e2e.test.ts:82:      const result = calculateUseCasePower("hotel", {});
src/tests/quote-flow-e2e.test.ts:93:    it("should calculate hospital power with database defaults", () => {
src/tests/quote-flow-e2e.test.ts:95:      const result = calculateUseCasePower("hospital", {});
src/tests/quote-flow-e2e.test.ts:104:    it("should calculate warehouse power with database defaults", () => {
src/tests/quote-flow-e2e.test.ts:106:      const result = calculateUseCasePower("warehouse", {});
src/tests/quote-flow-e2e.test.ts:112:    it("should calculate car-wash power with database defaults", () => {
src/tests/quote-flow-e2e.test.ts:114:      const result = calculateUseCasePower("car-wash", {
src/tests/quote-flow-e2e.test.ts:128:    it("should calculate office power with database defaults", () => {
src/tests/quote-flow-e2e.test.ts:129:      const result = calculateUseCasePower("office", {});
src/tests/quote-flow-e2e.test.ts:149:      const result1 = await calculateQuote(input);
src/tests/quote-flow-e2e.test.ts:150:      const result2 = await calculateQuote(input);
src/tests/quote-flow-e2e.test.ts:159:      const smallSystem = await calculateQuote({
src/tests/quote-flow-e2e.test.ts:167:      const largeSystem = await calculateQuote({
src/tests/quote-flow-e2e.test.ts:206:        const result = await calculateQuote({
src/services/CompleteTrueQuoteEngine.ts:2: * Complete TrueQuote Engine
src/services/CompleteTrueQuoteEngine.ts:147:export function calculateCompleteQuote(answers: Record<string, any>): CompleteQuote {
src/services/CompleteTrueQuoteEngine.ts:149:  const energyProfile = calculateEnergyProfile(answers);
src/services/CompleteTrueQuoteEngine.ts:152:  const solarSystem = calculateSolarSystem(answers, energyProfile);
src/services/CompleteTrueQuoteEngine.ts:155:  const bessSystem = calculateBESSSystem(answers, energyProfile, solarSystem);
src/services/CompleteTrueQuoteEngine.ts:187:export function calculateEnergyProfile(answers: Record<string, any>): EnergyProfile {
src/services/CompleteTrueQuoteEngine.ts:188:  const loads = calculateEquipmentLoads(answers);
src/services/CompleteTrueQuoteEngine.ts:222:export function calculateEquipmentLoads(answers: Record<string, any>): EquipmentLoads {
src/services/CompleteTrueQuoteEngine.ts:352:export function calculateSolarSystem(
src/services/CompleteTrueQuoteEngine.ts:418:export function calculateBESSSystem(
src/services/CompleteTrueQuoteEngine.ts:465:  calculateCompleteQuote,
src/services/CompleteTrueQuoteEngine.ts:466:  calculateEnergyProfile,
src/services/CompleteTrueQuoteEngine.ts:467:  calculateEquipmentLoads,
src/services/CompleteTrueQuoteEngine.ts:468:  calculateSolarSystem,
src/services/CompleteTrueQuoteEngine.ts:469:  calculateBESSSystem
src/tests/porsche911ArchitectureTest.ts:7:import { calculateLoad } from '../services/calculators/loadCalculator';
src/tests/porsche911ArchitectureTest.ts:8:import { calculateBESS } from '../services/calculators/bessCalculator';
src/tests/porsche911ArchitectureTest.ts:9:import { calculateFinancials } from '../services/calculators/financialCalculator';
src/tests/porsche911ArchitectureTest.ts:56:test('calculateLoad - Hotel 200 rooms', () => {
src/tests/porsche911ArchitectureTest.ts:57:  const result = calculateLoad({ industry: 'hotel', useCaseData: { roomCount: 200 } });
src/tests/porsche911ArchitectureTest.ts:65:test('calculateLoad - Data Center', () => {
src/tests/porsche911ArchitectureTest.ts:66:  const result = calculateLoad({ industry: 'data_center', useCaseData: { rackCount: 100, squareFootage: 10000 } });
src/tests/porsche911ArchitectureTest.ts:74:test('calculateLoad - Car Wash', () => {
src/tests/porsche911ArchitectureTest.ts:75:  const result = calculateLoad({ industry: 'car_wash', useCaseData: { squareFootage: 5000 } });
src/tests/porsche911ArchitectureTest.ts:83:test('calculateBESS - Hotel 500kW', () => {
src/tests/porsche911ArchitectureTest.ts:84:  const result = calculateBESS({
src/tests/porsche911ArchitectureTest.ts:98:test('calculateBESS - Data Center critical load', () => {
src/tests/porsche911ArchitectureTest.ts:99:  const result = calculateBESS({
src/tests/porsche911ArchitectureTest.ts:113:test('calculateFinancials - ROI positive', () => {
src/tests/porsche911ArchitectureTest.ts:114:  const result = calculateFinancials({
src/services/subIndustryService.ts:305: * Used by TrueQuote to apply sub-industry multipliers
src/services/equipmentVendorService.ts:370:export async function calculateEVChargerCosts(config: {
src/services/equipmentVendorService.ts:607:  calculateEVChargerCosts,
src/services/truequote/index.ts:2: * TrueQuote‚Ñ¢ Service Index
src/services/truequote/index.ts:4: * Central export point for all TrueQuote services.
src/services/truequote/index.ts:12:  computeTrueQuoteSizing,
src/services/truequote/index.ts:16:  type TrueQuoteSizing,
src/tests/calculationTests.ts:15:  calculateUseCasePower,
src/tests/calculationTests.ts:16:  calculateOfficePower,
src/tests/calculationTests.ts:17:  calculateHotelPower,
src/tests/calculationTests.ts:18:  calculateHospitalPower,
src/tests/calculationTests.ts:19:  calculateDatacenterPower,
src/tests/calculationTests.ts:20:  calculateEVChargingPower,
src/tests/calculationTests.ts:21:  calculateAirportPower,
src/tests/calculationTests.ts:22:  calculateManufacturingPower,
src/tests/calculationTests.ts:23:  calculateWarehousePower,
src/tests/calculationTests.ts:24:  calculateRetailPower,
src/tests/calculationTests.ts:25:  calculateShoppingCenterPower,
src/tests/calculationTests.ts:26:  calculateAgriculturePower,
src/tests/calculationTests.ts:27:  calculateCasinoPower,
src/tests/calculationTests.ts:28:  calculateIndoorFarmPower,
src/tests/calculationTests.ts:29:  calculateApartmentPower,
src/tests/calculationTests.ts:30:  calculateCollegePower,
src/tests/calculationTests.ts:31:  calculateCarWashPower,
src/tests/calculationTests.ts:288:    const result = calculateUseCasePower(testCase.slug, testCase.inputs);
src/tests/calculationTests.ts:364: * Test direct calculator functions (not via slug routing)
src/tests/calculationTests.ts:373:    { name: "calculateOfficePower(25000)", fn: () => calculateOfficePower(25000) },
src/tests/calculationTests.ts:374:    { name: "calculateHotelPower(150)", fn: () => calculateHotelPower(150) },
src/tests/calculationTests.ts:375:    { name: "calculateHospitalPower(200)", fn: () => calculateHospitalPower(200) },
src/tests/calculationTests.ts:377:      name: "calculateDatacenterPower(undefined, 400, 8)",
src/tests/calculationTests.ts:378:      fn: () => calculateDatacenterPower(undefined, 400, 8),
src/tests/calculationTests.ts:380:    { name: "calculateEVChargingPower(0, 10, 5)", fn: () => calculateEVChargingPower(0, 10, 5) },
src/tests/calculationTests.ts:381:    { name: "calculateAirportPower(10)", fn: () => calculateAirportPower(10) },
src/tests/calculationTests.ts:383:      name: 'calculateManufacturingPower(100000, "heavy")',
src/tests/calculationTests.ts:384:      fn: () => calculateManufacturingPower(100000, "heavy"),
src/tests/calculationTests.ts:387:      name: "calculateWarehousePower(250000, false)",
src/tests/calculationTests.ts:388:      fn: () => calculateWarehousePower(250000, false),
src/tests/calculationTests.ts:391:      name: "calculateWarehousePower(100000, true)",
src/tests/calculationTests.ts:392:      fn: () => calculateWarehousePower(100000, true),
src/tests/calculationTests.ts:394:    { name: "calculateRetailPower(50000)", fn: () => calculateRetailPower(50000) },
src/tests/calculationTests.ts:396:      name: "calculateShoppingCenterPower(500000)",
src/tests/calculationTests.ts:397:      fn: () => calculateShoppingCenterPower(500000),
src/tests/calculationTests.ts:400:      name: 'calculateAgriculturePower(5000, undefined, "row-crop")',
src/tests/calculationTests.ts:401:      fn: () => calculateAgriculturePower(5000, undefined, "row-crop"),
src/tests/calculationTests.ts:403:    { name: "calculateCasinoPower(50000)", fn: () => calculateCasinoPower(50000) },
src/tests/calculationTests.ts:404:    { name: "calculateIndoorFarmPower(20000)", fn: () => calculateIndoorFarmPower(20000) },
src/tests/calculationTests.ts:405:    { name: "calculateApartmentPower(200)", fn: () => calculateApartmentPower(200) },
src/tests/calculationTests.ts:406:    { name: "calculateCollegePower(10000)", fn: () => calculateCollegePower(10000) },
src/tests/calculationTests.ts:408:      name: 'calculateCarWashPower(6, "automatic")',
src/tests/calculationTests.ts:409:      fn: () => calculateCarWashPower(6, "automatic"),
src/tests/calculationTests.ts:447:  const result = calculateUseCasePower(slug, inputs);
src/services/truequote/loadCurve.ts:2: * TrueQuote‚Ñ¢ Load Curve Generator
src/services/MagicFit.ts:3: * Sub/Sub Contractor to TrueQuote Engine
src/services/MagicFit.ts:6: * 1. Receive base calculation from TrueQuote
src/services/MagicFit.ts:8: * 3. Submit proposal back to TrueQuote for authentication
src/services/MagicFit.ts:11: * All results must be authenticated by TrueQuote first.
src/services/MagicFit.ts:13: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/MagicFit.ts:22:  TrueQuoteBaseCalculation,
src/services/MagicFit.ts:28:import { calculateFinancials } from "./calculators/financialCalculator";
src/services/MagicFit.ts:135: * @param baseCalc - Base calculation from TrueQuote
src/services/MagicFit.ts:138: * @returns MagicFitProposal to be authenticated by TrueQuote
src/services/MagicFit.ts:141:  baseCalc: TrueQuoteBaseCalculation,
src/services/MagicFit.ts:257:  base: TrueQuoteBaseCalculation,
src/services/MagicFit.ts:470:  const financials = calculateFinancials({
src/services/industries/truckStopIndustry.ts:21: * Part of Merlin Energy TrueQuote Engine
src/services/industries/truckStopIndustry.ts:367:  notes: 'EV chargers & lighting running 3+ hours must be calculated at 125% of nameplate',
src/services/industries/truckStopIndustry.ts:429:export function calculateTruckStopLoad(config: TruckStopLoadConfig): TruckStopLoadResult {
src/services/industries/truckStopIndustry.ts:506:  calculateTruckStopLoad,
src/services/batteryDegradationService.ts:18: * DATA SOURCES (TrueQuote‚Ñ¢ compliant):
src/services/batteryDegradationService.ts:77:  /** TrueQuote‚Ñ¢ attribution */
src/services/batteryDegradationService.ts:203:export function calculateDegradation(input: DegradationInput): DegradationResult {
src/services/batteryDegradationService.ts:356: * @param degradation - Degradation result from calculateDegradation
src/services/batteryDegradationService.ts:361:export function calculateDegradationFinancialImpact(
src/services/batteryDegradationService.ts:411: * This calculates when augmentation is needed and estimated cost.
src/services/batteryDegradationService.ts:417:export function calculateAugmentationStrategy(
src/services/batteryDegradationService.ts:477:  calculateDegradation,
src/services/batteryDegradationService.ts:479:  calculateDegradationFinancialImpact,
src/services/batteryDegradationService.ts:480:  calculateAugmentationStrategy,
src/hooks/wizard/useFinancialMetrics.ts:2:import { calculateFinancialMetrics } from '../../services/centralizedCalculations';
src/hooks/wizard/useFinancialMetrics.ts:54:    const calculateMetrics = async () => {
src/hooks/wizard/useFinancialMetrics.ts:63:        const bessAnnualSavings = calculateBESSAnnualSavings(
src/hooks/wizard/useFinancialMetrics.ts:70:        const solarAnnualSavings = calculateSolarAnnualSavings(
src/hooks/wizard/useFinancialMetrics.ts:76:        const windAnnualSavings = calculateWindAnnualSavings(
src/hooks/wizard/useFinancialMetrics.ts:85:        const financialMetrics = await calculateFinancialMetrics({
src/hooks/wizard/useFinancialMetrics.ts:100:        // DO NOT recalculate payback/roi locally - use what centralizedCalculations returns
src/hooks/wizard/useFinancialMetrics.ts:117:    calculateMetrics();
src/hooks/wizard/useFinancialMetrics.ts:126:const calculateBESSAnnualSavings = (
src/hooks/wizard/useFinancialMetrics.ts:151:const calculateSolarAnnualSavings = (
src/hooks/wizard/useFinancialMetrics.ts:168:const calculateWindAnnualSavings = (
src/services/truequote/sizingEngine.ts:2: * TrueQuote‚Ñ¢ Sizing Engine
src/services/truequote/sizingEngine.ts:19:export interface TrueQuoteSizing {
src/services/truequote/sizingEngine.ts:177:function calculateDuration(
src/services/truequote/sizingEngine.ts:216: * Compute TrueQuote sizing from progressive model inputs
src/services/truequote/sizingEngine.ts:221:export function computeTrueQuoteSizing(inputs: SizingInputs): TrueQuoteSizing {
src/services/truequote/sizingEngine.ts:324:  let durationHours_best = calculateDuration(goals, industry, hasBackupGenerator);
src/services/truequote/sizingEngine.ts:429:  recommended: TrueQuoteSizing["recommended"],
src/services/solarPricingService.ts:355:  calculateSolarSystemCost(
src/services/solarPricingService.ts:479:  calculateAnnualProduction(
src/services/carWashIndustryProfile.ts:513:export function calculateCarWashProfile(inputs: CarWashInputs): CarWashCalculations {
src/services/carWashIndustryProfile.ts:662:  calculateCarWashProfile,
src/hooks/wizard/useSystemCalculations.ts:2:import { calculateDatabaseBaseline } from '../../services/baselineService';
src/hooks/wizard/useSystemCalculations.ts:3:import { calculateAutomatedSolarSizing, type SolarSizingResult } from '../../utils/solarSizingUtils';
src/hooks/wizard/useSystemCalculations.ts:4:import { calculateUseCasePower, calculateEVChargingPower } from '../../services/useCasePowerCalculations';
src/hooks/wizard/useSystemCalculations.ts:38:   * @deprecated Use calculateUseCasePower() from useCasePowerCalculations.ts instead
src/hooks/wizard/useSystemCalculations.ts:43:    console.warn('‚ö†Ô∏è DEPRECATED: getPowerDensity() is deprecated. Use calculateUseCasePower() from useCasePowerCalculations.ts');
src/hooks/wizard/useSystemCalculations.ts:45:    const result = calculateUseCasePower(buildingType, {});
src/hooks/wizard/useSystemCalculations.ts:50:   * @deprecated Use calculateUseCasePower() directly - it handles scale internally
src/hooks/wizard/useSystemCalculations.ts:57:  const calculateScaleFactor = (template: string, data: { [key: string]: any }): number => {
src/hooks/wizard/useSystemCalculations.ts:60:      console.warn('‚ö†Ô∏è calculateScaleFactor is deprecated - SSOT handles scaling internally');
src/hooks/wizard/useSystemCalculations.ts:62:    // For most use cases, we now use calculateUseCasePower directly
src/hooks/wizard/useSystemCalculations.ts:103:   * @deprecated Use calculateEVChargingPower() from useCasePowerCalculations.ts instead
src/hooks/wizard/useSystemCalculations.ts:106:  const calculateEVChargingConfig = (data: { [key: string]: any }) => {
src/hooks/wizard/useSystemCalculations.ts:108:    const result = calculateEVChargingPower(
src/hooks/wizard/useSystemCalculations.ts:123:   * Auto-calculate realistic configuration based on use case data
src/hooks/wizard/useSystemCalculations.ts:127:    const calculateConfig = async () => {
src/hooks/wizard/useSystemCalculations.ts:137:        const centralizedResult = calculateUseCasePower(selectedTemplate, useCaseData);
src/hooks/wizard/useSystemCalculations.ts:147:          const scale = calculateScaleFactor(selectedTemplate, useCaseData);
src/hooks/wizard/useSystemCalculations.ts:150:          const baseline = await calculateDatabaseBaseline(selectedTemplate, scale, useCaseData);
src/hooks/wizard/useSystemCalculations.ts:178:          const suggestion = calculateAutomatedSolarSizing(buildingCharacteristics);
src/hooks/wizard/useSystemCalculations.ts:195:    calculateConfig();
src/services/openAIService.ts:207:Would you like me to calculate specific ROI projections for your use case? I can factor in your local utility rates, system size, and application type.`;
src/services/evChargingCalculations.ts:558:export function calculateEVHubPower(
src/services/evChargingCalculations.ts:754:export function calculateEVHubPowerFromEquipment(
src/services/evChargingCalculations.ts:989:export function calculateEVHubPowerSimple(input: EVHubPowerSimpleInput): EVHubPowerSimpleResult {
src/services/evChargingCalculations.ts:995:  const result = calculateEVHubPowerFromEquipment({
src/services/evChargingCalculations.ts:1034:export function calculateEVHubCosts(
src/services/evChargingCalculations.ts:1142:export function calculateEVHubBESSSize(
src/services/evChargingCalculations.ts:1213:export function calculateGridServicesRevenue(
src/services/evChargingCalculations.ts:1452: * Auto-calculates optimal BESS + solar sizing based on:
src/services/evChargingCalculations.ts:1462:export function calculateEVStationRecommendation(
src/services/evChargingCalculations.ts:1477:  // Use customChargers if provided, otherwise use calculated defaults
src/services/evChargingCalculations.ts:1620:export function calculateV2GPotential(
src/services/evChargingCalculations.ts:1733:export function calculatePortfolioMetrics(
src/services/evChargingCalculations.ts:1758:    const powerResult = calculateEVHubPower(site.chargerConfig);
src/services/evChargingCalculations.ts:1775:      const gridRevenue = calculateGridServicesRevenue(powerResult, site.bessConfig);
src/services/evChargingCalculations.ts:1782:      const v2gResult = calculateV2GPotential(site.chargerConfig);
src/services/evChargingCalculations.ts:1824:  const power = calculateEVHubPower(WEST_LONDON_EV_HUB_CONFIG, 70);
src/services/evChargingCalculations.ts:1825:  const costs = calculateEVHubCosts(WEST_LONDON_EV_HUB_CONFIG);
src/services/evChargingCalculations.ts:1826:  const bess = calculateEVHubBESSSize(power);
src/services/evChargingCalculations.ts:1905: * EV charger specs for simplified landing page calculator
src/services/evChargingCalculations.ts:1934: * Simple EV charging power calculator for landing page
src/services/evChargingCalculations.ts:1937:export function calculateEVChargingPowerSimple(
src/services/powerProfileService.ts:163:export function calculatePowerProfile(wizardData: {
src/services/aiOptimizationService.ts:24:import { calculateFinancialMetrics } from "./centralizedCalculations";
src/services/aiOptimizationService.ts:25:import { calculateDatabaseBaseline } from "./baselineService";
src/services/aiOptimizationService.ts:258:    const currentMetrics = await calculateFinancialMetrics({
src/services/aiOptimizationService.ts:274:    const longerDurationMetrics = await calculateFinancialMetrics({
src/services/aiOptimizationService.ts:284:    const largerSizeMetrics = await calculateFinancialMetrics({
src/services/aiOptimizationService.ts:301:      renewableImprovementMetrics = await calculateFinancialMetrics({
src/services/aiOptimizationService.ts:389:      const benchmark = calculateBenchmarkPercentile(currentMetrics, input.useCase);
src/services/aiOptimizationService.ts:449:      benchmarkComparison: calculateBenchmarkPercentile(currentMetrics, input.useCase),
src/services/aiOptimizationService.ts:537:function calculateBenchmarkPercentile(
src/services/aiOptimizationService.ts:580:    const baseline = await calculateDatabaseBaseline(input.useCase, 1.0, input.useCaseData);
src/tests/testCalculationConsolidation.ts:20:  const { calculateFinancialMetrics } = await import("../services/centralizedCalculations");
src/tests/testCalculationConsolidation.ts:41:    const result = await calculateFinancialMetrics(testInput);
src/tests/testCalculationConsolidation.ts:68:      console.log(`  ‚ùå NPV: Not calculated`);
src/tests/testCalculationConsolidation.ts:74:      console.log(`  ‚ùå IRR: Not calculated`);
src/tests/testCalculationConsolidation.ts:80:      console.log(`  ‚ùå Discounted Payback: Not calculated`);
src/tests/testCalculationConsolidation.ts:86:      console.log(`  ‚ùå LCOS: Not calculated`);
src/tests/testCalculationConsolidation.ts:117:        name: "NPV is calculated",
src/hooks/wizard/useCapacityCalculations.ts:2:import { calculateEquipmentBreakdown, type EquipmentBreakdown } from '../../utils/equipmentCalculations';
src/hooks/wizard/useCapacityCalculations.ts:55:    const calculateCapacity = async () => {
src/hooks/wizard/useCapacityCalculations.ts:65:      const equipmentBreakdown = await calculateEquipmentBreakdown(
src/hooks/wizard/useCapacityCalculations.ts:95:    calculateCapacity();
src/hooks/wizard/useCapacityCalculations.ts:102: * Helper function to calculate container requirements
src/hooks/wizard/useCapacityCalculations.ts:104:export const calculateContainerRequirements = (
src/hooks/wizard/useCapacityCalculations.ts:123: * Helper function to calculate transformer requirements
src/hooks/wizard/useCapacityCalculations.ts:125:export const calculateTransformerRequirements = (
src/hooks/wizard/useCapacityCalculations.ts:151: * Helper function to calculate BMS requirements
src/hooks/wizard/useCapacityCalculations.ts:153:export const calculateBMSRequirements = (
src/hooks/wizard/useCapacityCalculations.ts:174: * Helper function to calculate auxiliary systems
src/hooks/wizard/useCapacityCalculations.ts:176:export const calculateAuxiliarySystems = (
src/services/useCasePowerCalculations.ts:3: * TrueQuote‚Ñ¢ compliant: All calculations traceable to NREL/SEIA/benchmarkSources
src/services/useCasePowerCalculations.ts:14:export function calculateSolarSizing({
src/services/useCasePowerCalculations.ts:55:  // If user provided targetAnnualKWh, reverse-calculate required kW
src/services/useCasePowerCalculations.ts:61:  // TrueQuote‚Ñ¢: Get ILR ratio and source
src/services/useCasePowerCalculations.ts:139:  // Airport uses tiered calculation - see calculateAirportPower()
src/services/useCasePowerCalculations.ts:2140:export function calculateOfficePower(sqFt: number): PowerCalculationResult {
src/services/useCasePowerCalculations.ts:2186: * For detailed calculations with amenities, use calculateHotelPowerDetailed()
src/services/useCasePowerCalculations.ts:2187: * For full equipment breakdown, use calculateHotelPowerFromEquipment()
src/services/useCasePowerCalculations.ts:2193:export function calculateHotelPower(
src/services/useCasePowerCalculations.ts:2318:  console.log("üè® [calculateHotelPower] SSOT calculation with amenities:", {
src/services/useCasePowerCalculations.ts:2941:export function calculateHotelPowerFromEquipment(
src/services/useCasePowerCalculations.ts:3133:  console.log("üè® [calculateHotelPowerFromEquipment] Detailed breakdown:", {
src/services/useCasePowerCalculations.ts:3293:export function calculateHotelPowerDetailed(input: HotelPowerInput): HotelPowerResult {
src/services/useCasePowerCalculations.ts:3668:export function calculateCarWashEquipmentPower(input: CarWashPowerInput): CarWashPowerResult {
src/services/useCasePowerCalculations.ts:3804:export function calculateHospitalPower(
src/services/useCasePowerCalculations.ts:3858:export function calculateDatacenterPower(
src/services/useCasePowerCalculations.ts:3863:  console.log("üè¢ [calculateDatacenterPower] INPUTS:", { itLoadKW, rackCount, rackDensityKW });
src/services/useCasePowerCalculations.ts:3872:    console.log("üè¢ [calculateDatacenterPower] Using IT Load method:", {
src/services/useCasePowerCalculations.ts:3882:    console.log("üè¢ [calculateDatacenterPower] Using Rack Count method:", {
src/services/useCasePowerCalculations.ts:3893:    console.log("‚ö†Ô∏è [calculateDatacenterPower] USING DEFAULT - No itLoadKW or rackCount provided!");
src/services/useCasePowerCalculations.ts:3898:  console.log("üè¢ [calculateDatacenterPower] FINAL OUTPUT:", { powerKW, powerMW, method });
src/services/useCasePowerCalculations.ts:4022:export function calculateDataCenterPowerFromEquipment(
src/services/useCasePowerCalculations.ts:4247:export function calculateDataCenterPowerSimple(
src/services/useCasePowerCalculations.ts:4261:  const result = calculateDataCenterPowerFromEquipment({
src/services/useCasePowerCalculations.ts:4295: * For new code, use calculateEVHubPower() from evChargingCalculations.ts
src/services/useCasePowerCalculations.ts:4304:export function calculateEVChargingPower(
src/services/useCasePowerCalculations.ts:4349:export function calculateAirportPower(annualPassengersMillions: number): PowerCalculationResult {
src/services/useCasePowerCalculations.ts:4525:export function calculateAirportPowerFromEquipment(
src/services/useCasePowerCalculations.ts:4657:export function calculateAirportPowerSimple(
src/services/useCasePowerCalculations.ts:4660:  const detailedResult = calculateAirportPowerFromEquipment(input);
src/services/useCasePowerCalculations.ts:4702:export function calculateOfficePowerSimple(input: OfficePowerSimpleInput): OfficePowerSimpleResult {
src/services/useCasePowerCalculations.ts:4760:export function calculateUniversityPowerSimple(
src/services/useCasePowerCalculations.ts:4797:export function calculateManufacturingPower(
src/services/useCasePowerCalculations.ts:4843:export function calculateWarehousePower(
src/services/useCasePowerCalculations.ts:4874:export function calculateRetailPower(sqFt: number): PowerCalculationResult {
src/services/useCasePowerCalculations.ts:4896:export function calculateShoppingCenterPower(sqFt: number): PowerCalculationResult {
src/services/useCasePowerCalculations.ts:4920:export function calculateAgriculturePower(
src/services/useCasePowerCalculations.ts:4979:export function calculateCasinoPower(gamingFloorSqFt: number): PowerCalculationResult {
src/services/useCasePowerCalculations.ts:5002:export function calculateIndoorFarmPower(
src/services/useCasePowerCalculations.ts:5030:export function calculateApartmentPower(
src/services/useCasePowerCalculations.ts:5056:export function calculateCollegePower(studentCount: number): PowerCalculationResult {
src/services/useCasePowerCalculations.ts:5220:export function calculateCollegePowerComprehensive(input: CollegePowerInput): CollegePowerResult {
src/services/useCasePowerCalculations.ts:5329:export function calculateCollegePowerFromQuestions(
src/services/useCasePowerCalculations.ts:5332:  const result = calculateCollegePowerComprehensive(input);
src/services/useCasePowerCalculations.ts:5598:export function calculateCarWashPowerFromEquipment(
src/services/useCasePowerCalculations.ts:5728:  console.log("üöó [calculateCarWashPowerFromEquipment] Detailed breakdown:", {
src/services/useCasePowerCalculations.ts:5748:export function calculateCarWashPower(
src/services/useCasePowerCalculations.ts:5807:  return calculateCarWashPowerFromEquipment({
src/services/useCasePowerCalculations.ts:5827:export function calculateGasStationPower(
src/services/useCasePowerCalculations.ts:5878:export function calculateGovernmentPower(sqFt: number): PowerCalculationResult {
src/services/useCasePowerCalculations.ts:5896: * Routes to appropriate calculator based on use case slug
src/services/useCasePowerCalculations.ts:5898:export function calculateUseCasePower(
src/services/useCasePowerCalculations.ts:5907:      return calculateOfficePower(
src/services/useCasePowerCalculations.ts:5927:      return calculateHotelPower(hotelRooms);
src/services/useCasePowerCalculations.ts:5932:      const baseResult = calculateHospitalPower(bedCount);
src/services/useCasePowerCalculations.ts:6011:      console.log("üè¢üè¢üè¢ [calculateUseCasePower] DATA CENTER CASE - useCaseData:", {
src/services/useCasePowerCalculations.ts:6018:      return calculateDatacenterPower(
src/services/useCasePowerCalculations.ts:6080:        const { calculateEVHubPower } = require("./evChargingCalculations");
src/services/useCasePowerCalculations.ts:6082:        const evResult = calculateEVHubPower(evConfig, concurrency);
src/services/useCasePowerCalculations.ts:6121:      return calculateEVChargingPower(evLevel1, evLevel2, evDcFast);
src/services/useCasePowerCalculations.ts:6129:      return calculateAirportPower(passengersInMillions);
src/services/useCasePowerCalculations.ts:6134:      return calculateManufacturingPower(
src/services/useCasePowerCalculations.ts:6144:      return calculateWarehousePower(
src/services/useCasePowerCalculations.ts:6194:      return calculateWarehousePower(effectiveSqFt, true);
src/services/useCasePowerCalculations.ts:6199:      return calculateRetailPower(
src/services/useCasePowerCalculations.ts:6206:      return calculateShoppingCenterPower(
src/services/useCasePowerCalculations.ts:6212:      return calculateAgriculturePower(
src/services/useCasePowerCalculations.ts:6222:      return calculateCasinoPower(
src/services/useCasePowerCalculations.ts:6232:      return calculateIndoorFarmPower(
src/services/useCasePowerCalculations.ts:6239:      return calculateApartmentPower(
src/services/useCasePowerCalculations.ts:6246:      return calculateCollegePower(
src/services/useCasePowerCalculations.ts:6253:      return calculateCarWashPower(
src/services/useCasePowerCalculations.ts:6271:      return calculateGasStationPower(
src/services/useCasePowerCalculations.ts:6285:      return calculateGovernmentPower(
src/services/useCasePowerCalculations.ts:6299:        return calculateEVChargingPower(0, mgLevel2, mgDcFast);
src/services/useCasePowerCalculations.ts:6323:      return calculateDatacenterPower(
src/services/useCasePowerCalculations.ts:6332:      return calculateWarehousePower(
src/services/useCasePowerCalculations.ts:6340:      return calculateApartmentPower(
src/services/useCasePowerCalculations.ts:6444:export function calculateHotelSolarSizing(
src/services/useCasePowerCalculations.ts:6495: * Hotel class profiles for simplified landing page calculator
src/services/useCasePowerCalculations.ts:6499: * The calculateHotelPowerSimple() function applies 0.75 diversity
src/services/useCasePowerCalculations.ts:6514: * Hotel amenity power additions for simplified landing page calculator
src/services/useCasePowerCalculations.ts:6544: * Simple hotel power calculator for landing page
src/services/useCasePowerCalculations.ts:6547:export function calculateHotelPowerSimple(input: HotelPowerSimpleInput): HotelPowerSimpleResult {
src/services/useCasePowerCalculations.ts:6587: * Car wash power profiles for simplified landing page calculator
src/services/useCasePowerCalculations.ts:6618: * Simple car wash power calculator for landing page
src/services/useCasePowerCalculations.ts:6621:export function calculateCarWashPowerSimple(
src/services/useCasePowerCalculations.ts:6677: * TrueQuote‚Ñ¢ Sources:
src/services/useCasePowerCalculations.ts:6696: * TrueQuote‚Ñ¢ compliant: Uses ICA/ICWG industry standards for facility sizing
src/services/useCasePowerCalculations.ts:6752: * TrueQuote‚Ñ¢ Sources:
src/services/useCasePowerCalculations.ts:6785: * TrueQuote‚Ñ¢ Sources:
src/services/useCasePowerCalculations.ts:6819: * TrueQuote‚Ñ¢ compliant: Uses NREL/SEIA land-use standards
src/services/useCasePowerCalculations.ts:6825:export function calculateGroundMountSolarCapacity(
src/services/useCasePowerCalculations.ts:6888: * TrueQuote‚Ñ¢ compliant: Uses NREL carport solar integration standards
src/services/useCasePowerCalculations.ts:6894:export function calculateCarportSolarCapacity(
src/services/useCasePowerCalculations.ts:6953:  calculateCarWash16Q,
src/services/validators/proposalValidator.ts:3: * Authenticates Magic Fit proposals for TrueQuote
src/services/validators/proposalValidator.ts:5: * TrueQuote MUST validate all Magic Fit proposals before they can be
src/services/validators/proposalValidator.ts:8: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/validators/proposalValidator.ts:12:  TrueQuoteBaseCalculation,
src/services/validators/proposalValidator.ts:16:  TrueQuoteRejection,
src/services/validators/proposalValidator.ts:66:  base: TrueQuoteBaseCalculation,
src/services/validators/proposalValidator.ts:68:): AuthenticationResult | TrueQuoteRejection {
src/services/validators/proposalValidator.ts:72:  const rejectionDetails: TrueQuoteRejection['details'] = [];
src/services/validators/proposalValidator.ts:121:  base: TrueQuoteBaseCalculation
src/services/vendorService.ts:436: * AAD: Accurate pricing from calculateQuote() + premium comparison
src/services/trueQuoteMapperConfig.ts:2: * TrueQuote Engine Mapping Configuration
src/services/trueQuoteMapperConfig.ts:5: * - Database field names ‚Üí TrueQuote Engine field names
src/services/trueQuoteMapperConfig.ts:6: * - Database subtype values ‚Üí TrueQuote Engine subtypes
src/services/trueQuoteMapperConfig.ts:15:// VALID SUBTYPES (Extracted from TrueQuote Engine)
src/services/trueQuoteMapperConfig.ts:25: * This is the SINGLE SOURCE OF TRUTH for valid TrueQuote subtypes
src/services/trueQuoteMapperConfig.ts:61: * Maps database subtype values to TrueQuote Engine subtypes
src/services/trueQuoteMapperConfig.ts:63: * Value: Object mapping database values ‚Üí TrueQuote Engine values
src/services/trueQuoteMapperConfig.ts:345: * Maps database field names to TrueQuote Engine field names
src/services/trueQuoteMapperConfig.ts:455: * Map database subtype value to TrueQuote Engine subtype
src/services/trueQuoteMapperConfig.ts:472: * Map database field name to TrueQuote Engine field name
src/services/warehouseIndustryProfile.ts:1118:export function calculateWarehouseProfile(inputs: WarehouseInputs): WarehouseProfileResult {
src/constants/marketing.ts:6: * These are NOT used for actual quote calculations - use QuoteEngine for that.
src/constants/marketing.ts:27: * These are ballpark figures for UI previews - actual quotes use QuoteEngine
src/services/locationEnrichmentService.ts:13: * - State-level savings teaser (calculated from real data)
src/services/locationEnrichmentService.ts:70:  // Savings Teaser (calculated from real data)
src/services/calculationValidator.ts:286:          message: `BESS price ($${bessPricePerKWh.toFixed(0)}/kWh) deviates ${deviation.toFixed(1)}% from benchmark ($${typicalPrice}/kWh). TrueQuote validation failed.`,
src/services/calculationValidator.ts:340:            message: `Solar price ($${solarPricePerW.toFixed(2)}/W) deviates ${deviation.toFixed(1)}% from benchmark ($${typicalPrice}/W). TrueQuote validation failed.`,
src/services/calculationValidator.ts:394:          message: `Installation ratio (${(installationRatio * 100).toFixed(0)}%) deviates ${deviation.toFixed(1)}% from benchmark (${(typicalRatio * 100).toFixed(0)}%). TrueQuote validation failed.`,
src/services/calculationValidator.ts:583:          message: `System power calculation deviates ${powerDeviation.toFixed(1)}% from expected benchmark (${expectedPowerKW} kW). TrueQuote validation failed.`,
src/services/calculationValidator.ts:611:          message: `Equipment cost deviates ${costDeviation.toFixed(1)}% from expected benchmark ($${expectedEquipmentCost.toLocaleString()}). TrueQuote validation failed.`,
src/services/calculationValidator.ts:694:  // The shouldRecalculate() and applyCorrections() methods have been removed.
src/services/advancedBessAnalytics.ts:292:  calculateSoCFromVoltage(voltage: number): number {
src/services/advancedBessAnalytics.ts:315:  calculateRoundTripEfficiency(soc: number, power_kW: number): number {
src/services/advancedBessAnalytics.ts:335:  calculateDegradation(
src/services/advancedBessAnalytics.ts:435:      const efficiency = new BatteryElectrochemicalModel(batteryModel).calculateRoundTripEfficiency(
src/services/advancedBessAnalytics.ts:452:      const hourly_savings = this.calculateHourlySavings(
src/services/advancedBessAnalytics.ts:634:  private static calculateHourlySavings(
src/services/advancedBessAnalytics.ts:692:      const uncertainty = this.calculateUncertainty(model, futureFeatures, targets);
src/services/advancedBessAnalytics.ts:810:    const mse = this.calculateMSE(features, targets, weights, bias);
src/services/advancedBessAnalytics.ts:819:  private static calculateMSE(
src/services/advancedBessAnalytics.ts:861:  private static calculateUncertainty(
src/services/advancedBessAnalytics.ts:919:    // NOTE: For accurate pricing, use calculateFinancialMetrics() from centralizedCalculations.ts
src/design-system/index.ts:6: * "Merlin Energy powered by TrueQuote‚Ñ¢"
src/design-system/index.ts:11: * - Amber/orange accents for TrueQuote results (Steps 5-6)
src/design-system/index.ts:52:  // TrueQuote Accent (Steps 5-6: The Results)
src/design-system/index.ts:179:    // TrueQuote Primary (Steps 5-6)
src/design-system/index.ts:334:  // Steps 5-6: TrueQuote Results
src/design-system/index.ts:389: * STEPS 5-6 (TrueQuote Results):
src/design-system/index.ts:392: * - TrueQuote badge prominent with amber border
src/design-system/index.ts:398: * - Amber = Output/Results (TrueQuote verified)
src/services/compareConfigFinancials.ts:6: * All numbers come from the unified quote calculator (SSOT).
src/services/compareConfigFinancials.ts:15:  calculateQuote,
src/services/compareConfigFinancials.ts:27: * Wraps the SSOT calculator to provide Compare & Configure specific output.
src/services/compareConfigFinancials.ts:30: * @returns Financial summary with TrueQuote‚Ñ¢ source tracking
src/services/compareConfigFinancials.ts:32:export async function calculateFinancials(inputs: FinancialInputs): Promise<FinancialResult> {
src/services/compareConfigFinancials.ts:48:    // Call SSOT calculator
src/services/compareConfigFinancials.ts:62:    const quote = await calculateQuote(quoteInput);
src/services/compareConfigFinancials.ts:69:    return calculateFallbackFinancials(inputs);
src/services/compareConfigFinancials.ts:77:export function calculateFinancialsSync(inputs: FinancialInputs): FinancialResult {
src/services/compareConfigFinancials.ts:121:  const npv25Year = calculateNPV(annualSavings, netInvestment, 0.08, 25);
src/services/compareConfigFinancials.ts:186:  const npv25Year = financials.npv || calculateNPV(annualSavings, netInvestment, 0.08, 25);
src/services/compareConfigFinancials.ts:216:function calculateFallbackFinancials(inputs: FinancialInputs): FinancialResult {
src/services/compareConfigFinancials.ts:217:  return calculateFinancialsSync(inputs);
src/services/compareConfigFinancials.ts:223:function calculateNPV(
src/services/compareConfigFinancials.ts:285:export default calculateFinancials;
src/core/domain/financial.types.ts:53:  // Equipment costs (if already calculated)
src/services/itcCalculator.ts:32: * TrueQuote‚Ñ¢ COMPLIANCE:
src/services/itcCalculator.ts:101:  // TrueQuote‚Ñ¢ Attribution
src/services/itcCalculator.ts:111:    calculatedAt: string;
src/services/itcCalculator.ts:247:export function calculateITC(input: ITCProjectInput): ITCCalculationResult {
src/services/itcCalculator.ts:472:      calculatedAt: new Date().toISOString(),
src/services/itcCalculator.ts:582: * Get ITC documentation for TrueQuote‚Ñ¢ display
src/services/itcCalculator.ts:607:  calculateITC,
src/pages/MetaCalculationsPage.tsx:346:                <h1 className="text-2xl font-bold">TrueQuote‚Ñ¢ Meta Calculations</h1>
src/pages/MetaCalculationsPage.tsx:639:        TrueQuote‚Ñ¢ Meta Calculations ‚Ä¢ SSOT v2.0 ‚Ä¢ Porsche 911 Architecture
src/core/calculations/index.ts:9: * import { QuoteEngine } from '@/core/calculations';
src/core/calculations/index.ts:11: * const quote = await QuoteEngine.generateQuote({ ... });
src/core/calculations/index.ts:15:export { QuoteEngine, default } from './QuoteEngine';
src/core/calculations/index.ts:39:} from './QuoteEngine';
src/components/verticals/CarWashEnergy.tsx:9: * - Simple calculator: # bays, cars/day, state ‚Üí instant savings
src/components/verticals/CarWashEnergy.tsx:13: * Uses: calculateQuote() from unifiedQuoteCalculator (SINGLE SOURCE OF TRUTH)
src/components/verticals/CarWashEnergy.tsx:21:import { QuoteEngine } from '@/core/calculations';
src/components/verticals/CarWashEnergy.tsx:23:import { calculateCarWashPowerSimple, type CarWashTypeSimple } from '@/services/useCasePowerCalculations';
src/components/verticals/CarWashEnergy.tsx:40:import { TrueQuoteBadgeCanonical } from '@/components/shared/TrueQuoteBadgeCanonical';
src/components/verticals/CarWashEnergy.tsx:41:import { TrueQuoteModal } from '@/components/shared/TrueQuoteModal';
src/components/verticals/CarWashEnergy.tsx:131:function calculateCarWashPower(inputs: CarWashInputs): { peakKW: number; dailyKWh: number } {
src/components/verticals/CarWashEnergy.tsx:136:  // Call SSOT calculator - map to 'tunnel' type which is closest to typical landing page scenario
src/components/verticals/CarWashEnergy.tsx:137:  const result = calculateCarWashPowerSimple({
src/components/verticals/CarWashEnergy.tsx:319:  // TrueQuote Modal
src/components/verticals/CarWashEnergy.tsx:320:  const [showTrueQuoteModal, setShowTrueQuoteModal] = useState(false);
src/components/verticals/CarWashEnergy.tsx:322:  // Hero inline estimate - calculated from inputs (Dec 2025 - removed popup)
src/components/verticals/CarWashEnergy.tsx:344:      const { peakKW, dailyKWh } = calculateCarWashPower(inputs);
src/components/verticals/CarWashEnergy.tsx:357:      // Use unified calculator with ZIP-based rates
src/components/verticals/CarWashEnergy.tsx:358:      const result = await QuoteEngine.generateQuote({
src/components/verticals/CarWashEnergy.tsx:411:  const { peakKW } = calculateCarWashPower(inputs);
src/components/verticals/CarWashEnergy.tsx:441:              href="#calculator"
src/components/verticals/CarWashEnergy.tsx:500:                  document.getElementById('calculator-section')?.scrollIntoView({ behavior: 'smooth' });
src/components/verticals/CarWashEnergy.tsx:517:              {/* TrueQuote Badge - Trust signal */}
src/components/verticals/CarWashEnergy.tsx:520:                  onClick={() => setShowTrueQuoteModal(true)}
src/components/verticals/CarWashEnergy.tsx:523:                  <TrueQuoteBadgeCanonical />
src/components/verticals/CarWashEnergy.tsx:526:                  onClick={() => setShowTrueQuoteModal(true)}
src/components/verticals/CarWashEnergy.tsx:636:      <section id="calculator" className="py-16 bg-white/5 backdrop-blur-sm">
src/components/verticals/CarWashEnergy.tsx:888:                  {/* TrueQuote‚Ñ¢ Attribution - NEW Dec 13, 2025 */}
src/components/verticals/CarWashEnergy.tsx:895:                            <span className="text-sm font-bold text-emerald-300">TrueQuote‚Ñ¢ Verified</span>
src/components/verticals/CarWashEnergy.tsx:902:                            onClick={() => setShowTrueQuoteModal(true)}
src/components/verticals/CarWashEnergy.tsx:1271:      {/* TrueQuote Modal */}
src/components/verticals/CarWashEnergy.tsx:1272:      <TrueQuoteModal 
src/components/verticals/CarWashEnergy.tsx:1273:        isOpen={showTrueQuoteModal} 
src/components/verticals/CarWashEnergy.tsx:1274:        onClose={() => setShowTrueQuoteModal(false)} 
src/services/benchmarkSources.ts:1223: * Generate complete sizing audit trail for TrueQuote‚Ñ¢
src/services/restaurantIndustryProfile.ts:727:export function calculateRestaurantProfile(inputs: RestaurantInputs): RestaurantCalculations {
src/services/restaurantIndustryProfile.ts:888:  calculateRestaurantProfile,
src/services/baselineService.ts:8: * and calculates recommended BESS sizing based on actual data.
src/services/baselineService.ts:100:export async function calculateDatabaseBaseline(
src/services/baselineService.ts:159:        console.log(`üîå [BaselineService] Calling calculateEVChargingBaseline with:`, useCaseData);
src/services/baselineService.ts:161:      const evResult = calculateEVChargingBaseline(useCaseData);
src/services/baselineService.ts:163:        console.log(`üîå [BaselineService] EV Charging calculated:`, evResult);
src/services/baselineService.ts:173:      const dcResult = calculateDatacenterBaseline(useCaseData, scale);
src/services/baselineService.ts:175:        console.log(`üñ•Ô∏è [BaselineService] Datacenter calculated:`, dcResult);
src/services/baselineService.ts:185:      const collegeResult = calculateCollegeBaseline(useCaseData);
src/services/baselineService.ts:187:        console.log(`üéì [BaselineService] College calculated:`, collegeResult);
src/services/baselineService.ts:197:      const hospitalResult = calculateHospitalBaseline(useCaseData);
src/services/baselineService.ts:199:        console.log(`üè• [BaselineService] Hospital calculated:`, hospitalResult);
src/services/baselineService.ts:207:      const hotelResult = calculateHotelBaseline(useCaseData, String(scale));
src/services/baselineService.ts:209:        console.log(`üè® [BaselineService] Hotel calculated:`, hotelResult);
src/services/baselineService.ts:217:      const carWashResult = calculateCarWashBaseline(useCaseData);
src/services/baselineService.ts:219:        console.log(`üöó [BaselineService] Car Wash calculated:`, carWashResult);
src/services/baselineService.ts:227:      const warehouseResult = calculateWarehouseBaseline(useCaseData);
src/services/baselineService.ts:229:        console.log(`üì¶ [BaselineService] Warehouse calculated:`, warehouseResult);
src/services/baselineService.ts:237:      const mfgResult = calculateManufacturingBaseline(useCaseData);
src/services/baselineService.ts:239:        console.log(`üè≠ [BaselineService] Manufacturing calculated:`, mfgResult);
src/services/baselineService.ts:247:      const airportResult = calculateAirportBaseline(useCaseData);
src/services/baselineService.ts:249:        console.log(`‚úàÔ∏è [BaselineService] Airport calculated:`, airportResult);
src/services/baselineService.ts:257:      const retailResult = calculateRetailBaseline(useCaseData);
src/services/baselineService.ts:259:        console.log(`üè™ [BaselineService] Retail calculated:`, retailResult);
src/services/baselineService.ts:267:      const officeResult = calculateOfficeBaseline(useCaseData);
src/services/baselineService.ts:269:        console.log(`üè¢ [BaselineService] Office calculated:`, officeResult);
src/services/baselineService.ts:276:    // Scale is already calculated as MW in the wizard, so use it directly
src/services/baselineService.ts:319:      // ‚úÖ FIXED: Don't auto-calculate solar - let user control via wantsSolar preference
src/services/baselineService.ts:410:    // Then calculate: (baseline_kW / reference_size) * actual_size
src/services/baselineService.ts:515:              const calculatedLoad = userValue * additionalLoadKw;
src/services/baselineService.ts:516:              amenityLoadKW += calculatedLoad;
src/services/baselineService.ts:519:                  `  ‚ûï ${question.question_key}: +${calculatedLoad} kW (${userValue} √ó ${additionalLoadKw} kW)`
src/services/baselineService.ts:548:    // ‚úÖ FIXED: Don't auto-calculate solar - let user control via wantsSolar preference
src/services/baselineService.ts:595:function calculateDatacenterBaseline(
src/services/baselineService.ts:682:  // ‚úÖ FIXED: Don't auto-calculate solar - let user control via wantsSolar preference
src/services/baselineService.ts:704:export function calculateDatacenterBESS(
src/services/baselineService.ts:783:function calculateHospitalBaseline(useCaseData: Record<string, any>): BaselineCalculationResult {
src/services/baselineService.ts:818:  let calculatedKW = bedCount > 0 ? bedCount * perBed : 0;
src/services/baselineService.ts:822:  if (calculatedKW === 0) {
src/services/baselineService.ts:826:      calculatedKW = sqFt * 0.025; // 25 W/sqft for hospitals (higher than office)
src/services/baselineService.ts:838:    calculatedKW += calculatedKW * 0.15; // +15% for ICU
src/services/baselineService.ts:848:    calculatedKW += calculatedKW * 0.1; // +10% for operating rooms
src/services/baselineService.ts:857:    calculatedKW += 300; // MRI, CT scanners
src/services/baselineService.ts:861:  const finalKW = calculatedKW > 0 ? calculatedKW : 1000; // 1 MW minimum for hospitals
src/services/baselineService.ts:868:      calculatedKW,
src/services/baselineService.ts:894:function calculateHotelBaseline(
src/services/baselineService.ts:938:  let calculatedKW = categoryBaseLoad[hotelCategory] || 175;
src/services/baselineService.ts:939:  const calcDetails: string[] = [`Base (${hotelCategory}): ${calculatedKW}kW`];
src/services/baselineService.ts:957:        calculatedKW += load;
src/services/baselineService.ts:978:        calculatedKW += load;
src/services/baselineService.ts:992:  calculatedKW += meetingLoads[meetingSpace] || 0;
src/services/baselineService.ts:1004:  calculatedKW += laundryLoads[laundryOperations] || 0;
src/services/baselineService.ts:1017:  calculatedKW += parkingLoads[parking] || 0;
src/services/baselineService.ts:1032:        calculatedKW += load;
src/services/baselineService.ts:1037:  const powerMW = Math.max(0.1, Math.round((calculatedKW / 1000) * 100) / 100);
src/services/baselineService.ts:1045:      calculatedKW,
src/services/baselineService.ts:1056:    description: `Hotel (${hotelCategory}): ${calculatedKW.toLocaleString()} kW - ${calcDetails.slice(0, 3).join(", ")}`,
src/services/baselineService.ts:1070:function calculateCarWashBaseline(useCaseData: Record<string, any>): BaselineCalculationResult {
src/services/baselineService.ts:1103:  let calculatedKW = bayCount > 0 ? bayCount * perBay : 0;
src/services/baselineService.ts:1110:    calculatedKW += vacuumCount * 3; // 3 kW per vacuum station
src/services/baselineService.ts:1114:    calculatedKW += 20; // Detail equipment
src/services/baselineService.ts:1118:    calculatedKW += 15; // Reclaim pumps
src/services/baselineService.ts:1122:  const finalKW = calculatedKW > 0 ? calculatedKW : 50; // Minimum
src/services/baselineService.ts:1129:      calculatedKW,
src/services/baselineService.ts:1155:function calculateWarehouseBaseline(useCaseData: Record<string, any>): BaselineCalculationResult {
src/services/baselineService.ts:1191:  let calculatedKW = sqFt > 0 ? (sqFt * perSqFt) / 1000 : 0;
src/services/baselineService.ts:1198:    calculatedKW += forkliftCount * 15; // 15 kW per charger
src/services/baselineService.ts:1204:    calculatedKW += dockCount * 3; // Dock levelers, lights
src/services/baselineService.ts:1208:    calculatedKW += calculatedKW * 0.2; // +20% for conveyor systems
src/services/baselineService.ts:1212:  const finalKW = calculatedKW > 0 ? calculatedKW : 300; // Minimum
src/services/baselineService.ts:1219:      calculatedKW,
src/services/baselineService.ts:1245:function calculateManufacturingBaseline(
src/services/baselineService.ts:1290:  let calculatedKW = sqFt > 0 ? (sqFt * perSqFt) / 1000 : 0;
src/services/baselineService.ts:1301:    calculatedKW += calculatedKW * 0.15; // +15% for compressors
src/services/baselineService.ts:1306:    calculatedKW += cncCount * 25; // 25 kW average per CNC
src/services/baselineService.ts:1310:    calculatedKW += calculatedKW * 0.2; // +20% for welding
src/services/baselineService.ts:1314:  const finalKW = calculatedKW > 0 ? calculatedKW : 500; // Minimum for manufacturing
src/services/baselineService.ts:1321:      calculatedKW,
src/services/baselineService.ts:1347:function calculateAirportBaseline(useCaseData: Record<string, any>): BaselineCalculationResult {
src/services/baselineService.ts:1368:  let calculatedKW = 0;
src/services/baselineService.ts:1373:    calculatedKW = passengers * 0.0008; // 0.8 W per annual passenger
src/services/baselineService.ts:1376:    calculatedKW = (terminalSqFt * 30) / 1000; // 30 W/sqft for terminals
src/services/baselineService.ts:1382:    calculatedKW += 500; // Runway and taxiway lighting
src/services/baselineService.ts:1386:    calculatedKW += 200; // ATC systems
src/services/baselineService.ts:1391:    calculatedKW += bridges * 25; // 25 kW per jet bridge
src/services/baselineService.ts:1395:  const finalKW = calculatedKW > 0 ? calculatedKW : 5000; // 5 MW minimum for any airport
src/services/baselineService.ts:1402:      calculatedKW,
src/services/baselineService.ts:1428:function calculateRetailBaseline(useCaseData: Record<string, any>): BaselineCalculationResult {
src/services/baselineService.ts:1466:  let calculatedKW = sqFt > 0 ? (sqFt * perSqFt) / 1000 : 0;
src/services/baselineService.ts:1472:    calculatedKW += calculatedKW * 0.3; // +30% for refrigeration
src/services/baselineService.ts:1476:    calculatedKW += 50; // Food prep
src/services/baselineService.ts:1480:    calculatedKW += 25; // Digital signage, displays
src/services/baselineService.ts:1484:  const finalKW = calculatedKW > 0 ? calculatedKW : 100; // Minimum
src/services/baselineService.ts:1491:      calculatedKW,
src/services/baselineService.ts:1517:function calculateOfficeBaseline(useCaseData: Record<string, any>): BaselineCalculationResult {
src/services/baselineService.ts:1558:  let calculatedKW = sqFt > 0 ? (sqFt * perSqFt) / 1000 : 0;
src/services/baselineService.ts:1569:    calculatedKW += 100; // Server room
src/services/baselineService.ts:1573:    calculatedKW += 30; // Fitness equipment
src/services/baselineService.ts:1577:    calculatedKW += 75; // Commercial kitchen
src/services/baselineService.ts:1590:    calculatedKW += chargers * 7; // L2 chargers
src/services/baselineService.ts:1598:      calculatedKW += elevators * 15; // ~15 kW per elevator
src/services/baselineService.ts:1603:  const finalKW = calculatedKW > 0 ? calculatedKW : 200; // Minimum
src/services/baselineService.ts:1611:      calculatedKW,
src/services/baselineService.ts:1638:function calculateCollegeBaseline(useCaseData: Record<string, any>): BaselineCalculationResult {
src/services/baselineService.ts:1700:  let calculatedKW = 0;
src/services/baselineService.ts:1706:    calculatedKW = (totalSqFt * wattsPerSqFt) / 1000;
src/services/baselineService.ts:1711:    calculatedKW = students * kwPerStudent;
src/services/baselineService.ts:1725:    additionalKW += calculatedKW * 0.15; // +15% for research loads
src/services/baselineService.ts:1736:    additionalKW += calculatedKW * 0.1; // +10% for medical
src/services/baselineService.ts:1759:  const totalKW = calculatedKW + additionalKW;
src/services/baselineService.ts:1774:      calculatedKW,
src/services/baselineService.ts:1796: * calculates potential savings from:
src/services/baselineService.ts:1805:export function calculateGridStrategySavings(
src/services/baselineService.ts:1929:function calculateEVChargingBaseline(useCaseData: Record<string, any>): BaselineCalculationResult {
src/services/baselineService.ts:2118:  const gridStrategy = calculateGridStrategySavings(useCaseData, peakDemandMW);
src/services/baselineService.ts:2278:// LEGACY COMPATIBILITY - calculateBESSSize
src/services/baselineService.ts:2282: * @deprecated Use calculateDatabaseBaseline() for new code
src/services/baselineService.ts:2298:export function calculateBESSSize(params: {
src/components/verticals/EVChargingEnergy.tsx:9: * - Simple calculator: # ports, charger types, utilization ‚Üí instant savings
src/components/verticals/EVChargingEnergy.tsx:13: * Uses: calculateQuote() from unifiedQuoteCalculator (SINGLE SOURCE OF TRUTH)
src/components/verticals/EVChargingEnergy.tsx:21:import { QuoteEngine } from '@/core/calculations';
src/components/verticals/EVChargingEnergy.tsx:23:import { calculateEVChargingPowerSimple } from '@/services/evChargingCalculations';
src/components/verticals/EVChargingEnergy.tsx:30:import { TrueQuoteBadgeCanonical } from '@/components/shared/TrueQuoteBadgeCanonical';
src/components/verticals/EVChargingEnergy.tsx:31:import { TrueQuoteModal } from '@/components/shared/TrueQuoteModal';
src/components/verticals/EVChargingEnergy.tsx:207:function calculateEVChargingPower(inputs: EVChargingInputs): { peakKW: number; dailyKWh: number; demandChargeImpact: number } {
src/components/verticals/EVChargingEnergy.tsx:212:  // Call SSOT calculator
src/components/verticals/EVChargingEnergy.tsx:213:  const result = calculateEVChargingPowerSimple({
src/components/verticals/EVChargingEnergy.tsx:282:  // TrueQuote Modal
src/components/verticals/EVChargingEnergy.tsx:283:  const [showTrueQuoteModal, setShowTrueQuoteModal] = useState(false);
src/components/verticals/EVChargingEnergy.tsx:285:  // Hero inline estimate - calculated from inputs (Dec 2025 - removed popup)
src/components/verticals/EVChargingEnergy.tsx:313:      const { peakKW, dailyKWh } = calculateEVChargingPower(inputs);
src/components/verticals/EVChargingEnergy.tsx:322:      const result = await QuoteEngine.generateQuote({
src/components/verticals/EVChargingEnergy.tsx:361:  const { peakKW, demandChargeImpact } = calculateEVChargingPower(inputs);
src/components/verticals/EVChargingEnergy.tsx:393:            <a href="#calculator" className="hidden md:block text-emerald-200 hover:text-white text-sm font-semibold transition-colors hover:bg-emerald-500/20 px-4 py-2 rounded-lg">
src/components/verticals/EVChargingEnergy.tsx:445:                onClick={() => document.getElementById('calculator')?.scrollIntoView({ behavior: 'smooth' })}
src/components/verticals/EVChargingEnergy.tsx:467:              {/* TrueQuote Badge - Trust signal */}
src/components/verticals/EVChargingEnergy.tsx:470:                  onClick={() => setShowTrueQuoteModal(true)}
src/components/verticals/EVChargingEnergy.tsx:473:                  <TrueQuoteBadgeCanonical />
src/components/verticals/EVChargingEnergy.tsx:476:                  onClick={() => setShowTrueQuoteModal(true)}
src/components/verticals/EVChargingEnergy.tsx:587:      <section id="calculator" className="py-16 bg-gradient-to-b from-black/30 via-emerald-900/20 to-black/30 backdrop-blur-sm">
src/components/verticals/EVChargingEnergy.tsx:795:                  {/* TrueQuote‚Ñ¢ Attribution - NEW Dec 13, 2025 */}
src/components/verticals/EVChargingEnergy.tsx:802:                            <span className="text-sm font-bold text-emerald-300">TrueQuote‚Ñ¢ Verified</span>
src/components/verticals/EVChargingEnergy.tsx:809:                            onClick={() => setShowTrueQuoteModal(true)}
src/components/verticals/EVChargingEnergy.tsx:1145:      {/* TrueQuote Modal */}
src/components/verticals/EVChargingEnergy.tsx:1146:      <TrueQuoteModal 
src/components/verticals/EVChargingEnergy.tsx:1147:        isOpen={showTrueQuoteModal} 
src/components/verticals/EVChargingEnergy.tsx:1148:        onClose={() => setShowTrueQuoteModal(false)} 
src/core/calculations/QuoteEngine.ts:13: * ‚îÇ                         QuoteEngine                             ‚îÇ
src/core/calculations/QuoteEngine.ts:31: * import { QuoteEngine } from '@/core/calculations/QuoteEngine';
src/core/calculations/QuoteEngine.ts:34: * const quote = await QuoteEngine.generateQuote({
src/core/calculations/QuoteEngine.ts:43: * const estimate = await QuoteEngine.quickEstimate(0.5, 4, 0.20);
src/core/calculations/QuoteEngine.ts:46: * const power = QuoteEngine.calculatePower('hotel', { rooms: 150 });
src/core/calculations/QuoteEngine.ts:60:  calculateQuote,
src/core/calculations/QuoteEngine.ts:67:  calculateUseCasePower,
src/core/calculations/QuoteEngine.ts:68:  calculateHotelPowerSimple,
src/core/calculations/QuoteEngine.ts:69:  calculateCarWashPowerSimple,
src/core/calculations/QuoteEngine.ts:78:  calculateEVChargingPowerSimple,
src/core/calculations/QuoteEngine.ts:79:  calculateEVHubPower,
src/core/calculations/QuoteEngine.ts:80:  calculateEVHubBESSSize,
src/core/calculations/QuoteEngine.ts:88:  calculateFinancialMetrics,
src/core/calculations/QuoteEngine.ts:94:  calculateEquipmentBreakdown,
src/core/calculations/QuoteEngine.ts:190: * QuoteEngine - The single source of truth for all quote calculations.
src/core/calculations/QuoteEngine.ts:201:export class QuoteEngine {
src/core/calculations/QuoteEngine.ts:284:    if (import.meta.env.DEV) console.log("üßπ [QuoteEngine] Cache cleared");
src/core/calculations/QuoteEngine.ts:317:   * const quote = await QuoteEngine.generateQuote({
src/core/calculations/QuoteEngine.ts:343:          console.warn("‚ö†Ô∏è [QuoteEngine] Validation warnings:", validation.warnings);
src/core/calculations/QuoteEngine.ts:352:          if (import.meta.env.DEV) console.log("‚úÖ [QuoteEngine] Cache hit");
src/core/calculations/QuoteEngine.ts:365:        console.log("üîÆ [QuoteEngine] Generating quote:", {
src/core/calculations/QuoteEngine.ts:375:      const result = await calculateQuote(input);
src/core/calculations/QuoteEngine.ts:399:      console.error("‚ùå [QuoteEngine] generateQuote failed:", err);
src/core/calculations/QuoteEngine.ts:416:   * const estimate = await QuoteEngine.quickEstimate(0.5, 4, 0.20);
src/core/calculations/QuoteEngine.ts:425:      console.log("‚ö° [QuoteEngine] Quick estimate:", {
src/core/calculations/QuoteEngine.ts:441:   * Routes to the appropriate SSOT calculator based on use case slug.
src/core/calculations/QuoteEngine.ts:448:   * const hotelPower = QuoteEngine.calculatePower('hotel', {
src/core/calculations/QuoteEngine.ts:454:  static calculatePower(useCase: string, data: Record<string, unknown>): PowerCalculationResult {
src/core/calculations/QuoteEngine.ts:455:    if (import.meta.env.DEV) console.log("‚ö° [QuoteEngine] Calculating power for:", useCase);
src/core/calculations/QuoteEngine.ts:457:    return calculateUseCasePower(useCase, data);
src/core/calculations/QuoteEngine.ts:466:  static calculateHotelPower(input: HotelPowerSimpleInput): HotelPowerSimpleResult {
src/core/calculations/QuoteEngine.ts:467:    return calculateHotelPowerSimple(input);
src/core/calculations/QuoteEngine.ts:476:  static calculateCarWashPower(input: CarWashPowerSimpleInput): CarWashPowerSimpleResult {
src/core/calculations/QuoteEngine.ts:477:    return calculateCarWashPowerSimple(input);
src/core/calculations/QuoteEngine.ts:486:  static calculateEVChargingPower(input: EVChargingPowerSimpleInput): EVChargingPowerSimpleResult {
src/core/calculations/QuoteEngine.ts:487:    return calculateEVChargingPowerSimple(input);
src/core/calculations/QuoteEngine.ts:501:  static calculateEVHubPower(
src/core/calculations/QuoteEngine.ts:505:    return calculateEVHubPower(config, concurrencyPercent);
src/core/calculations/QuoteEngine.ts:511:   * @param powerResult - Power result from calculateEVHubPower
src/core/calculations/QuoteEngine.ts:514:  static calculateEVHubBESSSize(powerResult: EVHubPowerResult): EVHubBESSRecommendation {
src/core/calculations/QuoteEngine.ts:515:    return calculateEVHubBESSSize(powerResult);
src/core/calculations/QuoteEngine.ts:533:  static async calculateFinancials(
src/core/calculations/QuoteEngine.ts:537:      "‚ö†Ô∏è [QuoteEngine] Direct financial calculation - prefer generateQuote() for full orchestration"
src/core/calculations/QuoteEngine.ts:540:    return calculateFinancialMetrics(input);
src/core/calculations/QuoteEngine.ts:566:  static async calculateEquipment(
src/core/calculations/QuoteEngine.ts:578:      "‚ö†Ô∏è [QuoteEngine] Direct equipment calculation - prefer generateQuote() for full orchestration"
src/core/calculations/QuoteEngine.ts:581:    return calculateEquipmentBreakdown(
src/core/calculations/QuoteEngine.ts:617:   * const validation = QuoteEngine.validateInput({ storageSizeMW: 0.5 });
src/core/calculations/QuoteEngine.ts:773:export default QuoteEngine;
src/components/verticals/HotelEnergy.tsx:9: * - Simple calculator: # rooms, amenities, state ‚Üí instant savings
src/components/verticals/HotelEnergy.tsx:13: * Uses: calculateQuote() from unifiedQuoteCalculator (SINGLE SOURCE OF TRUTH)
src/components/verticals/HotelEnergy.tsx:21:import { QuoteEngine } from '@/core/calculations';
src/components/verticals/HotelEnergy.tsx:23:import { calculateHotelPowerSimple, type HotelClassSimple, type HotelAmenitySimple } from '@/services/useCasePowerCalculations';
src/components/verticals/HotelEnergy.tsx:35:import { TrueQuoteModal } from '@/components/shared/TrueQuoteModal';
src/components/verticals/HotelEnergy.tsx:461:function calculateHotelPower(inputs: HotelInputs): { peakKW: number; dailyKWh: number; demandChargeImpact: number } {
src/components/verticals/HotelEnergy.tsx:477:  // Call SSOT calculator
src/components/verticals/HotelEnergy.tsx:478:  const result = calculateHotelPowerSimple({
src/components/verticals/HotelEnergy.tsx:603:  // Hotel class is determined by SSOT (useCasePowerCalculations.calculateHotelPowerSimple)
src/components/verticals/HotelEnergy.tsx:640:  // TrueQuote Modal
src/components/verticals/HotelEnergy.tsx:641:  const [showTrueQuoteModal, setShowTrueQuoteModal] = useState(false);
src/components/verticals/HotelEnergy.tsx:650:  // Hero inline estimate - calculated from ALL inputs (Dec 2025 - comprehensive calculation)
src/components/verticals/HotelEnergy.tsx:761:      const { peakKW, dailyKWh } = calculateHotelPower(inputs);
src/components/verticals/HotelEnergy.tsx:769:      const result = await QuoteEngine.generateQuote({
src/components/verticals/HotelEnergy.tsx:808:  const { peakKW, demandChargeImpact } = calculateHotelPower(inputs);
src/components/verticals/HotelEnergy.tsx:1236:              {/* Header with TrueQuote */}
src/components/verticals/HotelEnergy.tsx:1245:                  onClick={() => setShowTrueQuoteModal(true)}
src/components/verticals/HotelEnergy.tsx:1249:                  <span className="text-sm font-black text-amber-400">TrueQuote‚Ñ¢</span>
src/components/verticals/HotelEnergy.tsx:1804:      {/* TrueQuote Modal */}
src/components/verticals/HotelEnergy.tsx:1805:      <TrueQuoteModal 
src/components/verticals/HotelEnergy.tsx:1806:        isOpen={showTrueQuoteModal} 
src/components/verticals/HotelEnergy.tsx:1807:        onClose={() => setShowTrueQuoteModal(false)} 
src/services/dataCenterIndustryProfile.ts:465:          powerImpact: "We'll calculate",
src/services/dataCenterIndustryProfile.ts:925:export function calculateDataCenterProfile(inputs: DataCenterInputs): DataCenterCalculations {
src/services/dataCenterIndustryProfile.ts:1102:  calculateDataCenterProfile,
src/hooks/useAdvancedSystemCalculations.ts:24:  calculatedWatts: number;
src/hooks/useAdvancedSystemCalculations.ts:27:  calculatedAmpsAC: number;
src/hooks/useAdvancedSystemCalculations.ts:29:  calculatedAmpsDC: number;
src/hooks/useAdvancedSystemCalculations.ts:63: * @deprecated For accurate pricing, use calculateEquipmentBreakdown() from equipmentCalculations.ts
src/hooks/useAdvancedSystemCalculations.ts:68:  // For accurate quotes, use calculateEquipmentBreakdown() from equipmentCalculations.ts
src/hooks/useAdvancedSystemCalculations.ts:112:    const calculatedWatts = storageSizeMW * 1000000; // Convert MW to W
src/hooks/useAdvancedSystemCalculations.ts:116:        : calculatedWatts;
src/hooks/useAdvancedSystemCalculations.ts:120:    const calculatedAmpsAC = totalWatts / electricalConfig.systemVoltage / Math.sqrt(3);
src/hooks/useAdvancedSystemCalculations.ts:124:        : calculatedAmpsAC;
src/hooks/useAdvancedSystemCalculations.ts:127:    const calculatedAmpsDC = totalWatts / electricalConfig.dcVoltage;
src/hooks/useAdvancedSystemCalculations.ts:131:        : calculatedAmpsDC;
src/hooks/useAdvancedSystemCalculations.ts:142:      calculatedWatts,
src/hooks/useAdvancedSystemCalculations.ts:145:      calculatedAmpsAC,
src/hooks/useAdvancedSystemCalculations.ts:147:      calculatedAmpsDC,
src/core/calculations/__tests__/QuoteEngine.test.ts:5: * Comprehensive test suite for the QuoteEngine SSOT orchestrator.
src/core/calculations/__tests__/QuoteEngine.test.ts:20:  QuoteEngine, 
src/core/calculations/__tests__/QuoteEngine.test.ts:22:} from '../QuoteEngine';
src/core/calculations/__tests__/QuoteEngine.test.ts:60:describe('QuoteEngine Caching', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:63:    QuoteEngine.clearCache();
src/core/calculations/__tests__/QuoteEngine.test.ts:73:    const result1 = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:77:    const result2 = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:86:    await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:89:    const result = await QuoteEngine.generateQuote(validQuoteInput, { skipCache: true });
src/core/calculations/__tests__/QuoteEngine.test.ts:97:    const result1 = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:102:    const result2 = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:107:    const result3 = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:113:    await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:116:    let stats = QuoteEngine.getCacheStats();
src/core/calculations/__tests__/QuoteEngine.test.ts:120:    QuoteEngine.clearCache();
src/core/calculations/__tests__/QuoteEngine.test.ts:123:    stats = QuoteEngine.getCacheStats();
src/core/calculations/__tests__/QuoteEngine.test.ts:127:    const result = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:147:      await QuoteEngine.generateQuote(input);
src/core/calculations/__tests__/QuoteEngine.test.ts:152:    const stats = QuoteEngine.getCacheStats();
src/core/calculations/__tests__/QuoteEngine.test.ts:157:    const stats = QuoteEngine.getCacheStats();
src/core/calculations/__tests__/QuoteEngine.test.ts:170:    const result1 = await QuoteEngine.generateQuote(input1);
src/core/calculations/__tests__/QuoteEngine.test.ts:171:    const result2 = await QuoteEngine.generateQuote(input2);
src/core/calculations/__tests__/QuoteEngine.test.ts:186:describe('QuoteEngine Validation', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:189:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:198:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:207:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:217:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:227:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:237:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:247:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:257:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:268:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:279:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:290:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:301:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:314:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:324:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:334:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:346:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:358:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:370:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:381:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:392:      const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:404:      const result = QuoteEngine.validateInput(minimalQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:410:      const result = QuoteEngine.validateInput(fullQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:419:        const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:432:        const result = QuoteEngine.validateInput({
src/core/calculations/__tests__/QuoteEngine.test.ts:446:describe('QuoteEngine Quote Generation', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:448:    QuoteEngine.clearCache();
src/core/calculations/__tests__/QuoteEngine.test.ts:452:    const result = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:462:    const result = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:465:    expect(result.metadata.engineVersion).toBe(QuoteEngine.VERSION);
src/core/calculations/__tests__/QuoteEngine.test.ts:469:    const result = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:481:    await expect(QuoteEngine.generateQuote(invalidInput)).rejects.toThrow('Invalid quote input');
src/core/calculations/__tests__/QuoteEngine.test.ts:492:    const result = await QuoteEngine.generateQuote(edgeCaseInput, { skipValidation: true });
src/core/calculations/__tests__/QuoteEngine.test.ts:497:    const result = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:505:    const result = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:513:    const result = await QuoteEngine.generateQuote(validQuoteInput);
src/core/calculations/__tests__/QuoteEngine.test.ts:525:      const result = await QuoteEngine.generateQuote(input, { skipCache: true });
src/core/calculations/__tests__/QuoteEngine.test.ts:535:      const result = await QuoteEngine.generateQuote(input, { skipCache: true });
src/core/calculations/__tests__/QuoteEngine.test.ts:541:    const smallSystem = await QuoteEngine.generateQuote(
src/core/calculations/__tests__/QuoteEngine.test.ts:546:    const largeSystem = await QuoteEngine.generateQuote(
src/core/calculations/__tests__/QuoteEngine.test.ts:556:    const shortDuration = await QuoteEngine.generateQuote(
src/core/calculations/__tests__/QuoteEngine.test.ts:561:    const longDuration = await QuoteEngine.generateQuote(
src/core/calculations/__tests__/QuoteEngine.test.ts:575:describe('QuoteEngine Power Calculations', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:576:  describe('calculatePower (generic)', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:577:    it('should calculate hotel power', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:578:      const result = QuoteEngine.calculatePower('hotel', {
src/core/calculations/__tests__/QuoteEngine.test.ts:587:    it('should calculate office power', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:588:      const result = QuoteEngine.calculatePower('office', {
src/core/calculations/__tests__/QuoteEngine.test.ts:596:    it('should calculate manufacturing power', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:597:      const result = QuoteEngine.calculatePower('manufacturing', {
src/core/calculations/__tests__/QuoteEngine.test.ts:606:      const result = QuoteEngine.calculatePower('hotel', {
src/core/calculations/__tests__/QuoteEngine.test.ts:618:  describe('calculateHotelPower (simple)', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:620:      const result = QuoteEngine.calculateHotelPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:634:      const small = QuoteEngine.calculateHotelPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:641:      const large = QuoteEngine.calculateHotelPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:652:      const basic = QuoteEngine.calculateHotelPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:659:      const fullAmenities = QuoteEngine.calculateHotelPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:670:      const economy = QuoteEngine.calculateHotelPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:677:      const luxury = QuoteEngine.calculateHotelPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:688:  describe('calculateCarWashPower (simple)', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:690:      const result = QuoteEngine.calculateCarWashPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:705:      const selfService = QuoteEngine.calculateCarWashPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:714:      const tunnel = QuoteEngine.calculateCarWashPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:728:      const small = QuoteEngine.calculateCarWashPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:737:      const large = QuoteEngine.calculateCarWashPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:750:  describe('calculateEVChargingPower (simple)', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:752:      const result = QuoteEngine.calculateEVChargingPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:765:      const small = QuoteEngine.calculateEVChargingPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:772:      const large = QuoteEngine.calculateEVChargingPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:783:      const level2Only = QuoteEngine.calculateEVChargingPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:790:      const dcfcOnly = QuoteEngine.calculateEVChargingPower({
src/core/calculations/__tests__/QuoteEngine.test.ts:808:describe('QuoteEngine Quick Estimate', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:810:    const result = await QuoteEngine.quickEstimate(0.5, 4, 0.20);
src/core/calculations/__tests__/QuoteEngine.test.ts:818:    const result = await QuoteEngine.quickEstimate(0.5, 4, 0.20);
src/core/calculations/__tests__/QuoteEngine.test.ts:826:    const small = await QuoteEngine.quickEstimate(0.1, 4, 0.15);
src/core/calculations/__tests__/QuoteEngine.test.ts:827:    const large = await QuoteEngine.quickEstimate(1.0, 4, 0.15);
src/core/calculations/__tests__/QuoteEngine.test.ts:834:    const lowRate = await QuoteEngine.quickEstimate(0.5, 4, 0.10);
src/core/calculations/__tests__/QuoteEngine.test.ts:835:    const highRate = await QuoteEngine.quickEstimate(0.5, 4, 0.30);
src/core/calculations/__tests__/QuoteEngine.test.ts:844:    const result = await QuoteEngine.quickEstimate(0.5, 4);
src/core/calculations/__tests__/QuoteEngine.test.ts:855:      await QuoteEngine.quickEstimate(0.5 + i * 0.1, 4, 0.15);
src/core/calculations/__tests__/QuoteEngine.test.ts:862:      await QuoteEngine.generateQuote(
src/core/calculations/__tests__/QuoteEngine.test.ts:880:describe('QuoteEngine Versioning', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:882:    expect(QuoteEngine.VERSION).toBeDefined();
src/core/calculations/__tests__/QuoteEngine.test.ts:883:    expect(typeof QuoteEngine.VERSION).toBe('string');
src/core/calculations/__tests__/QuoteEngine.test.ts:884:    expect(QuoteEngine.VERSION).toMatch(/^\d+\.\d+\.\d+$/); // semver format
src/core/calculations/__tests__/QuoteEngine.test.ts:888:    expect(QuoteEngine.VERSION_HISTORY).toBeDefined();
src/core/calculations/__tests__/QuoteEngine.test.ts:889:    expect(typeof QuoteEngine.VERSION_HISTORY).toBe('object');
src/core/calculations/__tests__/QuoteEngine.test.ts:890:    expect(QuoteEngine.VERSION_HISTORY[QuoteEngine.VERSION]).toBeDefined();
src/core/calculations/__tests__/QuoteEngine.test.ts:894:    const currentVersionEntry = QuoteEngine.VERSION_HISTORY[QuoteEngine.VERSION];
src/core/calculations/__tests__/QuoteEngine.test.ts:904:describe('QuoteEngine Utility Methods', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:907:      expect(QuoteEngine.getSystemCategory(0.01)).toBe('residential'); // 10 kW
src/core/calculations/__tests__/QuoteEngine.test.ts:908:      expect(QuoteEngine.getSystemCategory(0.03)).toBe('residential'); // 30 kW
src/core/calculations/__tests__/QuoteEngine.test.ts:909:      expect(QuoteEngine.getSystemCategory(0.049)).toBe('residential'); // 49 kW
src/core/calculations/__tests__/QuoteEngine.test.ts:913:      expect(QuoteEngine.getSystemCategory(0.05)).toBe('commercial'); // 50 kW
src/core/calculations/__tests__/QuoteEngine.test.ts:914:      expect(QuoteEngine.getSystemCategory(0.5)).toBe('commercial'); // 500 kW
src/core/calculations/__tests__/QuoteEngine.test.ts:915:      expect(QuoteEngine.getSystemCategory(0.99)).toBe('commercial'); // 990 kW
src/core/calculations/__tests__/QuoteEngine.test.ts:919:      expect(QuoteEngine.getSystemCategory(1.0)).toBe('utility'); // 1 MW
src/core/calculations/__tests__/QuoteEngine.test.ts:920:      expect(QuoteEngine.getSystemCategory(5.0)).toBe('utility'); // 5 MW
src/core/calculations/__tests__/QuoteEngine.test.ts:921:      expect(QuoteEngine.getSystemCategory(100)).toBe('utility'); // 100 MW
src/core/calculations/__tests__/QuoteEngine.test.ts:930:describe('QuoteEngine Edge Cases', () => {
src/core/calculations/__tests__/QuoteEngine.test.ts:932:    QuoteEngine.clearCache();
src/core/calculations/__tests__/QuoteEngine.test.ts:936:    const result = await QuoteEngine.generateQuote({
src/core/calculations/__tests__/QuoteEngine.test.ts:945:    const result = await QuoteEngine.generateQuote({
src/core/calculations/__tests__/QuoteEngine.test.ts:954:    const result = await QuoteEngine.generateQuote({
src/core/calculations/__tests__/QuoteEngine.test.ts:968:    const result = await QuoteEngine.generateQuote({
src/core/calculations/__tests__/QuoteEngine.test.ts:980:    const result = await QuoteEngine.generateQuote({
src/core/calculations/sizing/index.ts:30:  calculateBESSSizing,
src/core/calculations/sizing/index.ts:31:  calculateSolarModuleSeries
src/services/calculators/financialCalculator.ts:5: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/calculators/financialCalculator.ts:97:export function calculateFinancials(input: FinancialCalculationInput): FinancialCalculationResult {
src/services/calculators/financialCalculator.ts:115:  const demandChargeSavings = calculateDemandSavings(input.bessKW, input.demandCharge);
src/services/calculators/financialCalculator.ts:116:  const arbitrageSavings = calculateArbitrageSavings(input.bessKWh);
src/services/calculators/financialCalculator.ts:117:  const solarSavings = calculateSolarSavings(input.solarAnnualKWh, input.electricityRate);
src/services/calculators/financialCalculator.ts:127:  const twentyFiveYearNPV = calculateNPV(
src/services/calculators/financialCalculator.ts:138:  const irr = calculateIRR(netCost, annualSavings, FINANCIAL_CONSTANTS.PROJECT_LIFETIME_YEARS);
src/services/calculators/financialCalculator.ts:146:  const tenYearNetSavings = calculateCumulativeSavings(annualSavings, 10, FINANCIAL_CONSTANTS.ELECTRICITY_ESCALATION) - netCost;
src/services/calculators/financialCalculator.ts:147:  const lifetimeNetSavings = calculateCumulativeSavings(annualSavings, 25, FINANCIAL_CONSTANTS.ELECTRICITY_ESCALATION) - netCost;
src/services/calculators/financialCalculator.ts:177:function calculateDemandSavings(bessKW: number, demandCharge: number): number {
src/services/calculators/financialCalculator.ts:187:function calculateArbitrageSavings(bessKWh: number): number {
src/services/calculators/financialCalculator.ts:195:function calculateSolarSavings(annualKWh: number, electricityRate: number): number {
src/services/calculators/financialCalculator.ts:202:function calculateNPV(
src/services/calculators/financialCalculator.ts:232:function calculateCumulativeSavings(annualSavings: number, years: number, escalationRate: number): number {
src/services/calculators/financialCalculator.ts:243:function calculateIRR(initialCost: number, annualCashFlow: number, years: number): number {
src/services/calculators/financialCalculator.ts:285:export function calculateMonthlyPayment(
src/core/calculations/sizing/bessCalculator.ts:3: * Source: https://grid-synk.com/bess-roi-calculator/
src/core/calculations/sizing/bessCalculator.ts:186:export function calculateBESSSizing(input: BESSSizingInput): BESSSizingResult {
src/core/calculations/sizing/bessCalculator.ts:350:export function calculateSolarModuleSeries(params: SolarDesignParams): SolarDesignResult {
src/components/AdminDashboard.tsx:43:  calculatePremiumComparison,
src/components/AdminDashboard.tsx:312:    const comparison = calculatePremiumComparison(selectedPremiumUseCase, 1, 4, 0.5);
src/services/calculators/solarCalculator.ts:7: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/calculators/solarCalculator.ts:154:export async function calculateSolarAsync(input: SolarCalculationInput): Promise<SolarCalculationResult> {
src/services/calculators/solarCalculator.ts:181:  return calculateSolarInternal(input, stateData, constants);
src/services/calculators/solarCalculator.ts:187:export function calculateSolar(input: SolarCalculationInput): SolarCalculationResult {
src/services/calculators/solarCalculator.ts:200:  return calculateSolarInternal(input, stateData, SOLAR_CONSTANTS);
src/services/calculators/solarCalculator.ts:207:function calculateSolarInternal(
src/services/calculators/hotel16QCalculator.ts:12: * 5. BESS sizing (IEEE 4538388 ratio + TrueQuote‚Ñ¢)
src/services/calculators/hotel16QCalculator.ts:173:export function calculateHotel16Q(input: Hotel16QInput): Hotel16QResult {
src/contexts/QuoteContext.tsx:18:  calculateQuoteCompleteness,
src/contexts/QuoteContext.tsx:136:        // Recalculate total system power
src/contexts/QuoteContext.tsx:143:        // Recalculate battery capacity
src/contexts/QuoteContext.tsx:148:        newQuote.completionPercentage = calculateQuoteCompleteness(newQuote);
src/services/calculators/office16QCalculator.ts:43:export function calculateOffice16Q(input: Office16QInput): Office16QResult {
src/services/calculators/index.ts:5: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/calculators/evCharging16QCalculator.ts:63:export function calculateEVCharging16Q(input: EVCharging16QInput): EVCharging16QResult {
src/types/useCase.types.ts:152: * Helper function to calculate total power from equipment list
src/types/useCase.types.ts:154:export function calculateTotalPower(equipment: Equipment[]): {
src/services/calculators/dataCenterIntegration.ts:1:import { calculateDataCenter16Q, type DataCenter16QInput, type DataCenter16QResult } from './dataCenter16QCalculator';
src/services/calculators/dataCenterIntegration.ts:27:export function calculateDataCenterFromAnswers(answers: Record<string, unknown>): DataCenter16QResult | null {
src/services/calculators/dataCenterIntegration.ts:29:    const result = calculateDataCenter16Q(mapDataCenterAnswers(answers));
src/types/intelligence.types.ts:4:// SSOT Compliance: All types include TrueQuote‚Ñ¢ source attribution
src/types/intelligence.types.ts:15:  source: string; // TrueQuote‚Ñ¢ source attribution
src/types/intelligence.types.ts:54:  source: string; // TrueQuote‚Ñ¢ source attribution
src/types/intelligence.types.ts:76:  source: string; // TrueQuote‚Ñ¢ source attribution
src/services/calculators/hotelIntegration.ts:4: * Connects wizard answers ‚Üí calculator service ‚Üí wizard display
src/services/calculators/hotelIntegration.ts:8:import { calculateHotel16Q, type Hotel16QInput, type Hotel16QResult } from './hotel16QCalculator';
src/services/calculators/hotelIntegration.ts:11: * Map wizard answers to typed calculator input
src/services/calculators/hotelIntegration.ts:69:export function calculateHotelFromAnswers(answers: Record<string, unknown>): Hotel16QResult | null {
src/services/calculators/hotelIntegration.ts:72:    const result = calculateHotel16Q(input);
src/types/wizardState.ts:18:// SIZING OVERRIDES (TrueQuote‚Ñ¢ Manual Adjustments)
src/types/wizardState.ts:22: * When set, these take precedence over calculated values.
src/types/wizardState.ts:146:  calculated: {
src/types/wizardState.ts:161:  // TrueQuote‚Ñ¢ Sizing Overrides (Jan 21, 2026)
src/types/wizardState.ts:208:  calculated: {
src/types/wizardState.ts:231:export function calculateEVChargerLoad(chargers: {
src/types/wizardState.ts:299:    calculated: { ...currentState.calculated, ...updates.calculated },
src/services/calculators/loadCalculator.ts:5: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/calculators/loadCalculator.ts:9:import { calculateTruckStopLoad } from "../industries/truckStopIndustry";
src/services/calculators/loadCalculator.ts:57:    method: "custom", // Uses calculateTruckStopLoad function
src/services/calculators/loadCalculator.ts:215:function calculateCarWashLoad(
src/services/calculators/loadCalculator.ts:338:export function calculateLoad(input: LoadCalculationInput): LoadCalculationResult {
src/services/calculators/loadCalculator.ts:408:        peakDemandKW = calculateCarWashLoad(input.useCaseData, breakdown);
src/services/calculators/loadCalculator.ts:449:        const truckStopResult = calculateTruckStopLoad({
src/types/index.ts:29:  TrueQuoteVerificationProps,
src/services/calculators/evChargingIntegration.ts:1:import { calculateEVCharging16Q, type EVCharging16QInput, type EVCharging16QResult } from './evCharging16QCalculator';
src/services/calculators/evChargingIntegration.ts:27:export function calculateEVChargingFromAnswers(answers: Record<string, unknown>): EVCharging16QResult | null {
src/services/calculators/evChargingIntegration.ts:29:    const result = calculateEVCharging16Q(mapEVChargingAnswers(answers));
src/types/magicFit.ts:119:export interface TrueQuoteVerificationProps {
src/components/smb/SMBWizard.tsx:31:// ‚úÖ SSOT: Use QuoteEngine for all quote generation
src/components/smb/SMBWizard.tsx:32:import { QuoteEngine } from '@/core/calculations';
src/components/smb/SMBWizard.tsx:202:  // Calculate quote using QuoteEngine (SSOT)
src/components/smb/SMBWizard.tsx:211:      // ‚úÖ SSOT: Use QuoteEngine.generateQuote() for all quote calculations
src/components/smb/SMBWizard.tsx:212:      const quoteResult = await QuoteEngine.generateQuote({
src/components/smb/SMBWizard.tsx:590:                  Unable to calculate quote. Please try again.
src/services/calculators/officeIntegration.ts:1:import { calculateOffice16Q, type Office16QInput, type Office16QResult } from './office16QCalculator';
src/services/calculators/officeIntegration.ts:27:export function calculateOfficeFromAnswers(answers: Record<string, unknown>): Office16QResult | null {
src/services/calculators/officeIntegration.ts:29:    const result = calculateOffice16Q(mapOfficeAnswers(answers));
src/services/calculators/carWashIntegration.ts:4: * Connects car wash 16Q questions ‚Üí calculator service ‚Üí wizard display
src/services/calculators/carWashIntegration.ts:5: * Maps database question answers to calculator input format
src/services/calculators/carWashIntegration.ts:13:import { calculateCarWash16Q, type CarWash16QInput, type CarWash16QResult } from '@/services/calculators/carWash16QCalculator';
src/services/calculators/carWashIntegration.ts:20: * Maps raw wizard answers to typed calculator input
src/services/calculators/carWashIntegration.ts:85: * This is called by Step3Integration.tsx or QuoteEngine
src/services/calculators/carWashIntegration.ts:87:export function calculateCarWashFromAnswers(answers: Record<string, any>): CarWash16QResult {
src/services/calculators/carWashIntegration.ts:89:  const result = calculateCarWash16Q(input);
src/services/calculators/truckStopIntegration.ts:4: * Connects wizard answers ‚Üí calculator service ‚Üí wizard display
src/services/calculators/truckStopIntegration.ts:7:import { calculateTruckStop16Q, type TruckStop16QInput, type TruckStop16QResult } from './truckStop16QCalculator';
src/services/calculators/truckStopIntegration.ts:47:export function calculateTruckStopFromAnswers(answers: Record<string, unknown>): TruckStop16QResult | null {
src/services/calculators/truckStopIntegration.ts:50:    const result = calculateTruckStop16Q(input);
src/components/examples/UseCaseDatabaseMigrationExample.tsx:269:      const result = await useCaseService.calculateConfiguration(
src/components/examples/UseCaseDatabaseMigrationExample.tsx:400:                {calculation.calculated_load_kw.toFixed(1)} kW
src/services/gridStressCalculator.ts:4: * Helper function to calculate grid stress from state/region data.
src/services/gridStressCalculator.ts:14:export function calculateGridStress(state: string): {
src/hooks/useSmartWizard.ts:26:import { calculateDatabaseBaseline } from "@/services/baselineService";
src/hooks/useSmartWizard.ts:29:import { calculatePowerGap as calculateGap } from "@/services/powerGapAnalysis";
src/hooks/useSmartWizard.ts:86:  // When user answers questions, automatically calculate baseline
src/hooks/useSmartWizard.ts:93:      // Only calculate if we have a use case selected AND questions answered
src/hooks/useSmartWizard.ts:110:      // All conditions met - calculate baseline automatically!
src/hooks/useSmartWizard.ts:112:        const baseline = await calculateDatabaseBaseline(
src/hooks/useSmartWizard.ts:132:        console.error("[useSmartWizard] Auto-calculate baseline failed:", error);
src/hooks/useSmartWizard.ts:245:  const calculateBaseline = useCallback(async () => {
src/hooks/useSmartWizard.ts:247:      console.warn("[useSmartWizard] Cannot calculate baseline: missing use case");
src/hooks/useSmartWizard.ts:257:      const baseline = await calculateDatabaseBaseline(
src/hooks/useSmartWizard.ts:283:          error: "Failed to calculate baseline",
src/hooks/useSmartWizard.ts:289:  const calculatePowerGap = useCallback(async () => {
src/hooks/useSmartWizard.ts:291:      console.warn("[useSmartWizard] Cannot calculate power gap: no use case selected");
src/hooks/useSmartWizard.ts:310:      // First calculate baseline if not already done
src/hooks/useSmartWizard.ts:314:      const baseline = await calculateDatabaseBaseline(
src/hooks/useSmartWizard.ts:324:      // Now calculate the power gap
src/hooks/useSmartWizard.ts:328:      const gapAnalysis = await calculateGap(
src/hooks/useSmartWizard.ts:365:          error: `Failed to calculate power gap analysis: ${error instanceof Error ? error.message : "Unknown error"}`,
src/hooks/useSmartWizard.ts:609:    calculateBaseline,
src/hooks/useSmartWizard.ts:610:    calculatePowerGap,
src/services/intelligence/index.ts:4:// SSOT Compliance: All services query database, include TrueQuote‚Ñ¢ attribution
src/services/intelligence/index.ts:16:  calculateValueTeaser,
src/services/useCaseService.ts:10:import { calculateFinancialMetrics } from "./centralizedCalculations";
src/services/useCaseService.ts:58:  calculated_load_kw: number;
src/services/useCaseService.ts:647:  async calculateConfiguration(
src/services/useCaseService.ts:726:      const financials = await calculateFinancialMetrics({
src/services/useCaseService.ts:750:        calculated_load_kw: totalLoadKw,
src/services/useCaseService.ts:766:        calculated_load_kw: totalLoadKw,
src/services/useCaseService.ts:770:        calculated_roi: roiPercentage,
src/services/useCaseService.ts:1250:export const calculateUseCaseConfiguration = (
src/services/useCaseService.ts:1255:) => useCaseService.calculateConfiguration(useCaseId, configurationId, responses, userId);
src/components/AboutMerlin.tsx:14:import { TrueQuoteBadgeCanonical } from "./shared/TrueQuoteBadgeCanonical";
src/components/AboutMerlin.tsx:15:import { TrueQuoteModal } from "./shared/TrueQuoteModal";
src/components/AboutMerlin.tsx:22:  const [showTrueQuoteModal, setShowTrueQuoteModal] = useState(false);
src/components/AboutMerlin.tsx:50:                sheets to calculate optimal configurations using AI that delivers real-time quotes
src/components/AboutMerlin.tsx:289:        {/* TrueQuote‚Ñ¢ Section - NEW */}
src/components/AboutMerlin.tsx:293:            <h2 className="text-3xl font-bold text-gray-800">Introducing TrueQuote‚Ñ¢</h2>
src/components/AboutMerlin.tsx:295:              onClick={() => setShowTrueQuoteModal(true)}
src/components/AboutMerlin.tsx:298:              <TrueQuoteBadgeCanonical showTooltip={false} />
src/components/AboutMerlin.tsx:312:                onClick={() => setShowTrueQuoteModal(true)}
src/components/AboutMerlin.tsx:315:                Learn more about TrueQuote‚Ñ¢ ‚Üí
src/components/AboutMerlin.tsx:527:      {/* TrueQuote‚Ñ¢ Marketing Modal */}
src/components/AboutMerlin.tsx:528:      <TrueQuoteModal
src/components/AboutMerlin.tsx:529:        isOpen={showTrueQuoteModal}
src/components/AboutMerlin.tsx:530:        onClose={() => setShowTrueQuoteModal(false)}
src/components/AboutMerlin.tsx:532:          setShowTrueQuoteModal(false);
src/services/intelligence/valueTeaserService.ts:3:// Purpose: Calculate value ranges for industry+location with TrueQuote‚Ñ¢ sources
src/services/intelligence/valueTeaserService.ts:21:export async function calculateValueTeaser(
src/services/environmentalMetricsService.ts:187:export function calculateCO2Avoided(input: CO2CalculationInput): EnvironmentalMetrics {
src/services/environmentalMetricsService.ts:334:export function calculateEVChargingCO2Impact(
src/services/environmentalMetricsService.ts:339:  return calculateCO2Avoided({
src/services/environmentalMetricsService.ts:350:export function calculateSolarBESSCO2Impact(
src/services/environmentalMetricsService.ts:359:  return calculateCO2Avoided({
src/services/environmentalMetricsService.ts:372:export function calculateMicrogridCO2Impact(
src/services/environmentalMetricsService.ts:384:  return calculateCO2Avoided({
src/services/environmentalMetricsService.ts:397:  calculateCO2Avoided,
src/services/environmentalMetricsService.ts:399:  calculateEVChargingCO2Impact,
src/services/environmentalMetricsService.ts:400:  calculateSolarBESSCO2Impact,
src/services/environmentalMetricsService.ts:401:  calculateMicrogridCO2Impact,
src/types/database.types.ts:4969:          calculated_at: string | null
src/types/database.types.ts:4980:          calculated_at?: string | null
src/types/database.types.ts:4991:          calculated_at?: string | null
src/types/database.types.ts:5221:          calculated_at: string | null
src/types/database.types.ts:5232:          calculated_at?: string | null
src/types/database.types.ts:5243:          calculated_at?: string | null
src/types/database.types.ts:5529:          calculated_results: Json
src/types/database.types.ts:5544:          calculated_results: Json
src/types/database.types.ts:5559:          calculated_results?: Json
src/types/database.types.ts:7270:      calculate_price_trend: {
src/types/database.types.ts:7280:      calculate_weighted_price: {
src/__tests__/wizard-data-flow.test.ts:6: * ensure TrueQuote SSOT compliance. Any failure here means broken quotes.
src/__tests__/wizard-data-flow.test.ts:11: * 3. Verify values reach QuoteEngine.generateQuote()
src/__tests__/wizard-data-flow.test.ts:49:import { calculateUseCasePower } from "@/services/useCasePowerCalculations";
src/__tests__/wizard-data-flow.test.ts:50:import { QuoteEngine } from "@/core/calculations/QuoteEngine";
src/__tests__/wizard-data-flow.test.ts:55:      const result = calculateUseCasePower("hotel", { roomCount: 150 });
src/__tests__/wizard-data-flow.test.ts:68:      const result = calculateUseCasePower("hospital", { bedCount: 200 });
src/__tests__/wizard-data-flow.test.ts:80:      const result = calculateUseCasePower("data-center", { itLoadKW: 5000 });
src/__tests__/wizard-data-flow.test.ts:92:      const result = calculateUseCasePower("car-wash", { bayCount: 4 });
src/__tests__/wizard-data-flow.test.ts:104:  describe("Step 2: QuoteEngine Integration", () => {
src/__tests__/wizard-data-flow.test.ts:105:    it("QuoteEngine.generateQuote uses all input parameters", async () => {
src/__tests__/wizard-data-flow.test.ts:119:      console.log("üìä QuoteEngine Input:", input);
src/__tests__/wizard-data-flow.test.ts:121:      const result = await QuoteEngine.generateQuote(input);
src/__tests__/wizard-data-flow.test.ts:123:      console.log("üìä QuoteEngine Output:", {
src/__tests__/wizard-data-flow.test.ts:144:    it("QuoteEngine.quickEstimate returns financial preview", async () => {
src/__tests__/wizard-data-flow.test.ts:151:      const result = await QuoteEngine.quickEstimate(storageSizeMW, durationHours, electricityRate);
src/__tests__/wizard-data-flow.test.ts:165:      const powerResult = calculateUseCasePower("hotel", { roomCount: 150 });
src/__tests__/wizard-data-flow.test.ts:186:      const quote = await QuoteEngine.generateQuote({
src/services/dailyPricingValidator.ts:136:    const { pricingConfigService } = await import("./pricingConfigService");
src/services/dailyPricingValidator.ts:137:    const config = pricingConfigService.getConfiguration();
src/types/QuoteDocument.ts:21:  completionPercentage: number; // 0-100, auto-calculated
src/types/QuoteDocument.ts:44:      calculatedFrom: string; // e.g., "150 rooms √ó 2.93 kW/room = 440 kW"
src/types/QuoteDocument.ts:219:export function calculateQuoteCompleteness(quote: QuoteDocument): number {
src/types/QuoteDocument.ts:335:        calculatedFrom: "",
src/types/database.types.old.ts:542:          calculated_load_kw: number | null;
src/types/database.types.old.ts:546:          calculated_roi: number | null;
src/types/database.types.old.ts:561:          calculated_load_kw?: number | null;
src/types/database.types.old.ts:565:          calculated_roi?: number | null;
src/types/database.types.old.ts:580:          calculated_load_kw?: number | null;
src/types/database.types.old.ts:584:          calculated_roi?: number | null;
src/components/__tests__/DatabaseTest.tsx:2:import { getCachedConstants, calculateFinancialMetrics } from '../services/centralizedCalculations';
src/components/__tests__/DatabaseTest.tsx:30:      const result = await calculateFinancialMetrics({
src/types/compareConfig.ts:46:  // BESS (auto-calculated, NOT user-adjustable)
src/types/compareConfig.ts:50:  // Financials (auto-calculated from SSOT)
src/types/compareConfig.ts:166:  // Source tracking (TrueQuote‚Ñ¢)
src/types/wizard.types.ts:106:  calculateBaseline: () => Promise<void>;
src/types/wizard.types.ts:107:  calculatePowerGap: () => Promise<void>;
src/services/contracts.ts:6: * - TrueQuote (Prime Sub Contractor / Calculation Engine)
src/services/contracts.ts:12: * ‚îÇ  Collects inputs ‚Üí Delegates to TrueQuote ‚Üí Displays results‚îÇ
src/services/contracts.ts:56:// MERLIN REQUEST (Orchestrator ‚Üí TrueQuote)
src/services/contracts.ts:61: * This is the ONLY input TrueQuote needs to generate a complete quote
src/services/contracts.ts:90:  // These override TrueQuote's recommendations
src/services/contracts.ts:95:      customSizeKw?: number;   // User override, undefined = use TrueQuote recommendation
src/services/contracts.ts:125:// TRUEQUOTE BASE CALCULATION (Internal - TrueQuote's work)
src/services/contracts.ts:129: * TrueQuoteBaseCalculation: The raw calculation before Magic Fit optimization
src/services/contracts.ts:130: * This represents TrueQuote's engineering recommendation
src/services/contracts.ts:132:export interface TrueQuoteBaseCalculation {
src/services/contracts.ts:242:// MAGIC FIT PROPOSAL (MagicFit ‚Üí TrueQuote for approval)
src/services/contracts.ts:309: * MagicFitProposal: What Magic Fit submits to TrueQuote for authentication
src/services/contracts.ts:329:// TRUEQUOTE AUTHENTICATED RESULT (TrueQuote ‚Üí Merlin)
src/services/contracts.ts:333: * AuthenticatedSystemOption: A SystemOption that TrueQuote has verified
src/services/contracts.ts:336:  // TrueQuote verification stamp
src/services/contracts.ts:348: * TrueQuoteAuthenticatedResult: The final output Merlin displays to the user
src/services/contracts.ts:351: * It has been calculated by TrueQuote and verified for accuracy.
src/services/contracts.ts:353:export interface TrueQuoteAuthenticatedResult {
src/services/contracts.ts:355:  // VERIFICATION (TrueQuote's seal of approval)
src/services/contracts.ts:374:  baseCalculation: TrueQuoteBaseCalculation;
src/services/contracts.ts:377:  // AUTHENTICATED OPTIONS (Magic Fit's work, TrueQuote approved)
src/services/contracts.ts:386:  // INCENTIVES (TrueQuote calculated - single source of truth)
src/services/contracts.ts:414:  // FACILITY SUMMARY (echo back what we calculated for)
src/services/contracts.ts:437:// REJECTION RESPONSE (when TrueQuote rejects Magic Fit's proposal)
src/services/contracts.ts:440:export interface TrueQuoteRejection {
src/services/contracts.ts:457:  result: TrueQuoteAuthenticatedResult | TrueQuoteRejection
src/services/contracts.ts:458:): result is TrueQuoteAuthenticatedResult {
src/services/contracts.ts:463:  result: TrueQuoteAuthenticatedResult | TrueQuoteRejection
src/services/contracts.ts:464:): result is TrueQuoteRejection {
src/components/AdvancedAnalytics.tsx:146:    const savings10Year = calculateTotalSavings(10);
src/components/AdvancedAnalytics.tsx:149:    const savings20Year = calculateTotalSavings(20);
src/components/AdvancedAnalytics.tsx:152:    function calculateTotalSavings(years: number): number {
src/App.tsx:119:  // Access via /meta or /meta-calculations - TrueQuote Meta Calculations Dashboard
src/services/calculators/hospital16QCalculator.ts:43:export function calculateHospital16Q(input: Hospital16QInput): Hospital16QResult {
src/ui/hooks/useQuoteBuilder.ts.fixformat:22:import { calculateDatabaseBaseline } from '@/services/baselineService';
src/ui/hooks/useQuoteBuilder.ts.fixformat:35:  // Sizing (calculated from baseline or user overrides)
src/ui/hooks/useQuoteBuilder.ts.fixformat:137:  const calculateBaseline = useCallback(async () => {
src/ui/hooks/useQuoteBuilder.ts.fixformat:139:      console.warn('[useQuoteBuilder] Cannot calculate baseline: missing use case or details');
src/ui/hooks/useQuoteBuilder.ts.fixformat:147:      const baseline = await calculateDatabaseBaseline(
src/ui/hooks/useQuoteBuilder.ts.fixformat:151:      );      console.log('‚úÖ [useQuoteBuilder] Baseline calculated:', {
src/ui/hooks/useQuoteBuilder.ts.fixformat:169:      const errorMessage = error instanceof Error ? error.message : 'Failed to calculate baseline';
src/ui/hooks/useQuoteBuilder.ts.fixformat:308:    calculateBaseline,
src/services/equipmentPricingTiersService.ts:5: * ‚úÖ Integrates with TrueQuote‚Ñ¢ for source attribution
src/services/equipmentPricingTiersService.ts:92:export interface TrueQuoteAttribution {
src/services/equipmentPricingTiersService.ts:108:  trueQuote: TrueQuoteAttribution;
src/services/equipmentPricingTiersService.ts:480:export async function calculateEquipmentCost(
src/services/equipmentPricingTiersService.ts:489:  trueQuote: TrueQuoteAttribution;
src/services/equipmentPricingTiersService.ts:840: * Get pricing summary for TrueQuote‚Ñ¢ display
src/services/equipmentPricingTiersService.ts:875:  calculateEquipmentCost,
src/services/professionalFinancialModel.ts:32:import { calculateQuote } from "./unifiedQuoteCalculator";
src/services/professionalFinancialModel.ts:240:function calculateArbitrageRevenue(
src/services/professionalFinancialModel.ts:255:function calculateDemandChargeReduction(
src/services/professionalFinancialModel.ts:267:function calculateFrequencyRegulationRevenue(
src/services/professionalFinancialModel.ts:291:function calculateSpinningReserveRevenue(
src/services/professionalFinancialModel.ts:316:function calculateCapacityPayments(powerMW: number, isoRegion: string): number {
src/services/professionalFinancialModel.ts:336:function calculateResourceAdequacy(
src/services/professionalFinancialModel.ts:359:function calculateAnnualDebtPayment(
src/services/professionalFinancialModel.ts:393:      const annualPayment = calculateAnnualDebtPayment(principal, annualRate, termYears);
src/services/professionalFinancialModel.ts:484:function calculateLCOS(
src/services/professionalFinancialModel.ts:534:function calculateEffectiveCapacityFactor(
src/services/professionalFinancialModel.ts:559:function calculateIRR(cashFlows: number[], guess: number = 0.1): number {
src/services/professionalFinancialModel.ts:592:function calculateNPV(cashFlows: number[], discountRate: number): number {
src/services/professionalFinancialModel.ts:641:  // Get equipment costs from unified quote calculator
src/services/professionalFinancialModel.ts:642:  const quote = await calculateQuote({
src/services/professionalFinancialModel.ts:697:      arbitrage = calculateArbitrageRevenue(
src/services/professionalFinancialModel.ts:709:        calculateDemandChargeReduction(
src/services/professionalFinancialModel.ts:717:        calculateFrequencyRegulationRevenue(
src/services/professionalFinancialModel.ts:726:        calculateSpinningReserveRevenue(
src/services/professionalFinancialModel.ts:735:        calculateCapacityPayments(input.storageSizeMW * degradationFactor, config.isoRegion) *
src/services/professionalFinancialModel.ts:741:        calculateResourceAdequacy(
src/services/professionalFinancialModel.ts:792:    // Interest will be calculated after debt schedule
src/services/professionalFinancialModel.ts:935:  const unleveredIRR = calculateIRR(unleveredCashFlows);
src/services/professionalFinancialModel.ts:936:  const leveredIRR = calculateIRR(leveredCashFlows);
src/services/professionalFinancialModel.ts:939:  const npv = calculateNPV(unleveredCashFlows, 0.08);
src/services/professionalFinancialModel.ts:986:  const lcos = calculateLCOS(
src/services/professionalFinancialModel.ts:998:  const capacityFactorEffective = calculateEffectiveCapacityFactor(
src/services/professionalFinancialModel.ts:1155:  const annualDebtService = calculateAnnualDebtPayment(debtAmount, interestRate, loanTermYears);
src/services/professionalFinancialModel.ts:1169:  return calculateIRR(cashFlows);
src/services/calculators/generatorCalculator.ts:5: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/calculators/generatorCalculator.ts:155:export function calculateGenerator(input: GeneratorCalculationInput): GeneratorCalculationResult {
src/ui/hooks/useQuoteBuilder.ts:22:import { calculateDatabaseBaseline } from '@/services/baselineService';
src/ui/hooks/useQuoteBuilder.ts:35:  // Sizing (calculated from baseline or user overrides)
src/ui/hooks/useQuoteBuilder.ts:166:  const calculateBaseline = useCallback(async () => {
src/ui/hooks/useQuoteBuilder.ts:168:      console.warn('[useQuoteBuilder] Cannot calculate baseline: missing use case or details');
src/ui/hooks/useQuoteBuilder.ts:175:      const baseline = await calculateDatabaseBaseline(
src/ui/hooks/useQuoteBuilder.ts:193:      const errorMessage = error instanceof Error ? error.message : 'Failed to calculate baseline';
src/ui/hooks/useQuoteBuilder.ts:408:    calculateBaseline,
src/services/financialProjections.ts:110: * @param inputs - Financial inputs from TrueQuote calculation
src/services/financialProjections.ts:114:export function calculateFinancialProjection(
src/services/financialProjections.ts:216:  const irr = calculateIRR(inputs.netInvestment, yearlyProjections.map(y => y.cashFlow));
src/services/financialProjections.ts:247:function calculateIRR(initialInvestment: number, cashFlows: number[], maxIterations = 100, tolerance = 0.0001): number {
src/services/financialProjections.ts:294:  const projection = calculateFinancialProjection(inputs, 10);
src/services/financialProjections.ts:384:  const baseProjection = calculateFinancialProjection(inputs, 10);
src/services/financialProjections.ts:397:  const highEscalation = calculateFinancialProjection({
src/services/financialProjections.ts:410:  const lowEscalation = calculateFinancialProjection({
src/services/financialProjections.ts:423:  const highDegradation = calculateFinancialProjection({
src/services/financialProjections.ts:436:  const lowDiscount = calculateFinancialProjection({
src/services/financialProjections.ts:456:  calculateFinancialProjection,
src/ui/hooks/useQuoteBuilder.ts.fix_backup:22:import { calculateDatabaseBaseline } from '@/services/baselineService';
src/ui/hooks/useQuoteBuilder.ts.fix_backup:35:  // Sizing (calculated from baseline or user overrides)
src/ui/hooks/useQuoteBuilder.ts.fix_backup:137:  const calculateBaseline = useCallback(async () => {
src/ui/hooks/useQuoteBuilder.ts.fix_backup:139:      console.warn('[useQuoteBuilder] Cannot calculate baseline: missing use case or details');
src/ui/hooks/useQuoteBuilder.ts.fix_backup:147:      const baseline = await calculateDatabaseBaseline(
src/ui/hooks/useQuoteBuilder.ts.fix_backup:151:      );      console.log('‚úÖ [useQuoteBuilder] Baseline calculated:', {
src/ui/hooks/useQuoteBuilder.ts.fix_backup:169:      const errorMessage = error instanceof Error ? error.message : 'Failed to calculate baseline';
src/ui/hooks/useQuoteBuilder.ts.fix_backup:308:    calculateBaseline,
src/ui/hooks/useQuoteBuilder.example.tsx.disabled:255: * const baseline = await calculateDatabaseBaseline(template, answers);
src/services/windPricingService.ts:331:  calculateWindFarmCost(
src/services/windPricingService.ts:477:  calculateAnnualProduction(
src/services/windPricingService.ts:522:  calculateAnnualOperatingCost(
src/services/calculators/siteScoreCalculator.ts:113:  calculatedAt: string;
src/services/calculators/siteScoreCalculator.ts:478:export function calculateSiteScore(input: SiteScoreInput): SiteScoreResult {
src/services/calculators/siteScoreCalculator.ts:716:    calculatedAt: new Date().toISOString(),
src/services/calculators/siteScoreCalculator.ts:910:  calculateSiteScore,
src/components/DatabaseTest.tsx:2:import { getCachedConstants, calculateFinancialMetrics } from "../services/centralizedCalculations";
src/components/DatabaseTest.tsx:30:      const result = await calculateFinancialMetrics({
src/services/hourly8760AnalysisService.ts:20: * DATA SOURCES (TrueQuote‚Ñ¢ compliant):
src/services/hourly8760AnalysisService.ts:139:  /** TrueQuote‚Ñ¢ attribution */
src/services/hourly8760AnalysisService.ts:147:    calculatedAt: string;
src/services/hourly8760AnalysisService.ts:491:      calculatedAt: new Date().toISOString(),
src/services/calculators/hospitalIntegration.ts:1:import { calculateHospital16Q, type Hospital16QInput, type Hospital16QResult } from './hospital16QCalculator';
src/services/calculators/hospitalIntegration.ts:27:export function calculateHospitalFromAnswers(answers: Record<string, unknown>): Hospital16QResult | null {
src/services/calculators/hospitalIntegration.ts:29:    const result = calculateHospital16Q(mapHospitalAnswers(answers));
src/services/MerlinOrchestrator.ts:8: * 3. Delegate to TrueQuote Engine
src/services/MerlinOrchestrator.ts:16: * ‚îÇ  - Calls TrueQuote Engine                                   ‚îÇ
src/services/MerlinOrchestrator.ts:17: * ‚îÇ  - Returns TrueQuoteAuthenticatedResult                     ‚îÇ
src/services/MerlinOrchestrator.ts:23: * ‚îÇ  - Runs all calculators                                     ‚îÇ
src/services/MerlinOrchestrator.ts:32: * ‚îÇ  - Must be authenticated by TrueQuote                       ‚îÇ
src/services/MerlinOrchestrator.ts:35: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/MerlinOrchestrator.ts:42:  TrueQuoteAuthenticatedResult,
src/services/MerlinOrchestrator.ts:43:  TrueQuoteRejection,
src/services/MerlinOrchestrator.ts:48:import { processQuote } from './TrueQuoteEngineV2';
src/services/MerlinOrchestrator.ts:67:): Promise<TrueQuoteAuthenticatedResult | TrueQuoteRejection> {
src/services/MerlinOrchestrator.ts:72:  console.log('‚ïë  Translating wizard state ‚Üí TrueQuote request...      ‚ïë');
src/services/MerlinOrchestrator.ts:105:  // STEP 3: Delegate to TrueQuote Engine
src/services/MerlinOrchestrator.ts:108:  console.log('üì§ Merlin: Delegating to TrueQuote Engine...');
src/services/MerlinOrchestrator.ts:114:      console.error('‚ùå Merlin: TrueQuote rejected the quote');
src/services/MerlinOrchestrator.ts:356:  type TrueQuoteAuthenticatedResult,
src/services/MerlinOrchestrator.ts:357:  type TrueQuoteRejection,
src/services/intelligence/industryInference.ts:4:// TrueQuote‚Ñ¢ Compliance: Uses database keyword mappings (not hardcoded)
src/services/calculators/evCalculator.ts:5: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/calculators/evCalculator.ts:186:export function calculateEV(input: EVCalculationInput): EVCalculationResult {
src/services/calculators/carWash16QCalculator.ts:12: * 5. BESS sizing (IEEE 4538388 ratio + TrueQuote‚Ñ¢)
src/services/calculators/carWash16QCalculator.ts:63:  auditTrail: Source[];     // TrueQuote‚Ñ¢ sources
src/services/calculators/carWash16QCalculator.ts:124:export function calculateCarWash16Q(input: CarWash16QInput): CarWash16QResult {
src/services/manufacturingIndustryProfile.ts:938:export function calculateManufacturingProfile(
src/services/manufacturingIndustryProfile.ts:1103:  calculateManufacturingProfile,
src/components/ProfessionalFinancialModeling.tsx:3:  calculateAdvancedFinancialMetrics,
src/components/ProfessionalFinancialModeling.tsx:80:      const metrics = await calculateAdvancedFinancialMetrics(input, options);
src/components/ProfessionalFinancialModeling.tsx:84:      setError("Failed to calculate advanced financial metrics");
src/data/carwash-questions.config.ts:307:    helpText: 'Merlin calculates 65% usable for solar panels',
src/data/carwash-questions.config.ts:308:    merlinTip: "I'll automatically calculate 65% usable area to account for HVAC units, vents, and setbacks. Don't worry about being exact - satellite mapping will verify later."
src/services/teaserPreviewService.ts:9: * 2. NEVER use words "TrueQuote", "Verified", or show TrueQuote badge
src/services/teaserPreviewService.ts:11: * 4. Always show disclaimer: "Estimate only ‚Äî not TrueQuote Verified"
src/services/teaserPreviewService.ts:244:export function calculateTeaserPreview(input: TeaserInput): TeaserPreview {
src/services/teaserPreviewService.ts:359:  const disclaimer = "Estimate only ‚Äî not TrueQuote Verified. This sneak peek uses benchmarks and public averages. Your TrueQuote Verified results are calculated in Step 5 after you answer facility details.";
src/services/intelligence/goalSuggestion.ts:4:// TrueQuote‚Ñ¢ Compliance: All suggestions include source attribution
src/components/shared/TrueQuoteBadgeCanonical.tsx:2: * TrueQuote‚Ñ¢ Minimal Authority Badge - CANONICAL SPEC
src/components/shared/TrueQuoteBadgeCanonical.tsx:5: * The definitive TrueQuote‚Ñ¢ badge implementation.
src/components/shared/TrueQuoteBadgeCanonical.tsx:19:export interface TrueQuoteBadgeCanonicalProps {
src/components/shared/TrueQuoteBadgeCanonical.tsx:35: * The canonical TrueQuote‚Ñ¢ badge - use this everywhere.
src/components/shared/TrueQuoteBadgeCanonical.tsx:37: * Visual identity: TrueQuote‚Ñ¢ ‚Ä¢ Verified
src/components/shared/TrueQuoteBadgeCanonical.tsx:38: * - TrueQuote‚Ñ¢ = soft white (#F1F5F9)
src/components/shared/TrueQuoteBadgeCanonical.tsx:45: * <TrueQuoteBadgeCanonical />
src/components/shared/TrueQuoteBadgeCanonical.tsx:48: * <TrueQuoteBadgeCanonical label="Certified" />
src/components/shared/TrueQuoteBadgeCanonical.tsx:51:export const TrueQuoteBadgeCanonical: React.FC<TrueQuoteBadgeCanonicalProps> = ({
src/components/shared/TrueQuoteBadgeCanonical.tsx:90:        aria-label="TrueQuote verified quote"
src/components/shared/TrueQuoteBadgeCanonical.tsx:92:        {/* Brand: TrueQuote‚Ñ¢ */}
src/components/shared/TrueQuoteBadgeCanonical.tsx:94:          TrueQuote‚Ñ¢
src/components/shared/TrueQuoteBadgeCanonical.tsx:124:          <div className="text-xs font-bold text-white mb-1">TrueQuote‚Ñ¢</div>
src/components/shared/TrueQuoteBadgeCanonical.tsx:126:            TrueQuote‚Ñ¢ combines utility tariffs, climate data, and industry load models 
src/components/shared/TrueQuoteBadgeCanonical.tsx:144: *    Merlin Intelligence  [TrueQuote‚Ñ¢ ‚Ä¢ Verified]  $0.10/kWh  ‚òÄÔ∏è 5.3 hrs
src/components/shared/TrueQuoteBadgeCanonical.tsx:150: *    [TrueQuote‚Ñ¢ ‚Ä¢ Verified]
src/components/shared/TrueQuoteBadgeCanonical.tsx:166:export default TrueQuoteBadgeCanonical;
src/services/dailyReportService.ts:203:          relevanceScore: calculateRelevance(item.title || "", item.contentSnippet || ""),
src/services/dailyReportService.ts:257:function calculateRelevance(title: string, content: string): number {
src/services/calculators/truckStop16QCalculator.ts:12: * 5. BESS sizing (IEEE 4538388 ratio + TrueQuote‚Ñ¢)
src/services/calculators/truckStop16QCalculator.ts:170:export function calculateTruckStop16Q(input: TruckStop16QInput): TruckStop16QResult {
src/services/powerElectronicsPricingService.ts:454:  calculateInverterSystemCost(
src/services/powerElectronicsPricingService.ts:535:  calculateTransformerCost(
src/services/powerElectronicsPricingService.ts:593:  calculateSwitchgearCost(
src/components/shared/KeyMetricsDashboard.tsx:14:  calculateCO2Avoided, 
src/components/shared/KeyMetricsDashboard.tsx:435:    co2Data = calculateCO2Avoided({
src/services/calculators/bessCalculator.ts:5: * Part of TrueQuote Engine (Porsche 911 Architecture)
src/services/calculators/bessCalculator.ts:141:export function calculateBESS(input: BESSCalculationInput): BESSCalculationResult {
src/services/calculators/bessCalculator.ts:176:  // Recalculate actual duration
src/services/intelligence/weatherImpact.ts:4:// TrueQuote‚Ñ¢ Compliance: Database-driven coefficients with source attribution
src/data/industryQuestionnaires.ts:363:          { value: "no", label: "‚ùì No - Help me calculate" },
src/services/bufferService.ts:223:          console.log('‚úÖ Migration complete: Derived values removed (TrueQuote is SSOT)');
src/services/TrueQuoteEngine-Solar.ts:2: * TrueQuoteEngine v2.1.0 - Solar Capacity Calculations
src/services/TrueQuoteEngine-Solar.ts:71:  // TrueQuote metadata
src/services/TrueQuoteEngine-Solar.ts:72:  calculatedAt: string;
src/services/TrueQuoteEngine-Solar.ts:80:const ENGINE_VERSION = 'TrueQuoteEngine v2.1.0';
src/services/TrueQuoteEngine-Solar.ts:99:export function calculateSolarCapacity(input: SolarCapacityInput): SolarCapacityResult {
src/services/TrueQuoteEngine-Solar.ts:236:    // TrueQuote metadata
src/services/TrueQuoteEngine-Solar.ts:237:    calculatedAt: new Date().toISOString(),
src/services/questionnaireMapper.ts:7: * calculation engine (calculateHotelPower).
src/services/questionnaireMapper.ts:66:/** SSOT-compatible hotel power input (matches calculateHotelPower signature) */
src/services/questionnaireMapper.ts:183: * @returns HotelSSOTInput ready for calculateHotelPower()
src/services/questionnaireMapper.ts:188: * const result = calculateHotelPower(ssotInput.roomCount, {
src/services/questionnaireMapper.ts:263: * go directly into calculateHotelPower() but is needed for full quotes.
src/services/centralizedCalculations.ts:23: * import { calculateFinancialMetrics } from '@/services/centralizedCalculations';
src/services/centralizedCalculations.ts:24: * const results = await calculateFinancialMetrics({ powerMW, durationHours, ...config });
src/services/centralizedCalculations.ts:70:  // Equipment costs (if already calculated)
src/services/centralizedCalculations.ts:346:export async function calculateFinancialMetrics(
src/services/centralizedCalculations.ts:598:export function calculateMIRR(
src/services/centralizedCalculations.ts:645:  const baseResult = await calculateFinancialMetrics(baseInputs);
src/services/centralizedCalculations.ts:678:      const result = await calculateFinancialMetrics(modifiedInputs);
src/services/centralizedCalculations.ts:744:    const result = await calculateFinancialMetrics(modifiedInputs);
src/services/centralizedCalculations.ts:840:  const baseResult = await calculateFinancialMetrics(baseInputs);
src/services/centralizedCalculations.ts:850:  const optimisticResult = await calculateFinancialMetrics(optimisticInputs);
src/services/centralizedCalculations.ts:860:  const pessimisticResult = await calculateFinancialMetrics(pessimisticInputs);
src/services/centralizedCalculations.ts:911:export async function calculateAdvancedFinancialMetrics(
src/services/centralizedCalculations.ts:923:  const baseMetrics = await calculateFinancialMetrics(input);
src/services/centralizedCalculations.ts:936:    result.mirr = calculateMIRR(cashFlows, input.discountRate || 0.08, input.discountRate || 0.08);
src/services/centralizedCalculations.ts:999:  calculateFinancialMetrics,
src/components/quotes/SourceAttributionTooltip.tsx:58:    calculatedAt: string;
src/components/quotes/SourceAttributionTooltip.tsx:415:                Calculated: {formatDate(benchmarkAudit.calculatedAt)}
src/services/calculators/dataCenter16QCalculator.ts:42:export function calculateDataCenter16Q(input: DataCenter16QInput): DataCenter16QResult {
src/components/sections/HeroSection.tsx:5:import { QuoteEngine } from "@/core/calculations";
src/components/sections/HeroSection.tsx:8:import { TrueQuoteModal } from "../shared/TrueQuoteModal";
src/components/sections/HeroSection.tsx:9:import { TrueQuoteBadgeCanonical } from "../shared/TrueQuoteBadgeCanonical";
src/components/sections/HeroSection.tsx:320:  const [showTrueQuoteModal, setShowTrueQuoteModal] = useState(false);
src/components/sections/HeroSection.tsx:341:    // ‚úÖ SSOT: Use QuoteEngine.generateQuote() for actual quote generation
src/components/sections/HeroSection.tsx:344:      const quoteResult = await QuoteEngine.generateQuote({
src/components/sections/HeroSection.tsx:348:        electricityRate: 0.15, // Default rate - QuoteEngine handles regional adjustments
src/components/sections/HeroSection.tsx:542:                {/* Subheadline with TrueQuote badge */}
src/components/sections/HeroSection.tsx:555:                    onClick={() => setShowTrueQuoteModal(true)}
src/components/sections/HeroSection.tsx:563:                    <TrueQuoteBadgeCanonical showTooltip={false} />
src/components/sections/HeroSection.tsx:1149:                          HPC‚Äîwe calculate infrastructure needs
src/components/sections/HeroSection.tsx:1288:                        Merlin calculates your optimal BESS size based on your actual load profile:
src/components/sections/HeroSection.tsx:1495:                Industry-tested formulas from ASHRAE, CBECS, and Energy Star calculate exactly what
src/components/sections/HeroSection.tsx:2359:      {/* TrueQuote‚Ñ¢ Marketing Modal */}
src/components/sections/HeroSection.tsx:2360:      <TrueQuoteModal
src/components/sections/HeroSection.tsx:2361:        isOpen={showTrueQuoteModal}
src/components/sections/HeroSection.tsx:2362:        onClose={() => setShowTrueQuoteModal(false)}
src/components/sections/HeroSection.tsx:2364:          setShowTrueQuoteModal(false);
src/components/shared/TrueQuoteBadge.tsx:2: * TrueQuoteBadge.tsx - PROFESSIONAL REDESIGN
src/components/shared/TrueQuoteBadge.tsx:4: * The official Merlin TrueQuote‚Ñ¢ badge and branding components.
src/components/shared/TrueQuoteBadge.tsx:17:export interface TrueQuoteBadgeProps {
src/components/shared/TrueQuoteBadge.tsx:34:export interface TrueQuoteSealProps {
src/components/shared/TrueQuoteBadge.tsx:35:  /** Whether the quote meets TrueQuote‚Ñ¢ standards */
src/components/shared/TrueQuoteBadge.tsx:51:export const TrueQuoteBadge: React.FC<TrueQuoteBadgeProps> = ({
src/components/shared/TrueQuoteBadge.tsx:109:        <span className="text-xs font-semibold text-amber-600">TrueQuote‚Ñ¢</span>
src/components/shared/TrueQuoteBadge.tsx:146:          <span className={`${config.text} font-bold text-amber-500`}>TrueQuote</span>
src/components/shared/TrueQuoteBadge.tsx:198:            TrueQuote
src/components/shared/TrueQuoteBadge.tsx:258:            TrueQuote
src/components/shared/TrueQuoteBadge.tsx:308:            <span className="text-base font-bold text-amber-500">TrueQuote</span>
src/components/shared/TrueQuoteBadge.tsx:362:        <span className={`${config.text} font-bold text-amber-700`}>TrueQuote</span>
src/components/shared/TrueQuoteBadge.tsx:378:export const TrueQuoteSeal: React.FC<TrueQuoteSealProps> = ({
src/components/shared/TrueQuoteBadge.tsx:433:export const TrueQuoteInline: React.FC<{ className?: string }> = ({ className = '' }) => (
src/components/shared/TrueQuoteBadge.tsx:436:    <span className="text-xs font-semibold text-amber-600">TrueQuote‚Ñ¢</span>
src/components/shared/TrueQuoteBadge.tsx:440:export default TrueQuoteBadge;
src/components/MerlinAssistant.tsx:32:  "How is system size calculated?",
src/components/MerlinAssistant.tsx:51:  "how is system size calculated": `System sizing is based on several key factors:
src/components/MerlinAssistant.tsx:71:Our calculator analyzes all these factors to recommend the right system size for your needs.`,
src/components/MerlinAssistant.tsx:130:‚Ä¢ Financing calculator
src/components/MerlinAssistant.tsx:357:In our calculator, you can specify your existing or planned solar capacity, and we'll optimize the battery size to match.`;
src/components/MerlinAssistant.tsx:379:Use our calculator for a personalized estimate based on your specific requirements.`;
src/components/MerlinAssistant.tsx:407:Our calculator asks about your backup requirements to size appropriately.`;
src/components/MerlinAssistant.tsx:420:‚Ä¢ "How is system size calculated?"
src/components/MerlinAssistant.tsx:467:‚Ä¢ How is system sizing calculated?
src/components/modals/SystemSizingModal.tsx:2: * SystemSizingModal - TrueQuote‚Ñ¢ Sizing Adjustment Modal
src/components/modals/SystemSizingModal.tsx:30:import type { TrueQuoteSizing } from "@/services/truequote";
src/components/modals/SystemSizingModal.tsx:36:  /** Merlin's recommended sizing (from computeTrueQuoteSizing) */
src/components/modals/SystemSizingModal.tsx:37:  recommendation: TrueQuoteSizing;
src/components/modals/SystemSizingModal.tsx:331:                  title="Automatically calculated from Power √ó Duration"
src/data/carwash-questions-complete.config.ts:660:      subtitle: 'Total roof space (we\'ll calculate usable area)',
src/components/wizard/_archive-jan-2026/Step3HotelEnergy.tsx:46:// CONSISTENT COLOR PALETTE - TrueQuote Compliant
src/components/wizard/_archive-jan-2026/Step3HotelEnergy.tsx:288:  const calculateEnergy = (): number => {
src/components/wizard/_archive-jan-2026/Step3HotelEnergy.tsx:328:  const energyEstimate = useMemo(() => calculateEnergy(), [
src/components/shared/TrueQuoteModal.tsx:2: * TrueQuoteModal.tsx
src/components/shared/TrueQuoteModal.tsx:4: * Compact header with TrueQuote badge integrated into purple area.
src/components/shared/TrueQuoteModal.tsx:11:import { TrueQuoteBadge } from './TrueQuoteBadge';
src/components/shared/TrueQuoteModal.tsx:14:interface TrueQuoteModalProps {
src/components/shared/TrueQuoteModal.tsx:20:export const TrueQuoteModal: React.FC<TrueQuoteModalProps> = ({
src/components/shared/TrueQuoteModal.tsx:80:            {/* TrueQuote Badge - at top of purple section */}
src/components/shared/TrueQuoteModal.tsx:81:            <TrueQuoteBadge size="lg" showTooltip={false} />
src/components/shared/TrueQuoteModal.tsx:165:                {/* TrueQuote */}
src/components/shared/TrueQuoteModal.tsx:168:                    <TrueQuoteBadge size="sm" showTooltip={false} />
src/components/shared/TrueQuoteModal.tsx:169:                    <h3 className="font-bold text-amber-900 text-lg">Merlin TrueQuote‚Ñ¢</h3>
src/components/shared/TrueQuoteModal.tsx:229:                <h2 className="text-2xl font-bold text-gray-900 mb-2">The Three Pillars of TrueQuote‚Ñ¢</h2>
src/components/shared/TrueQuoteModal.tsx:331:              <TrueQuoteBadge size="sm" showTooltip={false} />
src/components/shared/TrueQuoteModal.tsx:339:              Get Your TrueQuote‚Ñ¢
src/components/shared/TrueQuoteModal.tsx:356:export default TrueQuoteModal;
src/components/MarketIntelligenceDashboard.tsx:2:import { calculateRealWorldPrice } from "../utils/bessPricing";
src/components/MarketIntelligenceDashboard.tsx:98:  const installedPrice = calculateRealWorldPrice();
src/components/MarketIntelligenceDashboard.tsx:237:                  This shows how we calculate the realistic "Installed Price" that buyers actually
src/components/wizard/_archive-jan-2026/README.md:12:1. Wrote `estimatedAnnualKwh` to `useCaseData` (should be calculated by TrueQuote)
src/components/wizard/carWashIntegration.ts:6: * Connects CompleteStep3Component answers to calculateCarWash16Q()
src/components/wizard/carWashIntegration.ts:10: * calculator input format and provides power/BESS recommendations.
src/components/wizard/carWashIntegration.ts:13:import { calculateCarWash16Q, type CarWash16QInput, type CarWash16QResult } from '@/services/carWash16QCalculator';
src/components/wizard/carWashIntegration.ts:16: * Maps CompleteStep3Component answers to CarWash16Q calculator input
src/components/wizard/carWashIntegration.ts:19: * @returns Formatted input for calculateCarWash16Q()
src/components/wizard/carWashIntegration.ts:84: * @returns Full calculator result with power, energy, BESS sizing, financial metrics
src/components/wizard/carWashIntegration.ts:86:export function calculateCarWashMetrics(
src/components/wizard/carWashIntegration.ts:91:    const result = calculateCarWash16Q(input);
src/components/wizard/carWashIntegration.ts:111: * @param result - Full calculator result
src/components/wizard/carWashIntegration.ts:140: * @param result - Full calculator result
src/components/forms/MainQuoteForm.tsx:268:                    {applicationType === 'residential' && " Try 10-20 kWh for most homes, or use our ROI calculator below."}
src/components/wizard/v7/WizardV7.tsx:5: * - Global TrueQuote modal manager (single modal, mode-based)
src/components/wizard/v7/WizardV7.tsx:6: * - Window event bus: any badge can open TrueQuote without prop threading
src/components/wizard/v7/WizardV7.tsx:22:import { TrueQuoteModal } from '@/components/shared/TrueQuoteModal';
src/components/wizard/v7/WizardV7.tsx:24:type TrueQuoteModalMode = 'about' | 'proof';
src/components/wizard/v7/WizardV7.tsx:26:type TrueQuoteProofPayload = {
src/components/wizard/v7/WizardV7.tsx:81:    pricingConfig,
src/components/wizard/v7/WizardV7.tsx:88:    // TrueQuote (hook helpers)
src/components/wizard/v7/WizardV7.tsx:89:    getTrueQuoteProofPayload,
src/components/wizard/v7/WizardV7.tsx:93:   * Global TrueQuote modal (single modal; mode switches content)
src/components/wizard/v7/WizardV7.tsx:100:  const [trueQuoteOpen, setTrueQuoteOpen] = useState(false);
src/components/wizard/v7/WizardV7.tsx:101:  const [trueQuoteMode, setTrueQuoteMode] = useState<TrueQuoteModalMode>('about');
src/components/wizard/v7/WizardV7.tsx:102:  const [trueQuotePayload, setTrueQuotePayload] = useState<TrueQuoteProofPayload | undefined>(undefined);
src/components/wizard/v7/WizardV7.tsx:106:    return getTrueQuoteProofPayload();
src/components/wizard/v7/WizardV7.tsx:107:  }, [getTrueQuoteProofPayload, pricingStatus, pricingConfig]);
src/components/wizard/v7/WizardV7.tsx:112:      const mode: TrueQuoteModalMode = detail.mode === 'proof' ? 'proof' : 'about';
src/components/wizard/v7/WizardV7.tsx:113:      const payload: TrueQuoteProofPayload | undefined =
src/components/wizard/v7/WizardV7.tsx:116:      setTrueQuoteMode(mode);
src/components/wizard/v7/WizardV7.tsx:117:      setTrueQuotePayload(payload);
src/components/wizard/v7/WizardV7.tsx:118:      setTrueQuoteOpen(true);
src/components/wizard/v7/WizardV7.tsx:122:      setTrueQuoteOpen(false);
src/components/wizard/v7/WizardV7.tsx:170:                  pricingConfig={pricingConfig}
src/components/wizard/v7/WizardV7.tsx:218:      {/* ‚úÖ Global TrueQuote Modal (single instance) */}
src/components/wizard/v7/WizardV7.tsx:219:      <TrueQuoteModal
src/components/wizard/v7/WizardV7.tsx:221:        onClose={() => setTrueQuoteOpen(false)}
src/components/PricingAdminDashboard.tsx:2:// This component uses OLD pricingConfigService (hardcoded values)
src/components/PricingAdminDashboard.tsx:6:// Current: pricingConfigService (hardcoded TypeScript objects)
src/components/PricingAdminDashboard.tsx:12:import { pricingConfigService, type PricingConfiguration } from "../services/pricingConfigService";
src/components/PricingAdminDashboard.tsx:40:    pricingConfigService.getConfiguration()
src/components/PricingAdminDashboard.tsx:81:      setConfig(pricingConfigService.getConfiguration());
src/components/PricingAdminDashboard.tsx:202:      //   const updatedConfig = pricingConfigService.getConfiguration();
src/components/PricingAdminDashboard.tsx:327:      pricingConfigService
src/components/PricingAdminDashboard.tsx:351:      pricingConfigService.resetToDefaults().then(() => {
src/components/PricingAdminDashboard.tsx:352:        setConfig(pricingConfigService.getConfiguration());
src/components/PricingAdminDashboard.tsx:360:    const dataStr = pricingConfigService.exportConfiguration();
src/components/PricingAdminDashboard.tsx:384:          pricingConfigService.importConfiguration(configJson).then((success) => {
src/components/PricingAdminDashboard.tsx:386:              setConfig(pricingConfigService.getConfiguration());
src/components/wizard/CompleteSolarPreviewCard.tsx:77:            <p className="text-sm text-amber-300">Live calculation from TrueQuote‚Ñ¢ Engine</p>
src/components/wizard/CompleteSolarPreviewCard.tsx:212:              TrueQuoteEngine v2.1.0 ‚Ä¢ Calculated: {new Date().toLocaleString()}
src/components/wizard/v7/hooks/useWizardV7.ts:8: * - TrueQuote proof payload builder (for Steps 4-6 proof modal)
src/components/wizard/v7/hooks/useWizardV7.ts:14:import { getPricingConfiguration, type PricingConfiguration } from '@/services/pricingConfigService';
src/components/wizard/v7/hooks/useWizardV7.ts:16:// Import existing calculators (reuse from V6)
src/components/wizard/v7/hooks/useWizardV7.ts:17:import { calculateCarWashFromAnswers } from '@/services/calculators/carWashIntegration';
src/components/wizard/v7/hooks/useWizardV7.ts:18:import { calculateHotelFromAnswers } from '@/services/calculators/hotelIntegration';
src/components/wizard/v7/hooks/useWizardV7.ts:19:import { calculateTruckStopFromAnswers } from '@/services/calculators/truckStopIntegration';
src/components/wizard/v7/hooks/useWizardV7.ts:20:import { calculateEVChargingFromAnswers } from '@/services/calculators/evChargingIntegration';
src/components/wizard/v7/hooks/useWizardV7.ts:21:import { calculateHospitalFromAnswers } from '@/services/calculators/hospitalIntegration';
src/components/wizard/v7/hooks/useWizardV7.ts:22:import { calculateDataCenterFromAnswers } from '@/services/calculators/dataCenterIntegration';
src/components/wizard/v7/hooks/useWizardV7.ts:23:import { calculateOfficeFromAnswers } from '@/services/calculators/officeIntegration';
src/components/wizard/v7/hooks/useWizardV7.ts:33:  sourceLabel?: string; // e.g. "TrueQuote‚Ñ¢"
src/components/wizard/v7/hooks/useWizardV7.ts:128:    sourceLabel: 'TrueQuote‚Ñ¢',
src/components/wizard/v7/hooks/useWizardV7.ts:132:  const [pricingConfig, setPricingConfig] = useState<PricingConfiguration | null>(null);
src/components/wizard/v7/hooks/useWizardV7.ts:231:    const newAssessment = calculateAssessment(selectedGoals);
src/components/wizard/v7/hooks/useWizardV7.ts:256:      sourceLabel: 'TrueQuote‚Ñ¢',
src/components/wizard/v7/hooks/useWizardV7.ts:288:    if (pricingConfig) return;
src/components/wizard/v7/hooks/useWizardV7.ts:318:  }, [currentStep, pricingConfig]);
src/components/wizard/v7/hooks/useWizardV7.ts:329:    // Route to calculator
src/components/wizard/v7/hooks/useWizardV7.ts:333:        result = calculateCarWashFromAnswers(answers);
src/components/wizard/v7/hooks/useWizardV7.ts:336:        result = calculateHotelFromAnswers(answers);
src/components/wizard/v7/hooks/useWizardV7.ts:339:        result = calculateTruckStopFromAnswers(answers);
src/components/wizard/v7/hooks/useWizardV7.ts:342:        result = calculateEVChargingFromAnswers(answers);
src/components/wizard/v7/hooks/useWizardV7.ts:345:        result = calculateHospitalFromAnswers(answers);
src/components/wizard/v7/hooks/useWizardV7.ts:348:        result = calculateDataCenterFromAnswers(answers);
src/components/wizard/v7/hooks/useWizardV7.ts:351:        result = calculateOfficeFromAnswers(answers);
src/components/wizard/v7/hooks/useWizardV7.ts:376:   * ‚úÖ TrueQuote proof payload builder
src/components/wizard/v7/hooks/useWizardV7.ts:380:  const getTrueQuoteProofPayload = useCallback(() => {
src/components/wizard/v7/hooks/useWizardV7.ts:383:      pricingConfig && typeof pricingConfig === "object" && "version" in pricingConfig
src/components/wizard/v7/hooks/useWizardV7.ts:384:        ? String((pricingConfig as Record<string, unknown>).version)
src/components/wizard/v7/hooks/useWizardV7.ts:386:    const pricingFingerprint = pricingConfig ? `v${version}-${pricingStatus}` : "none";
src/components/wizard/v7/hooks/useWizardV7.ts:434:        { label: 'TrueQuote‚Ñ¢ Methodology', note: 'Source-backed assumptions + explainable outputs' },
src/components/wizard/v7/hooks/useWizardV7.ts:447:  }, [industry, location, locationIntel, livePreview, pricingConfig, pricingStatus]);
src/components/wizard/v7/hooks/useWizardV7.ts:474:    pricingConfig,
src/components/wizard/v7/hooks/useWizardV7.ts:481:    // TrueQuote
src/components/wizard/v7/hooks/useWizardV7.ts:482:    getTrueQuoteProofPayload,
src/components/wizard/v7/hooks/useWizardV7.ts:489:function calculateAssessment(selectedGoals: string[]) {
src/components/shared/IndustryComplianceBadges.tsx:512:  calculatedAt?: string;
src/components/shared/IndustryComplianceBadges.tsx:521:  calculatedAt,
src/components/shared/IndustryComplianceBadges.tsx:525:  const displayDate = calculatedAt || new Date().toLocaleDateString('en-US', {
src/application/workflows/buildQuote.ts:1:import { calculateDatabaseBaseline } from '@/services/baselineService';
src/application/workflows/buildQuote.ts:3:import { calculateFinancialMetrics } from '@/services/centralizedCalculations';
src/application/workflows/buildQuote.ts:55:  const baseline = await calculateDatabaseBaseline(useCaseDetails.slug, 1, answers);
src/application/workflows/buildQuote.ts:64:  const financials = await calculateFinancialMetrics({
src/components/PricingPresets.tsx:245:  const calculateEstimatedTotal = (preset: PricingPreset, kwh: number = 100, kw: number = 50) => {
src/components/PricingPresets.tsx:401:                          ${calculateEstimatedTotal(preset).toLocaleString()}
src/components/wizard/v7/steps/Step1LocationV7.tsx:2: * Step 1: Location (V7) ‚Äî CANONICAL FIX + TrueQuote Integration
src/components/wizard/v7/steps/Step1LocationV7.tsx:5: * - TrueQuote modal integration via window event bus
src/components/wizard/v7/steps/Step1LocationV7.tsx:113:  function calculateEstimatedSavings(): { annualSavings: number; paybackYears: number } | null {
src/components/wizard/v7/steps/Step1LocationV7.tsx:183:  const savingsEstimate = calculateEstimatedSavings();
src/components/wizard/v7/steps/Step1LocationV7.tsx:493:                      TrueQuote‚Ñ¢ Verified
src/components/wizard/v7/steps/Step1LocationV7.tsx:513:                            Based on ${locationIntel?.utilityRate?.toFixed(2)}/kWh rate, {locationIntel?.solarGrade} solar grade, and typical {location.business.industrySlug} energy usage. Final quote calculated in next steps.
src/components/wizard/v7/steps/Step1LocationV7.tsx:665:                      Confirm your business so TrueQuote‚Ñ¢ can load your utility rate, solar potential, and weather risk ‚Äî then I'll recommend the highest-ROI starter system.
src/components/wizard/v7/steps/Step1LocationV7.tsx:718:                        Verified context via TrueQuote‚Ñ¢ methodology
src/components/BessQuoteBuilder.tsx:2: * @deprecated This component is deprecated. Use QuoteEngine.generateQuote() instead.
src/components/BessQuoteBuilder.tsx:6: * - For hotel quotes: Use HotelWizard or QuoteEngine.generateQuote({ useCase: 'hotel', ... })
src/components/BessQuoteBuilder.tsx:7: * - For car wash quotes: Use CarWashWizard or QuoteEngine.generateQuote({ useCase: 'car-wash', ... })
src/components/BessQuoteBuilder.tsx:8: * - For EV quotes: Use EVChargingWizard or QuoteEngine.generateQuote({ useCase: 'ev-charging', ... })
src/components/BessQuoteBuilder.tsx:9: * - For generic quotes: Use StreamlinedWizard or QuoteEngine.generateQuote({ ... })
src/components/BessQuoteBuilder.tsx:51:        "Please migrate to QuoteEngine.generateQuote() or use AdvancedQuoteBuilder."
src/components/wizard/shared/WizardBottomAdvisor.tsx:152:          text: "Let's learn about your facility. Each answer helps me calculate your optimal system.",
src/components/wizard/shared/WizardBottomAdvisor.tsx:165:        text: `üéä Your custom proposal is ready! This is a TrueQuote‚Ñ¢ with every number traceable to authoritative sources.`,
src/utils/energyCalculations.ts:188:export const calculateAnnualFuelCost = (
src/utils/energyCalculations.ts:204:export const calculateEnergySavings = (
src/utils/energyCalculations.ts:225:export const calculateROITimeline = (
src/utils/energyCalculations.ts:251:export const findPaybackYear = (roiTimeline: ReturnType<typeof calculateROITimeline>): number => {
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:15:import { TrueQuoteBadgeCanonical } from '@/components/shared/TrueQuoteBadgeCanonical';
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:16:import { TrueQuoteModal } from '@/components/shared/TrueQuoteModal';
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:55:  const [showTrueQuoteModal, setShowTrueQuoteModal] = useState(false);
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:160:              {/* TrueQuote Badge */}
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:162:                <TrueQuoteBadgeCanonical 
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:164:                  onClick={() => setShowTrueQuoteModal(true)}
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:249:      {/* TrueQuote Info Modal */}
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:250:      <TrueQuoteModal
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:251:        isOpen={showTrueQuoteModal}
src/components/wizard/v7/steps/Step1Location_DEPRECATED.tsx:252:        onClose={() => setShowTrueQuoteModal(false)}
src/utils/industryStandardFormulas.ts:25:export const calculateNRELCapex = (
src/utils/industryStandardFormulas.ts:71:export const calculateCapacityFactor = (
src/utils/industryStandardFormulas.ts:82:export const calculateOMCosts = (
src/utils/industryStandardFormulas.ts:109:export const calculateCommercialPricing = (
src/utils/industryStandardFormulas.ts:200: * Please use `calculateFinancialMetrics()` from `services/centralizedCalculations.ts` instead.
src/utils/industryStandardFormulas.ts:204: * import { calculateFinancialMetrics } from './utils/industryStandardFormulas';
src/utils/industryStandardFormulas.ts:207: * import { calculateFinancialMetrics } from './services/centralizedCalculations';
src/utils/industryStandardFormulas.ts:208: * const result = await calculateFinancialMetrics({ ... });
src/utils/industryStandardFormulas.ts:210:export const calculateFinancialMetrics = (
src/utils/industryStandardFormulas.ts:223:      "‚ö†Ô∏è DEPRECATED: industryStandardFormulas.calculateFinancialMetrics() is deprecated.\n" +
src/utils/industryStandardFormulas.ts:224:        "Please use calculateFinancialMetrics() from services/centralizedCalculations.ts instead."
src/utils/industryStandardFormulas.ts:266:  const irr = calculateIRR([-capitalCost, ...cashFlows.slice(1).map((cf) => cf.cashFlow)]);
src/utils/industryStandardFormulas.ts:289:function calculateIRR(cashFlows: number[]): number {
src/utils/industryStandardFormulas.ts:327:export const calculateBatteryDegradation = (
src/components/modals/RealWorldApplicationModal.tsx:516:              Merlin can calculate a personalized BESS solution for your facility in just 3 minutes
src/components/wizard/v7/steps/Step3DetailsV7.tsx:15: * - Integrates 7 industry calculators (car wash, hotel, hospital, etc.)
src/components/wizard/v7/steps/Step3DetailsV7.tsx:21: * - Snapshot pricingConfig on first ready/fallback to prevent identity churn
src/components/wizard/v7/steps/Step3DetailsV7.tsx:64:  pricingConfig: PricingConfig | null;
src/components/wizard/v7/steps/Step3DetailsV7.tsx:184:  pricingConfig,
src/components/wizard/v7/steps/Step3DetailsV7.tsx:214:    if (!pricingSnapshot && ok && pricingConfig) {
src/components/wizard/v7/steps/Step3DetailsV7.tsx:215:      setPricingSnapshot(pricingConfig);
src/components/wizard/v7/steps/Step3DetailsV7.tsx:217:  }, [pricingSnapshot, pricingStatus, pricingConfig]);
src/components/wizard/v7/steps/Step3DetailsV7.tsx:219:  const pricing = pricingSnapshot ?? pricingConfig;
src/components/wizard/v7/steps/Step3DetailsV7.tsx:535:                          ? '‚úÖ Excellent! Your data is ready for TrueQuote‚Ñ¢ calculation.'
src/components/wizard/v7/steps/Step3DetailsV7.tsx:615:                pricingConfig: pricing,
src/components/VendorSponsorship.tsx:167:  const calculateEstimatedLeads = () => {
src/components/VendorSponsorship.tsx:437:                      ~{calculateEstimatedLeads()}
src/components/wizard/WIZARD_ARCHITECTURE.md:70:**TrueQuote‚Ñ¢ Services:**
src/components/wizard/WIZARD_ARCHITECTURE.md:71:- `truequote.ts` - `computeTrueQuoteSizing()` for BESS sizing
src/components/wizard/WIZARD_ARCHITECTURE.md:87:                                   QuoteEngine.generateQuote()
src/components/wizard/WIZARD_ARCHITECTURE.md:92:### Jan 21, 2026: TrueQuote‚Ñ¢ Phase 5
src/components/wizard/WIZARD_ARCHITECTURE.md:93:- Integrated `computeTrueQuoteSizing()` for sizing recommendations
src/components/wizard/WIZARD_ARCHITECTURE.md:94:- Added confidence modeling with `calculateModelConfidence()`
src/components/wizard/WIZARD_ARCHITECTURE.md:102:- Integrated Site Score‚Ñ¢ calculator
src/components/AdvancedQuoteBuilder.tsx:44:import { QuoteEngine } from "@/core/calculations";
src/components/AdvancedQuoteBuilder.tsx:47:import { calculateSolarSizing } from "@/services/useCasePowerCalculations";
src/components/AdvancedQuoteBuilder.tsx:239:  const calculatedWatts = storageSizeMW * 1000000; // Convert MW to W
src/components/AdvancedQuoteBuilder.tsx:240:  const totalWatts = systemWattsInput !== "" ? systemWattsInput : calculatedWatts;
src/components/AdvancedQuoteBuilder.tsx:242:  const calculatedAmpsAC = totalWatts / systemVoltage / Math.sqrt(3); // 3-phase AC
src/components/AdvancedQuoteBuilder.tsx:243:  const maxAmpsAC = systemAmpsACInput !== "" ? systemAmpsACInput : calculatedAmpsAC;
src/components/AdvancedQuoteBuilder.tsx:244:  const calculatedAmpsDC = totalWatts / dcVoltage;
src/components/AdvancedQuoteBuilder.tsx:245:  const maxAmpsDC = systemAmpsDCInput !== "" ? systemAmpsDCInput : calculatedAmpsDC;
src/components/AdvancedQuoteBuilder.tsx:249:  // ‚úÖ SSOT: Use unifiedQuoteCalculator.calculateQuote() - THE TRUE SINGLE ENTRY POINT
src/components/AdvancedQuoteBuilder.tsx:254:    const calculateFromSSoT = async () => {
src/components/AdvancedQuoteBuilder.tsx:282:        // Map gridConnection to valid type (hybrid ‚Üí limited for quote calculator)
src/components/AdvancedQuoteBuilder.tsx:290:        // ‚úÖ SINGLE SOURCE OF TRUTH: QuoteEngine.generateQuote() orchestrates ALL calculations
src/components/AdvancedQuoteBuilder.tsx:291:        const quoteResult = await QuoteEngine.generateQuote({
src/components/AdvancedQuoteBuilder.tsx:327:    calculateFromSSoT();
src/components/AdvancedQuoteBuilder.tsx:549:      id: "financial-calculator",
src/components/AdvancedQuoteBuilder.tsx:660:        // ‚úÖ SINGLE SOURCE OF TRUTH: Use QuoteEngine for ALL pricing/financials
src/components/AdvancedQuoteBuilder.tsx:661:        const quoteResult = await QuoteEngine.generateQuote({
src/components/AdvancedQuoteBuilder.tsx:692:        // Extract values from unified calculator
src/components/AdvancedQuoteBuilder.tsx:2108:                              placeholder="Auto-calculated"
src/components/AdvancedQuoteBuilder.tsx:2115:                              title="Auto-calculate based on system size"
src/components/AdvancedQuoteBuilder.tsx:2172:                          placeholder={calculatedWatts.toLocaleString()}
src/components/AdvancedQuoteBuilder.tsx:2179:                          Calculated: {calculatedWatts.toLocaleString()} W
src/components/AdvancedQuoteBuilder.tsx:2196:                          placeholder={calculatedAmpsAC.toFixed(0)}
src/components/AdvancedQuoteBuilder.tsx:2203:                          Calculated: {calculatedAmpsAC.toFixed(0)} A
src/components/AdvancedQuoteBuilder.tsx:2220:                          placeholder={calculatedAmpsDC.toFixed(0)}
src/components/AdvancedQuoteBuilder.tsx:2225:                          Calculated: {calculatedAmpsDC.toFixed(0)} A
src/components/AdvancedQuoteBuilder.tsx:2316:                        ‚ö° <strong>Note:</strong> Input custom values to override calculated
src/components/AdvancedQuoteBuilder.tsx:2317:                        specifications. Leave blank to use auto-calculated values based on{" "}
src/components/AdvancedQuoteBuilder.tsx:2376:                              const solarSizing = calculateSolarSizing({
src/components/wizard/ROOT_COMPONENTS_README.md:23:- **Contract:** Only raw user answers flow through, all calculations via TrueQuote‚Ñ¢
src/components/wizard/ROOT_COMPONENTS_README.md:66:  - `calculateCarWashMetrics()`
src/components/wizard/v7/shared/BusinessProfileCard.tsx:15:  isVerified?: boolean;     // TrueQuote verified
src/components/wizard/v7/shared/BusinessProfileCard.tsx:27:  rightTag = "TrueQuote‚Ñ¢ Verified",
src/components/wizard/ProgressSidebar.tsx:266:      solar: "This is where it gets exciting! I'll calculate your solar potential in real-time using industry-standard formulas."
src/utils/bessPricing.ts:11:export function calculateRealWorldPrice(): number {
src/utils/bessPricing.ts:19:export function calculateBESSPricing(
src/utils/bessPricing.ts:38:export function calculateSystemCost(
src/components/modals/VerticalRedirectModal.tsx:65:      'Demand charge reduction calculators',
src/components/modals/AboutMerlinModal.tsx:154:                <span className="text-xl font-bold text-amber-400">TrueQuote‚Ñ¢</span>
src/components/modals/AboutMerlinModal.tsx:230:                { emoji: '‚ú®', name: 'TrueQuote‚Ñ¢', desc: 'Certified' },
src/components/wizard/v7/advisor/AIEnergyAdvisor.tsx:143:        text: "Perfect! Now let's gather some details about your facility. I'll calculate your energy profile in real-time as you answer.",
src/components/wizard/v7/steps/Step3Industry.tsx:153:          Merlin uses your industry to apply the correct TrueQuote‚Ñ¢ model.
src/components/wizard/v7/steps/Step3Industry.tsx:197:                    TrueQuote‚Ñ¢ Ready
src/components/PricingPlans.tsx:110:          "Financing calculator (Loan, Lease, PPA options)",
src/components/PricingPlans.tsx:381:                  <span className="text-gray-700">Financing calculator (Loan/Lease/PPA)</span>
src/components/modals/LayoutPreferenceModal.tsx:99:                      <span>Direct access to advanced calculator</span>
src/components/wizard/CarWash16QVisuals.tsx:6: * Visual components for displaying calculator confidence and warnings:
src/components/modals/PowerAdjustmentModal.tsx:72:    // Auto-calculate related parameters when key values change
src/components/modals/PowerAdjustmentModal.tsx:90:    // Recalculate savings and payback based on system size changes
src/components/modals/PowerAdjustmentModal.tsx:92:    // For accurate financials, the final quote uses centralizedCalculations.calculateFinancialMetrics()
src/components/modals/DataCenterQuestionnaire.tsx:150:  const calculatedITLoad = config.rackCount * config.avgPowerPerRack / 1000;
src/components/modals/DataCenterQuestionnaire.tsx:151:  const calculatedTotalPower = calculatedITLoad * config.currentPUE;
src/components/modals/DataCenterQuestionnaire.tsx:159:      currentITLoadMW: config.currentITLoadMW || calculatedITLoad
src/components/modals/DataCenterQuestionnaire.tsx:163:  }, [config, calculatedITLoad, onComplete, onClose]);
src/components/modals/DataCenterQuestionnaire.tsx:261:              {calculatedITLoad.toFixed(1)} MW
src/components/modals/DataCenterQuestionnaire.tsx:359:              {(calculatedITLoad * Math.pow(1 + config.expectedGrowthPercent / 100, 3)).toFixed(1)} MW
src/components/modals/DataCenterQuestionnaire.tsx:362:              vs. current {calculatedITLoad.toFixed(1)} MW
src/components/modals/DataCenterQuestionnaire.tsx:423:              {calculatedTotalPower.toFixed(1)} MW
src/components/modals/DataCenterQuestionnaire.tsx:611:              <div className="text-lg font-bold text-purple-400">{calculatedITLoad.toFixed(1)} MW</div>
src/components/modals/DataCenterQuestionnaire.tsx:618:              <div className="text-lg font-bold text-green-400">{calculatedTotalPower.toFixed(1)} MW</div>
src/components/modals/DataCenterQuestionnaire.tsx:637:                  {(calculatedTotalPower * config.backupDurationHours).toFixed(0)} MWh
src/components/modals/DataCenterQuestionnaire.tsx:643:                  {calculatedTotalPower.toFixed(1)} MW
src/utils/calculationUtils.ts:8:import { calculateBESSPricing, calculateSystemCost } from "./bessPricing";
src/utils/calculationUtils.ts:82:export function calculateComprehensiveSystemCosts(config: SystemConfiguration): {
src/utils/calculationUtils.ts:87:  const systemCost = calculateSystemCost(
src/utils/calculationUtils.ts:102:  const dynamicPricing = calculateBESSPricing(
src/utils/calculationUtils.ts:172:export function calculateQuickEstimate(
src/utils/calculationUtils.ts:257:export function calculateSystemComponents(config: {
src/components/wizard/experimental/SmartFormWizard.tsx.skip:9: * while using same calculator services as WizardV6.
src/components/wizard/experimental/SmartFormWizard.tsx.skip:60:    // TODO: Call calculator service when built
src/components/wizard/experimental/SmartFormWizard.tsx.skip:64:    // Future: const result = await calculate{Industry}16Q(answers);
src/utils/industryBaselines.ts:50: * @deprecated Use calculateDatabaseBaseline() from baselineService.ts instead
src/utils/industryBaselines.ts:172:    scaleUnit: "calculated",
src/utils/industryBaselines.ts:246: * @deprecated Use calculateDatabaseBaseline() from /src/services/baselineService.ts instead
src/utils/industryBaselines.ts:257:export function calculateIndustryBaseline(
src/utils/industryBaselines.ts:346:    calculated: "charger configuration",
src/utils/determinismTest.ts:14:import { calculateDatabaseBaseline } from "../services/baselineService";
src/utils/determinismTest.ts:15:import { calculateFinancialMetrics } from "../services/centralizedCalculations";
src/utils/determinismTest.ts:62:      const baseline = await calculateDatabaseBaseline(
src/utils/determinismTest.ts:69:      const financial = await calculateFinancialMetrics({
src/utils/gridSynkBessFormulas.ts:15: * Source: https://grid-synk.com/bess-roi-calculator/
src/utils/gridSynkBessFormulas.ts:276:export function calculateBESSSizing(input: BESSSizingInput): BESSSizingResult {
src/utils/gridSynkBessFormulas.ts:450:export function calculateSolarModuleSeries(params: SolarDesignParams): SolarDesignResult {
src/utils/equipmentCalculations.ts:6:  calculateMarketAlignedBESSPricing,
src/utils/equipmentCalculations.ts:273:export const calculateEquipmentBreakdown = async (
src/utils/equipmentCalculations.ts:298:  const marketAnalysis = calculateMarketAlignedBESSPricing(storageSizeMW, durationHours, location);
src/utils/equipmentCalculations.ts:344:    totalCost: actualBatteryTotalCost, // ‚úÖ FIX: Use actual calculated cost
src/utils/equipmentCalculations.ts:758:      const solarCostBreakdown = solarPricingService.calculateSolarSystemCost(
src/utils/equipmentCalculations.ts:797:      console.warn("Could not calculate solar additional components:", error);
src/utils/equipmentCalculations.ts:1026:      const generatorControllerResult = systemControlsPricingService.calculateControllerSystemCost(
src/utils/equipmentCalculations.ts:1046:      console.warn("Could not calculate generator controller costs:", error);
src/utils/equipmentCalculations.ts:1053:      const relayResult = systemControlsPricingService.calculateControllerSystemCost(
src/utils/equipmentCalculations.ts:1073:      console.warn("Could not calculate protective relay costs:", error);
src/utils/equipmentCalculations.ts:1083:      const scadaResult = systemControlsPricingService.calculateScadaSystemCost(
src/utils/equipmentCalculations.ts:1112:      console.warn("Could not calculate SCADA costs:", error);
src/utils/equipmentCalculations.ts:1121:      const emsResult = systemControlsPricingService.calculateEMSCost(
src/utils/equipmentCalculations.ts:1148:      console.warn("Could not calculate EMS costs:", error);
src/utils/advancedBuilderConstants.ts:115:    id: "financial-calculator",
src/utils/wizardHelpers.ts:7: * - calculateUseCasePower() from src/services/useCasePowerCalculations.ts for power calculations
src/utils/wizardHelpers.ts:8: * - calculateDatabaseBaseline() from src/services/baselineService.ts for baseline sizing
src/utils/wizardHelpers.ts:29:      "Use calculateUseCasePower() from useCasePowerCalculations.ts instead. " +
src/utils/wizardHelpers.ts:35: * @deprecated Use calculateUseCasePower() from useCasePowerCalculations.ts instead
src/utils/wizardHelpers.ts:179:export function calculateEVChargingStorage(useCaseData: { [key: string]: any }): {
src/utils/wizardHelpers.ts:200:  const calculatedPowerMW = Math.max(0.5, Math.min(demandManagementSize, totalChargingPower * 0.8));
src/utils/wizardHelpers.ts:203:  const calculatedDurationHrs = Math.max(2, Math.min(4, 3));
src/utils/wizardHelpers.ts:206:    powerMW: Math.round(calculatedPowerMW * 10) / 10, // Round to 1 decimal
src/utils/wizardHelpers.ts:207:    durationHrs: calculatedDurationHrs,
src/utils/solarSizingUtils.ts:133:export function calculateAutomatedSolarSizing(
src/utils/solarSizingUtils.ts:220:export function calculateSpaceRequirements(
src/components/wizard/v6/types.ts:8: * Updated: January 21, 2026 - Added Progressive Model fields for TrueQuote‚Ñ¢ accuracy
src/components/wizard/v6/types.ts:13:import type { TrueQuoteAuthenticatedResult } from "@/services/merlin";
src/components/wizard/v6/types.ts:23:// Turns TrueQuote from "a smart estimator" into "a transparent financial engine"
src/components/wizard/v6/types.ts:83:export function calculateModelConfidence(
src/components/wizard/v6/types.ts:416:  // Populated ONLY by Step5MagicFit TrueQuote results.
src/components/wizard/v6/types.ts:423:    result: TrueQuoteAuthenticatedResult | null;
src/components/wizard/v6/types.ts:430:  // Once TrueQuote authenticates, MagicFit display should be frozen or hidden.
src/components/wizard/v6/types.ts:438:  // These enable TrueQuote to become a real financial model.
src/components/wizard/v6/types.ts:487: * ‚ö†Ô∏è IMPORTANT: This is NOT TrueQuote‚Ñ¢ verified data!
src/components/wizard/v6/types.ts:491: * - Real TrueQuote‚Ñ¢ numbers calculated in Steps 4-6
src/components/wizard/v6/types.ts:507: * ‚ö†Ô∏è IMPORTANT: This is NOT TrueQuote‚Ñ¢ verified data!
src/components/wizard/v6/types.ts:510: * - Clearly labeled as "Estimate only ‚Äî not TrueQuote Verified"
src/components/wizard/v6/types.ts:511: * - Real TrueQuote‚Ñ¢ numbers calculated in Step 5+
src/components/wizard/v6/types.ts:728: * Base calculations (SSOT from TrueQuote baseCalculation)
src/components/wizard/v6/types.ts:732:  // SSOT (TrueQuote baseCalculation)
src/components/wizard/v6/types.ts:793: * - Replaced by TrueQuote results in Step 5
src/components/wizard/v6/MerlinGuide.tsx:30:    preview: "I'll calculate exact savings in Step 5"
src/components/wizard/v6/MerlinGuide.tsx:73:    tip: "I'll calculate exact sizing for each option you choose!"
src/components/wizard/v6/MerlinGuide.tsx:77:    message: "I've calculated three options for you. Each balances cost, savings, and backup duration differently.",
src/components/wizard/v6/MerlinGuide.tsx:126:          : "I'll calculate your exact savings after we learn about your facility.";
src/utils/calculationFormulas.ts:16:  calculateNRELCapex,
src/utils/calculationFormulas.ts:17:  calculateCapacityFactor,
src/utils/calculationFormulas.ts:18:  calculateOMCosts,
src/utils/calculationFormulas.ts:19:  calculateBatteryDegradation,
src/utils/calculationFormulas.ts:74:  const nrelResults = calculateNRELCapex(nrelInputs);
src/utils/calculationFormulas.ts:75:  const capacityFactor = calculateCapacityFactor(duration, 1) * 100; // Convert to percentage
src/utils/calculationFormulas.ts:468:  const omResults = calculateOMCosts(nrelResults.totalSystemCostPerKW);
src/utils/calculationFormulas.ts:481:  const degradationResults = calculateBatteryDegradation(degradationInputs);
src/components/wizard/Step3Integration.tsx:8: * Detects car-wash industry and calculates power metrics in real-time
src/components/wizard/Step3Integration.tsx:13:import { calculateCarWashFromAnswers } from "@/services/calculators/carWashIntegration";
src/components/wizard/Step3Integration.tsx:14:import { calculateHotelFromAnswers } from "@/services/calculators/hotelIntegration";
src/components/wizard/Step3Integration.tsx:15:import { calculateTruckStopFromAnswers } from "@/services/calculators/truckStopIntegration";
src/components/wizard/Step3Integration.tsx:16:import { calculateEVChargingFromAnswers } from "@/services/calculators/evChargingIntegration";
src/components/wizard/Step3Integration.tsx:17:import { calculateHospitalFromAnswers } from "@/services/calculators/hospitalIntegration";
src/components/wizard/Step3Integration.tsx:18:import { calculateDataCenterFromAnswers } from "@/services/calculators/dataCenterIntegration";
src/components/wizard/Step3Integration.tsx:19:import { calculateOfficeFromAnswers } from "@/services/calculators/officeIntegration";
src/components/wizard/Step3Integration.tsx:29:  pricingConfig?: unknown;
src/components/wizard/Step3Integration.tsx:81:      const pricingConfig = state?.pricingConfig;
src/components/wizard/Step3Integration.tsx:95:      if (!pricingConfig) {
src/components/wizard/Step3Integration.tsx:97:          console.warn("[Step3Integration] Compute skipped: pricingConfig is null");
src/components/wizard/Step3Integration.tsx:112:        pricingConfig && typeof pricingConfig === "object" && "version" in pricingConfig
src/components/wizard/Step3Integration.tsx:113:          ? String((pricingConfig as Record<string, unknown>).version)
src/components/wizard/Step3Integration.tsx:120:            industryMetrics = calculateCarWashFromAnswers(answers);
src/components/wizard/Step3Integration.tsx:123:            industryMetrics = calculateHotelFromAnswers(answers);
src/components/wizard/Step3Integration.tsx:126:            industryMetrics = calculateTruckStopFromAnswers(answers);
src/components/wizard/Step3Integration.tsx:129:            industryMetrics = calculateEVChargingFromAnswers(answers);
src/components/wizard/Step3Integration.tsx:132:            industryMetrics = calculateHospitalFromAnswers(answers);
src/components/wizard/Step3Integration.tsx:135:            industryMetrics = calculateDataCenterFromAnswers(answers);
src/components/wizard/Step3Integration.tsx:138:            industryMetrics = calculateOfficeFromAnswers(answers);
src/components/wizard/Step3Integration.tsx:164:    // TrueQuote is SSOT for derived values (estimatedAnnualKwh, peakDemandKw)
src/components/wizard/Step3Integration.tsx:165:    // These will be computed by TrueQuoteEngineV2 in Step 5
src/components/wizard/Step3Integration.tsx:175:        // NOTE: estimatedAnnualKwh and peakDemandKw will be computed by TrueQuote in Step 5
src/components/wizard/Step3Integration.tsx:176:        // This ensures TrueQuote is the single source of truth for all calculations
src/components/wizard/Step3Integration.tsx:260:              {/* NOTE: Quote summary removed - TrueQuote will compute in Step 5 */}
src/components/wizard/Step3Integration.tsx:275:                      // ‚úÖ Only pass raw answers - TrueQuote will compute in Step 5
src/components/wizard/Step3Integration.tsx:296:// Step 3 no longer computes derived values - TrueQuote is SSOT
src/components/wizard/Step3Integration.tsx:297:// Quote summary will be shown in Step 5 after TrueQuote computes results
src/components/wizard/v6/MerlinAdvisor.tsx:287:          message: "I've calculated three options. Each balances cost, savings, and backup differently. PERFECT FIT is my recommendation!"
src/components/admin/PricingSystemHealthDashboard.tsx:58:  pricingConfigStatus: 'synced' | 'outdated' | 'error';
src/components/admin/PricingSystemHealthDashboard.tsx:59:  pricingConfigLastUpdate: Date | null;
src/components/admin/PricingSystemHealthDashboard.tsx:60:  pricingConfigSource: 'database' | 'localStorage' | 'fallback';
src/components/admin/PricingSystemHealthDashboard.tsx:146:      const coverage = await calculateMarketDataCoverage();
src/components/admin/PricingSystemHealthDashboard.tsx:149:      const quoteMetrics = await calculateQuoteImpactMetrics();
src/components/admin/PricingSystemHealthDashboard.tsx:178:        pricingConfigStatus: 'synced',
src/components/admin/PricingSystemHealthDashboard.tsx:179:        pricingConfigLastUpdate: null,
src/components/admin/PricingSystemHealthDashboard.tsx:180:        pricingConfigSource: 'database',
src/components/admin/PricingSystemHealthDashboard.tsx:307:  const calculateMarketDataCoverage = async (): Promise<Partial<PricingHealthMetrics>> => {
src/components/admin/PricingSystemHealthDashboard.tsx:397:  const calculateQuoteImpactMetrics = async (): Promise<Partial<PricingHealthMetrics>> => {
src/components/admin/PricingSystemHealthDashboard.tsx:411:      averagePriceDeviation: 0 // Would calculate from actual quote data
src/components/wizard/v6/LiveSystemPreview.tsx:22:import type { TrueQuoteSizing } from "@/services/truequote";
src/components/wizard/v6/LiveSystemPreview.tsx:27:  sizing: TrueQuoteSizing | null;
src/components/wizard/v6/LiveSystemPreview.tsx:32:  /** Model confidence from TrueQuote (single source of truth) */
src/components/wizard/v6/LiveSystemPreview.tsx:114:  // Use modelConfidence (from TrueQuote SSOT) if provided, otherwise fallback to sizing confidence
src/components/wizard/v6/constants.ts:66: * ‚ö†Ô∏è DEPRECATED: calculateArbitrageSavings
src/components/wizard/v6/constants.ts:69: * using arithmetic instead of reading from TrueQuote results.
src/components/wizard/v6/constants.ts:73: * - TrueQuoteAuthenticatedResult.options[tier].financials.annualSavings
src/components/wizard/v6/constants.ts:77: * @deprecated Use TrueQuote results instead. See Step5MagicFit.tsx for the authoritative path.
src/components/wizard/v6/constants.ts:79:// export const calculateArbitrageSavings = ... // REMOVED - SSOT violation
src/components/wizard/v6/micro-prompts/index.ts:4: * Progressive model collection components for TrueQuote‚Ñ¢ accuracy.
src/components/wizard/v6/advisor/advisorBudget.ts:12:  "‚ö†Ô∏è Estimate only ‚Äî not TrueQuote Verified. This preview uses benchmarks and public averages. " +
src/components/wizard/v6/advisor/advisorBudget.ts:13:  "Your TrueQuote Verified results are calculated in Step 5 after you answer facility details.";
src/components/wizard/v6/advisor/advisorBudget.ts:81:    payload.headline = payload.mode === "verified" ? "‚úÖ TrueQuote Verified" : "üîé Estimate Preview";
src/components/wizard/v6/step3/buildStep3Snapshot.ts:77:  const calculated = {
src/components/wizard/v6/step3/buildStep3Snapshot.ts:99:    calculated,
src/components/wizard/v6/steps/Step1Location.tsx:15: * - Real TrueQuote‚Ñ¢ numbers come in Steps 4-6
src/components/wizard/v6/steps/Step1Location.tsx:59:  calculateTeaserPreview,
src/components/wizard/v6/steps/Step1Location.tsx:71:import { calculateGridStress } from "@/services/gridStressCalculator";
src/components/wizard/v6/steps/Step1Location.tsx:252:              ? calculateTeaserPreview(teaserInput)
src/components/wizard/v6/steps/Step1Location.tsx:412:          // Import the calculator inline to avoid adding to imports
src/components/wizard/v6/steps/Step1Location.tsx:682:                  TrueQuote‚Ñ¢ verified in Step 5.
src/components/wizard/v6/steps/Step1Location.tsx:946:                        const gridStress = calculateGridStress(state.state);
src/components/wizard/v6/shared/IntelligencePanel.tsx:10: * ‚úÖ TrueQuote‚Ñ¢ Integrated: Uses official TrueQuoteBadge + SourceAttributionTooltip
src/components/wizard/v6/shared/IntelligencePanel.tsx:17:import { TrueQuoteBadge } from "@/components/shared/TrueQuoteBadge";
src/components/wizard/v6/shared/IntelligencePanel.tsx:65:          <TrueQuoteBadge
src/components/wizard/v6/shared/IntelligencePanel.tsx:125:          <TrueQuoteBadge
src/components/wizard/v6/shared/IntelligencePanel.tsx:189:          <TrueQuoteBadge
src/components/wizard/v6/utils/wizardStateValidator.ts:4: * Validates WizardState before calling TrueQuote engine
src/components/wizard/v6/utils/wizardStateValidator.ts:32: * Validate WizardState before Step 5 (MagicFit/TrueQuote)
src/components/wizard/v6/utils/wizardStateValidator.ts:41: * - useCaseData.estimatedAnnualKwh (if pre-calculated)
src/components/wizard/v6/utils/wizardStateValidator.ts:42: * - useCaseData.peakDemandKw (if pre-calculated)
src/components/wizard/v6/utils/wizardStateValidator.ts:44:export function validateWizardStateForTrueQuote(state: WizardState): ValidationResult {
src/components/wizard/v6/utils/wizardStateValidator.ts:99:  // STEP 3: Use Case Data (CRITICAL - This is what TrueQuote reads)
src/components/wizard/v6/utils/wizardStateValidator.ts:109:    // CRITICAL: TrueQuote reads from useCaseData.inputs
src/components/wizard/v6/utils/wizardStateValidator.ts:139:    // Note: estimatedAnnualKwh and peakDemandKw are now computed by TrueQuote, not stored in useCaseData
src/components/wizard/v6/utils/wizardStateValidator.ts:144:  // STEP 4: Preferences (Optional for TrueQuote, but recommended)
src/components/wizard/v6/utils/wizardStateValidator.ts:147:  // TrueQuote will use defaults if not provided
src/components/wizard/v6/utils/wizardStateValidator.ts:215: * Assert WizardState is valid before calling TrueQuote
src/components/wizard/v6/utils/wizardStateValidator.ts:218:export function assertWizardStateForTrueQuote(state: WizardState): void {
src/components/wizard/v6/utils/wizardStateValidator.ts:219:  const validation = validateWizardStateForTrueQuote(state);
src/components/wizard/v6/utils/wizardStateValidator.ts:228:        `This means the UI state is not ready for TrueQuote engine.\n` +
src/components/wizard/v6/utils/wizardStateValidator.ts:281:      `Fix: Remove derived fields from Step 3. TrueQuote is SSOT for all calculations.`;
src/components/wizard/v6/utils/wizardStateValidator.ts:296: * After Step 5 gets TrueQuoteAuthenticatedResult, assert that base values are populated in state.calculations.
src/components/wizard/v6/utils/wizardStateValidator.ts:305:  result: unknown; // TrueQuoteAuthenticatedResult
src/components/wizard/v6/utils/wizardStateValidator.ts:357:      `Step 5 must populate state.calculations.base with base values immediately after TrueQuote result.\n` +
src/components/wizard/v6/utils/wizardStateValidator.ts:383:  console.log("üìç Step:", "Step 5 (MagicFit/TrueQuote)");
src/components/wizard/v6/utils/wizardStateValidator.ts:418:  // UseCaseData details (what TrueQuote reads)
src/components/wizard/v6/utils/wizardStateValidator.ts:419:  console.log("üìä UseCaseData (TrueQuote Inputs):", {
src/components/wizard/v6/utils/wizardStateValidator.ts:432:  // Request snapshot keys (what will be sent to TrueQuote)
src/components/wizard/v6/utils/wizardStateValidator.ts:464:export default validateWizardStateForTrueQuote;
src/components/wizard/v6/utils/wizardStateValidator.ts:507:  // If TrueQuote has run, hide MagicFit or show as "Original estimate" only
src/components/admin/SystemHealthDashboard.tsx:86:      'TrueQuote Compliance': <Shield className="w-4 h-4" />,
src/components/wizard/v6/step3/recalcWizardCalculated.ts:14:function _calculateEVChargerLoad(evChargers: unknown): number {
src/components/wizard/v6/step3/recalcWizardCalculated.ts:69: * Recalculate all derived values
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:21: * - TrueQuote‚Ñ¢: Every metric has source attribution
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:100:// TrueQuote‚Ñ¢ Source: Merlin Energy Industry Analysis 2024, ASHRAE 90.1
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:130: * TrueQuote‚Ñ¢ compliant - returns source attribution
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:218:  // ‚úÖ SSOT COMPLIANT: Uses getIndustryTeaserProfile() with TrueQuote‚Ñ¢ source attribution
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:247:      // TrueQuote‚Ñ¢ attribution
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:1085:              {/* TrueQuote‚Ñ¢ Source Attribution */}
src/components/wizard/v6/steps/Step1LocationRedesign.tsx:1091:                    Full TrueQuote‚Ñ¢ breakdown in Step 5.
src/components/wizard/v6/advisor/advisorTypes.ts:11:  | "TrueQuote Verified"
src/components/wizard/v6/utils/wizardFingerprint.ts:5: * Only includes inputs that affect TrueQuote calculation.
src/components/wizard/v6/utils/wizardFingerprint.ts:12:  // Include only inputs that affect TrueQuote calculation.
src/components/wizard/v6/micro-prompts/ProgressiveModelPanel.tsx:30:  calculateModelConfidence,
src/components/wizard/v6/micro-prompts/ProgressiveModelPanel.tsx:218:      calculateModelConfidence(
src/components/wizard/v6/steps/Step6Quote.tsx:5: *   calculations.base    -> SSOT base values from TrueQuote (never overwritten)
src/components/wizard/v6/steps/Step6Quote.tsx:29:import type { TrueQuoteSizing } from "@/services/truequote";
src/components/wizard/v6/steps/Step6Quote.tsx:30:import { TrueQuoteBadgeCanonical } from "@/components/shared/TrueQuoteBadgeCanonical";
src/components/wizard/v6/steps/Step6Quote.tsx:40:  trueQuoteSizing?: TrueQuoteSizing | null;
src/components/wizard/v6/steps/Step6Quote.tsx:76:  // TODO: SSOT-001 - These should come from QuoteEngine.generateQuote() result
src/components/wizard/v6/steps/Step6Quote.tsx:152:            Your TrueQuote‚Ñ¢ Summary
src/components/wizard/v6/steps/Step6Quote.tsx:425:          <TrueQuoteBadgeCanonical showTooltip={true} />
src/components/wizard/v6/steps/Step6Quote.tsx:435:                  <span className="text-xs text-slate-400" title="TrueQuote‚Ñ¢ Confidence-Aware Sizing">
src/components/wizard/v6/steps/Step6Quote.tsx:553:              TrueQuote‚Ñ¢ Sizing Methodology
src/components/wizard/v6/steps/Step6Quote.tsx:559:              <TrueQuoteBadgeCanonical showTooltip={false} />
src/components/wizard/v6/steps/Step6Quote.tsx:677:            TrueQuote‚Ñ¢ Insights
src/components/wizard/v6/WizardV6.tsx:14:// TrueQuote‚Ñ¢ Brand Assets (Jan 20, 2026)
src/components/wizard/v6/WizardV6.tsx:15:import { TrueQuoteBadgeCanonical } from "@/components/shared/TrueQuoteBadgeCanonical";
src/components/wizard/v6/WizardV6.tsx:23:  calculateValueTeaser,
src/components/wizard/v6/WizardV6.tsx:29:  calculateSiteScore,
src/components/wizard/v6/WizardV6.tsx:32:} from "@/services/calculators/siteScoreCalculator";
src/components/wizard/v6/WizardV6.tsx:34:// TrueQuote‚Ñ¢ Sizing Engine (Jan 21, 2026 - Phase 5)
src/components/wizard/v6/WizardV6.tsx:35:import { computeTrueQuoteSizing, type TrueQuoteSizing } from "@/services/truequote";
src/components/wizard/v6/WizardV6.tsx:36:import { calculateModelConfidence } from "./types";
src/components/wizard/v6/WizardV6.tsx:213:      const calculatedStep = Math.max(1, Math.min(step, 6));
src/components/wizard/v6/WizardV6.tsx:214:      console.log("üìä Restored wizard state - starting at Step", calculatedStep);
src/components/wizard/v6/WizardV6.tsx:215:      return calculatedStep;
src/components/wizard/v6/WizardV6.tsx:277:    // Default: Use TrueQuote values if available (post-Step 5)
src/components/wizard/v6/WizardV6.tsx:309:    // This enables TrueQuote‚Ñ¢ to become a real financial model
src/components/wizard/v6/WizardV6.tsx:540:      let calculatedItLoad = 0;
src/components/wizard/v6/WizardV6.tsx:543:        calculatedItLoad = itLoadKW;
src/components/wizard/v6/WizardV6.tsx:547:        calculatedItLoad = rackCount * kWPerRack;
src/components/wizard/v6/WizardV6.tsx:550:        calculatedItLoad = whitespaceSquareFeet * 0.15;
src/components/wizard/v6/WizardV6.tsx:553:        calculatedItLoad = squareFeet * 0.05;
src/components/wizard/v6/WizardV6.tsx:556:        calculatedItLoad = generatorCapacity * 0.6;
src/components/wizard/v6/WizardV6.tsx:559:        calculatedItLoad = 5000;
src/components/wizard/v6/WizardV6.tsx:614:        calculatedItLoad * effectivePUE * dcMultiplier * densityMultiplier * upsMultiplier;
src/components/wizard/v6/WizardV6.tsx:1817:          `[PowerGauge] ${industry}: Bill-based estimate ${billEstimatedPeakKW} kW differs significantly from calculated ${Math.round(estimatedPeakKW)} kW (ratio: ${ratio.toFixed(2)})`
src/components/wizard/v6/WizardV6.tsx:1864:  const trueQuoteSizing = useMemo<TrueQuoteSizing | null>(() => {
src/components/wizard/v6/WizardV6.tsx:1873:    const modelConfidence = calculateModelConfidence(
src/components/wizard/v6/WizardV6.tsx:1918:    return computeTrueQuoteSizing({
src/components/wizard/v6/WizardV6.tsx:2006:      calculateValueTeaser({
src/components/wizard/v6/WizardV6.tsx:2095:        calculatedAt: new Date().toISOString(),
src/components/wizard/v6/WizardV6.tsx:2104:      const result = calculateSiteScore({
src/components/wizard/v6/WizardV6.tsx:2107:        industry: industrySlug as Parameters<typeof calculateSiteScore>[0]["industry"],
src/components/wizard/v6/WizardV6.tsx:2360:                  {/* LEFT: Merlin Identity + TrueQuote Anchor + Model Active */}
src/components/wizard/v6/WizardV6.tsx:2370:                        <TrueQuoteBadgeCanonical showTooltip={false} />
src/components/wizard/v6/WizardV6.tsx:2507:                      // Progressive Model (Jan 21, 2026 - TrueQuote‚Ñ¢ Accuracy)
src/components/wizard/v6/WizardV6.tsx:2515:                        const modelConf = calculateModelConfidence(
src/components/wizard/v6/WizardV6.tsx:2561:                          // Phase 4: Numeric confidence from TrueQuote‚Ñ¢ SSOT
src/components/wizard/v6/advisor/PowerGaugeWidget.tsx:145:              <>Complete facility details to calculate peak demand.</>
src/components/wizard/v6/advisor/PowerGaugeWidget.tsx:279:              calculate peak demand.
src/components/wizard/v6/utils/trueQuoteMapper.ts:2: * TrueQuote Engine Input Mapper
src/components/wizard/v6/utils/trueQuoteMapper.ts:11: * WizardState ‚Üí MerlinRequest ‚Üí TrueQuoteEngineV2 ‚Üí MagicFit ‚Üí Result
src/components/wizard/v6/utils/trueQuoteMapper.ts:24:// LEGACY SUPPORT - Old TrueQuoteInput format (for gradual migration)
src/components/wizard/v6/utils/trueQuoteMapper.ts:26:// @deprecated - TrueQuoteInput type kept inline for legacy mapWizardStateToTrueQuoteInput function
src/components/wizard/v6/utils/trueQuoteMapper.ts:27:// This function is only used by deprecated useTrueQuote.ts hook
src/components/wizard/v6/utils/trueQuoteMapper.ts:28:interface TrueQuoteInput {
src/components/wizard/v6/utils/trueQuoteMapper.ts:241: * LEGACY: Map WizardState to old TrueQuoteInput format
src/components/wizard/v6/utils/trueQuoteMapper.ts:244:export function mapWizardStateToTrueQuoteInput(state: WizardState): TrueQuoteInput {
src/components/wizard/v6/utils/trueQuoteMapper.ts:254:  // Map database value to TrueQuote format (ensure string)
src/components/wizard/v6/micro-prompts/ServiceSizePrompt.tsx:86:              Check your main breaker panel or utility bill. This helps Merlin calculate your grid
src/components/wizard/v6/steps/Step4Options.tsx:29:  calculateSolarPreview,
src/components/wizard/v6/steps/Step4Options.tsx:30:  calculateEvPreview,
src/components/wizard/v6/steps/Step4Options.tsx:31:  calculateGeneratorPreview,
src/components/wizard/v6/steps/Step4Options.tsx:111:  const result = calculateSolarPreview(
src/components/wizard/v6/steps/Step4Options.tsx:144:  const result = calculateEvPreview({ l2Count: l2, dcfcCount: dc }, name);
src/components/wizard/v6/steps/Step4Options.tsx:159:  const result = calculateGeneratorPreview({ sizeKw: kw, fuelType: fuel }, name);
src/components/wizard/v6/MerlinBar.tsx:178:function calculateProgressiveEstimate(props: MerlinBarProps): { 
src/components/wizard/v6/MerlinBar.tsx:193:      source: 'TrueQuote calculation'
src/components/wizard/v6/MerlinBar.tsx:604:  const estimate = useMemo(() => calculateProgressiveEstimate(props), [props]);
src/components/wizard/v6/steps/Step3Details.tsx:15: * ‚úÖ NEW (Jan 21, 2026): Includes ProgressiveModelPanel for TrueQuote‚Ñ¢ accuracy
src/components/wizard/v6/steps/Step3Details.tsx:58:          PROGRESSIVE MODEL PANEL - Micro-prompts for TrueQuote‚Ñ¢ accuracy
src/components/wizard/v6/steps/Step3Details.tsx:146:          // Note: 'calculated' and 'timestamp' are not part of useCaseData type
src/components/wizard/v6/steps/Step3Details.tsx:147:          // TrueQuote is SSOT for calculations (Step 5)
src/components/wizard/v6/step3/step3Contract.ts:81:  calculated: {
src/components/wizard/v6/advisor/AdvisorRail.tsx:9:import { TrueQuoteBadgeCanonical } from "@/components/shared/TrueQuoteBadgeCanonical";
src/components/wizard/v6/advisor/AdvisorRail.tsx:11:import type { SiteScoreResult } from "@/services/calculators/siteScoreCalculator";
src/components/wizard/v6/advisor/AdvisorRail.tsx:15:    return <TrueQuoteBadgeCanonical showTooltip={false} />;
src/components/wizard/v6/advisor/AdvisorRail.tsx:37:  // Extract REAL data from SiteScore‚Ñ¢ SSOT (TrueQuote compliant)
src/components/wizard/v6/advisor/AdvisorRail.tsx:96:        {/* Risk Factor Bars - TrueQuote‚Ñ¢ Source Attribution */}
src/components/wizard/v6/advisor/AdvisorRail.tsx:133:        {/* TrueQuote‚Ñ¢ Source Attribution */}
src/components/wizard/v6/advisor/AdvisorRail.tsx:173:    // Progressive Model (Jan 21, 2026 - TrueQuote‚Ñ¢ Accuracy)
src/components/wizard/v6/advisor/AdvisorRail.tsx:197:const _STEP_LABELS = ["Location", "Industry", "Details", "Options", "TrueQuote‚Ñ¢", "Results"];
src/components/wizard/v6/advisor/AdvisorRail.tsx:250:  // Site Score from SSOT calculator
src/components/wizard/v6/advisor/AdvisorRail.tsx:750:                  <h3 className="text-sm font-bold text-white">TrueQuote‚Ñ¢ Engine</h3>
src/components/wizard/v6/advisor/AdvisorRail.tsx:760:                    Our TrueQuote‚Ñ¢ engine is calculating your personalized quote using real-time market data, 
src/components/wizard/v6/advisor/AdvisorRail.tsx:885:      {/* WEATHER RISK MODAL (Jan 20, 2026 - TrueQuote‚Ñ¢ Compliant) */}
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:10: * - SSOT/TrueQuote compliant
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:27:import { TrueQuoteBadgeCanonical } from "@/components/shared/TrueQuoteBadgeCanonical";
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:78:  // TrueQuote modal state
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:79:  const [showTrueQuoteModal, setShowTrueQuoteModal] = useState(false);
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:298:          {/* TrueQuote Badge - Clickable */}
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:299:          <div onClick={() => setShowTrueQuoteModal(true)} className="inline-block mb-2 cursor-pointer">
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:300:            <TrueQuoteBadgeCanonical showTooltip={false} />
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:316:          {/* TrueQuote Explanation Card - REMOVED, now in modal */}
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:323:                <h3 className="text-lg font-bold text-white mb-2">What is TrueQuote‚Ñ¢?</h3>
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:373:                <div className="text-white text-sm font-semibold mb-1">TrueQuote‚Ñ¢</div>
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:682:      {/* TrueQuote Modal */}
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:683:      {showTrueQuoteModal && (
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:686:          onClick={() => setShowTrueQuoteModal(false)}
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:699:                  <h2 className="text-2xl font-black text-white">What is TrueQuote‚Ñ¢?</h2>
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:706:                onClick={() => setShowTrueQuoteModal(false)}
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:760:                  <div className="text-sm font-semibold text-white mb-1">TrueQuote‚Ñ¢</div>
src/components/wizard/v6/steps/Step1AdvisorLed.tsx:768:              onClick={() => setShowTrueQuoteModal(false)}
src/components/admin/EquipmentPricingAdmin.tsx:14: * - Edit prices with TrueQuote‚Ñ¢ attribution
src/components/admin/EquipmentPricingAdmin.tsx:350:            {/* TrueQuote Badge */}
src/components/admin/EquipmentPricingAdmin.tsx:353:              <span className="text-emerald-400 text-sm font-medium">TrueQuote‚Ñ¢</span>
src/components/admin/PricingAdminDashboard.tsx:7: * - Displays TrueQuote‚Ñ¢ attribution
src/components/admin/PricingAdminDashboard.tsx:348:            {/* TrueQuote Badge */}
src/components/admin/PricingAdminDashboard.tsx:351:              <span className="text-emerald-400 text-sm font-medium">TrueQuote‚Ñ¢</span>
src/components/wizard/v6/steps/Step5MagicFit.tsx:24:import type { TrueQuoteAuthenticatedResult } from "@/services/merlin";
src/components/wizard/v6/steps/Step5MagicFit.tsx:25:import { TrueQuoteVerifyBadge } from "../components/TrueQuoteVerifyBadge";
src/components/wizard/v6/steps/Step5MagicFit.tsx:26:import type { TrueQuoteWorksheetData } from "../components/TrueQuoteVerifyBadge";
src/components/wizard/v6/steps/Step5MagicFit.tsx:27:import { calculateIncentives } from "@/services/stateIncentivesService";
src/components/wizard/v6/steps/Step5MagicFit.tsx:172: * Build TrueQuoteWorksheetData from quoteResult for the verification modal
src/components/wizard/v6/steps/Step5MagicFit.tsx:175:  quoteResult: TrueQuoteAuthenticatedResult | null,
src/components/wizard/v6/steps/Step5MagicFit.tsx:178:): TrueQuoteWorksheetData | null {
src/components/wizard/v6/steps/Step5MagicFit.tsx:366:  const [quoteResult, setQuoteResult] = useState<TrueQuoteAuthenticatedResult | null>(null);
src/components/wizard/v6/steps/Step5MagicFit.tsx:398:                const incentiveResult = await calculateIncentives(
src/components/wizard/v6/steps/Step5MagicFit.tsx:448:        // Base calculations (SSOT - immutable, from TrueQuote baseCalculation)
src/components/wizard/v6/steps/Step5MagicFit.tsx:501:        <p className="text-slate-400 text-sm mt-2">TrueQuote Engine is analyzing your facility</p>
src/components/wizard/v6/steps/Step5MagicFit.tsx:824:      {/* TrueQuote Badge */}
src/components/wizard/v6/steps/Step5MagicFit.tsx:826:        <TrueQuoteVerifyBadge
src/components/admin/UseCaseConfigManager.tsx:12:import { calculateDatabaseBaseline } from '../../services/baselineService';
src/components/admin/UseCaseConfigManager.tsx:46:      const result = await calculateDatabaseBaseline(slug, 1.0);
src/components/wizard/v6/advisor/MerlinBatteryProgress.tsx:23:    { number: 5, label: 'TrueQuote‚Ñ¢', short: 'I', color: '#22d3ee' },    // Cyan
src/components/wizard/v6/advisor/AdvisorRail.tsx.bak.20260117-061845:12:        ‚úÖ TrueQuote Verified
src/components/wizard/v6/advisor/AdvisorRail.tsx.bak.20260117-061845:39:const STEP_LABELS = ["Location", "Industry", "Details", "Options", "TrueQuote", "Results"];
src/components/wizard/v6/advisor/AdvisorRail.tsx.bak.20260117-061845:104:              {payload?.headline || "Answer a few questions to get your TrueQuote‚Ñ¢"}
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:2: * TrueQuoteVerifyBadge.tsx - MERLIN REDESIGN
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:4: * A magical verification badge that opens the TrueQuote Verification modal.
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:39:  calculateFinancialProjection, 
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:48:export interface TrueQuoteWorksheetData {
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:115:  calculated: number;
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:138:interface TrueQuoteVerifyBadgeProps {
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:140:  worksheetData: TrueQuoteWorksheetData | null;
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:145:export const TrueQuoteVerifyBadge: React.FC<TrueQuoteVerifyBadgeProps> = ({
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:176:          <span className="text-xs font-semibold">TrueQuote‚Ñ¢</span>
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:180:          <TrueQuoteModal 
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:218:            <span className="text-sm font-bold text-white">TrueQuote</span>
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:236:          <TrueQuoteModal 
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:305:                    TrueQuote
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:357:        <TrueQuoteModal 
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:370:interface TrueQuoteModalProps {
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:371:  worksheetData: TrueQuoteWorksheetData;
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:375:const TrueQuoteModal: React.FC<TrueQuoteModalProps> = ({ worksheetData, onClose }) => {
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:464:                <span className="text-3xl font-bold text-white">TrueQuote</span>
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:591:const SummaryTab: React.FC<{ worksheetData: TrueQuoteWorksheetData }> = ({ worksheetData }) => {
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:598:    step.name.toLowerCase().includes('calculate base') ||
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:761:                Calculated: <span className="font-mono text-emerald-400">{dev.calculated.toLocaleString()}</span>
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:1014:const FinancialsTab: React.FC<{ worksheetData: TrueQuoteWorksheetData }> = ({ worksheetData }) => {
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:1029:    calculateFinancialProjection(financialInputs, 10),
src/components/wizard/v6/components/TrueQuoteVerifyBadge.tsx:1143:export default TrueQuoteVerifyBadge;
src/components/wizard/v6/components/index.ts:8:export { SavingsPreviewPanel, calculateSavingsPreview } from './SavingsPreviewPanel';
src/components/wizard/v6/components/ValueTicker.tsx:49:function calculateValues(props: ValueTickerProps) {
src/components/wizard/v6/components/ValueTicker.tsx:139:  const values = useMemo(() => calculateValues(props), [props]);
src/components/wizard/v6/components/ValueTicker.tsx:141:  // Only show on Steps 3-6 (but calculate values for all steps to maintain hook order)
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:4: * Complete interactive preview showing the TrueQuote Verify badge
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:11:import { TrueQuoteVerifyBadge } from './TrueQuoteVerifyBadge';
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:12:import type { TrueQuoteWorksheetData } from './TrueQuoteVerifyBadge';
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:15:const DEMO_WORKSHEET_DATA: TrueQuoteWorksheetData = {
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:170:      calculated: 1600,
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:173:      explanation: 'Displayed BESS (100 kW) is 93% smaller than calculated (1,600 kW)',
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:179:      calculated: 4000,
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:196:export default function TrueQuoteVerifyDemo() {
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:209:            TrueQuote‚Ñ¢ Verify Badge Demo
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:313:          {/* TrueQuote Verify Badge - STEP 5 PLACEMENT */}
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:315:            <TrueQuoteVerifyBadge
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:354:              {/* TrueQuote Verify Badge - STEP 6 PLACEMENT (Compact) */}
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:355:              <TrueQuoteVerifyBadge
src/components/wizard/v6/components/TrueQuoteVerifyDemo.tsx:419:            üëÜ Click either TrueQuote Verify badge to see the worksheet modal
src/components/wizard/v6/components/ValidationErrorPanel.tsx:5: * Used in Step5MagicFit when WizardState fails validation before TrueQuote call.
src/components/wizard/v6/components/ValidationErrorPanel.tsx:70:  // First error step calculated but not currently used in UI
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:6: * ‚ö†Ô∏è IMPORTANT: This is NOT TrueQuote‚Ñ¢ verified data!
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:9: * - Real TrueQuote‚Ñ¢ numbers are calculated in Steps 4-6
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:26: * Source: Industry benchmarks, NOT TrueQuote verified
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:177: * Real calculations use TrueQuote‚Ñ¢ in Steps 4-6
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:180:export function calculateSavingsPreview(
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:231:    disclaimer: `Preliminary estimate based on typical ${industrySlug.replace(/_/g, " ")} energy profiles. Your personalized TrueQuote‚Ñ¢ with verified savings will be calculated in Step 5.`,
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:264:  const preview = calculateSavingsPreview(industrySlug, electricityRate, demandCharge, sunHours);
src/components/wizard/v6/components/SavingsPreviewPanel.tsx:372:            *Estimate based on typical {industryName.toLowerCase()} profiles. TrueQuote‚Ñ¢ verified in

=== PACKAGE SCRIPTS (build/lint) ===
{
  "name": "merlin2",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "workspaces": [
    "packages/*",
    "apps/*"
  ],
  "scripts": {
    "dev": "concurrently \"npm run dev:frontend\" \"npm run dev:backend\"",
    "dev:frontend": "vite",
    "dev:backend": "node server/index.js",
    "build": "tsc -b && vite build",
    "build:analyze": "vite build --mode analyze",
    "build:prod": "NODE_ENV=production vite build",
    "type-check": "tsc --noEmit",
    "typecheck": "tsc --noEmit",
    "lint": "eslint src --ext .ts,.tsx",
    "lint:fix": "eslint src --ext .ts,.tsx --fix",
    "format": "prettier --write src/**/*.{ts,tsx,css,json}",
    "format:check": "prettier --check src/**/*.{ts,tsx,css,json}",
    "preview": "vite preview",
    "backup": "./scripts/backup-critical-files.sh",
    "safe-build": "./scripts/backup-critical-files.sh && tsc -b && vite build",
    "clean-build": "rm -rf dist node_modules/.vite && npm run build",
    "cleanup": "./scripts/cleanup.sh",
    "cleanup:audit": "./scripts/cleanup.sh audit",
    "cleanup:deprecated": "./scripts/cleanup.sh deprecated",
    "cleanup:large-files": "./scripts/cleanup.sh large-files",
    "cleanup:dead-code": "./scripts/cleanup.sh dead-code",
    "cleanup:duplicates": "./scripts/cleanup.sh duplicates",
    "cleanup:deps": "./scripts/cleanup.sh deps",
    "cleanup:clean": "./scripts/cleanup.sh clean",
    "cleanup:full": "./scripts/cleanup.sh full",
    "auto-fix": "./scripts/auto-fix.sh",
    "remove-unused": "node scripts/remove-unused-imports.js",
    "remove-unused:dry": "node scripts/remove-unused-imports.js --dry-run",
    "safe-deploy": "./scripts/backup-critical-files.sh && npm run build && flyctl deploy",
    "clean-deploy": "./scripts/backup-critical-files.sh && npm run clean-build && flyctl deploy --no-cache",
    "deploy:staging": "npm run build && ./scripts/deploy-staging.sh",
    "deploy:prod": "npm run build:prod && ./scripts/deploy-prod.sh",
    "validate": "npm run typecheck && npm run lint && npm run test",
    "pre-deploy": "npm run validate && npm run build",
    "test": "vitest run",
    "test:coverage": "vitest run --coverage",
    "test:e2e:all": "npm run test:playwright && npm run test:puppeteer",
    "test:playwright": "playwright test",
    "test:playwright:ui": "playwright test --ui",
    "test:playwright:debug": "playwright test --debug",
    "test:playwright:headed": "playwright test --headed",
    "test:playwright:chromium": "playwright test --project=chromium",
    "test:puppeteer": "jest --config tests/jest.puppeteer.config.js tests/puppeteer",
    "test:stagehand": "ts-node tests/stagehand/wizard.test.ts",
    "test:visual": "npx puppeteer tests/puppeteer/wizard.test.ts",
    "test:smoke": "playwright test --grep smoke",
    "test:hotel": "playwright test --grep 'Hotel'",
    "test:carwash": "playwright test --grep 'Car Wash'",
    "test:datacenter": "playwright test --grep 'Data Center'",
    "test:hospital": "playwright test --grep 'Hospital'",
    "test:manufacturing": "playwright test --grep 'Manufacturing'",
    "test:retail": "playwright test --grep 'Retail'",
    "test:restaurant": "playwright test --grep 'Restaurant'",
    "test:office": "playwright test --grep 'Office'",
    "test:university": "playwright test --grep 'University'",
    "test:evcharging": "playwright test --grep 'EV Charging'",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:headed": "playwright test --headed",
    "test:e2e:chromium": "playwright test --project=chromium",
    "test:e2e:links": "playwright test link-checker --reporter=line",
    "test:unit": "vitest run",
    "test:watch": "vitest",
    "test:calculations": "npx tsx src/tests/runCalculationTests.ts",
    "test:truequote": "npx tsx src/tests/trueQuoteDataFlowTest.ts",
    "report": "playwright show-report",
    "screenshots": "mkdir -p tests/screenshots",
    "prepare": "husky",
    "test:perf:unit": "vitest run tests/perf --reporter=verbose",
    "test:perf:e2e": "playwright test tests/e2e/wizardv6.perf.spec.ts",
    "perf": "npm run test:perf:unit && npm run test:perf:e2e"
  },
  "dependencies": {
    "@supabase/supabase-js": "^2.79.0",
    "concurrently": "^9.2.1",
    "docx": "^9.5.1",
    "dotenv": "^17.2.3",
    "express": "^5.2.1",
    "file-saver": "^2.0.5",
    "framer-motion": "^12.23.25",
    "lucide-react": "^0.546.0",
    "papaparse": "^5.5.3",
    "pdfjs-dist": "^5.4.449",
    "react": "^19.1.1",
    "react-dom": "^19.1.1",
    "resend": "^6.5.2",
    "rss-parser": "^3.13.0",
    "xlsx": "^0.18.5"
  },
  "devDependencies": {
    "@eslint/js": "^9.36.0",
    "@playwright/test": "^1.56.1",
    "@tailwindcss/postcss": "^4.1.14",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.0",
    "@types/file-saver": "^2.0.7",
    "@types/google.maps": "^3.58.1",
    "@types/node": "^24.6.0",
    "@types/papaparse": "^5.5.1",
    "@types/react": "^19.1.16",
    "@types/react-dom": "^19.1.9",
    "@vitejs/plugin-react": "^5.0.4",
    "@vitest/ui": "^4.0.15",
    "autoprefixer": "^10.4.21",
    "esbuild": "^0.21.5",
    "eslint": "^9.36.0",
    "eslint-formatter-unix": "^9.0.1",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.22",
    "eslint-plugin-unused-imports": "^4.3.0",

